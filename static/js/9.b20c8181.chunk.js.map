{"version":3,"sources":["app/firebase.js","app/apollo.js","components/panel/panels/weeks/add.js","components/panel/panels/weeks/update-workout.js","components/panel/panels/index.js","components/panel/panels/auth/sign-in.js","components/panel/panels/drills/add.js","components/panel/panels/drills/edit.js","components/panel/panels/daily-challenges/add.js","components/panel/panels/daily-challenges/edit.js","components/panel/panels/workouts/add.js","components/panel/panels/workouts/addVersion.js","components/panel/panels/workouts/edit.js","components/panel/panels/weeks/view-workout-version.js","components/panel/panel.js","app/react-app.js"],"names":["Firebase","children","apolloClient","useApolloClient","useContext","Services","Auth","updateAuth","authUser","uid","isAuthenticated","useEffect","a","authUserUid","_","get","query","Queries","auth","getUser","variables","userRes","isAuthenticating","signIn","email","password","firebase","signInWithEmailAndPassword","signOut","onAuthStateChanged","user","getIdToken","token","getIdTokenResult","idTokenResult","claims","isEmpty","initializeApp","apiKey","process","authDomain","databaseURL","projectId","propTypes","PropTypes","node","Apollo","httpLink","HttpLink","uri","headers","Authorization","wsLink","WebSocketLink","options","reconnect","timeout","connectionParams","link","split","getMainDefinition","kind","operation","client","ApolloClient","cache","InMemoryCache","today","Date","matchWorkout","searchTerms","workout","title","type","terms","map","term","lowerCase","reduce","total","curr","includes","SearchRow","colourProps","matchSize","onSelect","selected","useState","versions","selectOptions","version_num","label","value","getInitialSelectedState","selectedVersion","setSelectedVersion","isTruncated","setIsTruncated","match","version","find","versionId","body","truncate","lenght","color","background","Pane","display","flexDirection","minHeight","marginBottom","Select","onChange","e","Number","target","defaultValue","key","IconButton","icon","iconSize","appearance","onClick","preventDefault","elevation","flex","paddingLeft","paddingRight","paddingBottom","paddingTop","alignItems","Heading","size","marginRight","justifyContent","line","i","Text","closePanel","UI","errors","setErrors","initialValues","onSubmit","console","error","message","values","handleChange","handleSubmit","isSubmitting","TextInputField","name","autoFocus","Button","isLoading","disabled","useMutation","drills","add","refetchQueries","getAll","awaitRefetchQueries","insertDrill","history","useHistory","description","data","objects","res","id","push","dirty","url","placeholder","FormField","Textarea","iconBefore","marginTop","props","useQuery","getOne","loading","update","updateDrill","drill","embed_url","isNull","enableReinitialize","dailyChallenges","insertChallenge","updateChallenge","challenge","emit","drillsData","drillsLoading","workouts","addVersion","selectedDrills","setSelectedDrills","intensityOptions","constants","workoutTypes","allDrills","unselectedDrills","filter","some","running_km","running_minutes","intensity","stats","drills_insert_data","_drill","_owner","workoutId","setFieldValue","Radio","checked","height","marginLeft","Paragraph","intent","rows","className","colSpan","workoutData","workoutLoading","getVersion","newVersionNum","_workout","updateVersion","addDrill","addDrillsLoading","removeDrill","workoutsDrills","workoutsDrillId","stats_update_data","version_id","workout_id","stats_id","workout_data","stats_data","_workouts_version","running_km_beginner_short","running_minutes_beginner_short","running_km_beginner_long","running_minutes_beginner_long","running_km_intermediate_short","running_minutes_intermediate_short","running_km_intermediate_long","running_minutes_intermediate_long","running_km_advanced_short","running_minutes_advanced_short","running_km_advanced_long","running_minutes_advanced_long","days","daysData","daysLoading","weeks","weeksData","weeksLoading","addWeek","takenDays","week_start","formatISO","parseISO","dateSelectOptions","range","day","date","addDays","startOfWeek","weekStartsOn","format","_day","SelectField","updateWeekday","openPanel","setSearchTerms","filteredWorkouts","setFilteredWorkouts","selectedWorkoutVersionId","setSelectedWorkoutVersionId","selectedWorkout","selectedWorkoutId","orderBy","_handleClearWorkout","setTimeout","panel","workoutVersionId","SearchInput","width","typesValue","intensityValue","Badge","padding","to","style","widthMap","wide","normal","Panel","_isOpen","ShownPanel","panelMap","SideSheet","isShown","onCloseComplete","preventBodyScrolling","Admin","lazy","ReactApp","payload","setAuth","setUI","ui","breakpoint","getBreakpoint","setBreakpoint","window","addEventListener","debounce","Provider","path","component","NoRoute","innerWidth"],"mappings":"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","file":"static/js/9.b20c8181.chunk.js","sourcesContent":["\n// deps\nimport React, { useContext, useEffect } from \"react\";\nimport PropTypes from \"prop-types\";\nimport firebase from \"firebase/app\";\nimport \"firebase/auth\";\nimport _ from \"lodash\";\nimport { useApolloClient } from \"@apollo/react-hooks\";\n\n// app\nimport Services from \"./services\";\nimport Queries from \"./queries\";\n\n//\n// Adultletics Admin / Views / App / Firebase\n//\n\n\nconst firebaseConfig = {\n\tapiKey: process.env.REACT_APP_FIREBASE_API_KEY,\n\tauthDomain: process.env.REACT_APP_FIREBASE_AUTH_DOMAIN,\n\tdatabaseURL: process.env.REACT_APP_FIREBASE_DB_URL,\n\tprojectId: process.env.REACT_APP_FIREBASE_PROJECT_ID,\n};\n\nfirebase.initializeApp( firebaseConfig );\n\nexport default function Firebase ({ children }) {\n\tconst apolloClient = useApolloClient();\n\tconst { updateAuth, authUser, uid, isAuthenticated } = useContext( Services.Auth );\n\n\tuseEffect(() => {\n\t\t( async () => {\n\t\t\tconst authUserUid = _.get( authUser, \"uid\" );\n\t\t\tif ( uid && uid !== authUserUid ) {\n\t\t\t\tconst userRes = await apolloClient.query({ query: Queries.auth.getUser, variables: { uid }});\n\t\t\t\tconst authUser = _.get( userRes, \"data.users_by_pk\" );\n\t\t\t\tupdateAuth({ authUser });\n\t\t\t} \n\t\t\tif ( !uid ) updateAuth({ authUser: {}});\n\t\t\tupdateAuth({ isAuthenticating: false });\n\t\t})();\n\t// eslint-disable-next-line\n\t}, [ uid ]);\n\n\tuseEffect(() => {\n\t\tupdateAuth({ \n\t\t\tsignIn: async ( email, password ) => await firebase.auth().signInWithEmailAndPassword( email, password ), \n\t\t\tsignOut: () => firebase.auth().signOut(),\n\t\t});\n\t\t\n\t\tfirebase.auth().onAuthStateChanged( async user => {\n\t\t\tupdateAuth({ isAuthenticating: true });\n\t\t\tif ( user ) {\n\t\t\t\tconst token = await user.getIdToken();\n\t\t\t\tconst idTokenResult = await user.getIdTokenResult();\n\t\t\t\tconst hasuraClaim = idTokenResult.claims[ \"https://hasura.io/jwt/claims\" ];\n\t\t\t\tif ( hasuraClaim ) updateAuth({ token, uid: user.uid });\n\t\t\t} else { \n\t\t\t\tupdateAuth({ authUser: {}, token: null, uid: \"\" }); \n\t\t\t\tupdateAuth({ isAuthenticating: false });\n\t\t\t}\n\t\t});\n\t// eslint-disable-next-line\n\t}, []);\n\n\tuseEffect(() => { \n\t\tif ( _.isEmpty( authUser ) && isAuthenticated !== false ) updateAuth({ isAuthenticated: false });\n\t\tif ( !_.isEmpty( authUser ) && isAuthenticated !== true ) updateAuth({ isAuthenticated: true });\n\t// eslint-disable-next-line\n\t}, [ authUser ]);\n\n\treturn (\n\t\t<>\n\t\t\t{ children && children }\n\t\t</>\n\t);\n}\nFirebase.propTypes = {\n\tchildren: PropTypes.node,\n};\n","\n// deps\nimport React, { useContext } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { ApolloProvider } from \"@apollo/react-hooks\";\nimport ApolloClient from \"apollo-client\";\nimport { WebSocketLink } from \"apollo-link-ws\";\nimport { HttpLink } from \"apollo-link-http\";\nimport { split } from \"apollo-link\";\nimport { getMainDefinition } from \"apollo-utilities\";\nimport { InMemoryCache } from \"apollo-cache-inmemory\";\n\n\n// app\nimport Services from \"./services\";\n\n//\n// Adultletics Admin / Views / App / Apollo Provider\n//\n\nexport default function Apollo ({ children }) {\n\tconst { token } = useContext( Services.Auth );\n    \n\tconst httpLink = new HttpLink({\n\t\turi: \"https://adultletics-hasura.herokuapp.com/v1/graphql\",\n\t\theaders: token ? { Authorization: `Bearer ${ token }` } : {},\n\t});\n    \n\tconst wsLink = new WebSocketLink({\n\t\turi: \"wss://adultletics-hasura.herokuapp.com/v1/graphql\",\n\t\toptions: {\n\t\t\treconnect: true,\n\t\t\ttimeout: 30000,\n\t\t\tconnectionParams: token ? { headers: { Authorization: `Bearer ${ token }` }} : {},\n\t\t},\n\t});\n\n\tconst link = split(\n\t\t({ query }) => {\n\t\t\tconst { kind, operation } = getMainDefinition( query );\n\t\t\treturn kind === \"OperationDefinition\" && operation === \"subscription\";\n\t\t},\n\t\twsLink,\n\t\thttpLink,\n\t);\n\n\tconst client = new ApolloClient({\n\t\tlink,\n\t\tcache: new InMemoryCache(),\n\t});\n    \n\treturn (\n\t\t<ApolloProvider client={ client }>\n\t\t\t{ children }\n\t\t</ApolloProvider>\n\t);\n}\nApollo.propTypes = {\n\tchildren: PropTypes.node,\n};\n","\n// deps\nimport React, { useContext, useState } from \"react\";\nimport { SelectField, Button, Pane, Heading } from \"evergreen-ui\";\nimport { Formik } from \"formik\";\nimport { useQuery, useMutation } from \"@apollo/react-hooks\";\nimport _ from \"lodash\";\nimport { useHistory } from \"react-router-dom\";\nimport { addDays, format, formatISO, startOfWeek, parseISO } from \"date-fns\";\n\n// app\nimport { Services, Queries } from \"../index\";\n\n//\n// Adultletics Admin / Views / Panel / Panels / Weeks / Add\n//\n\n\nconst today = new Date();\n\nexport default function AddWeekPanel () {\n\tconst { data: daysData, loading: daysLoading } = useQuery( Queries.days.getAll );\n\tconst { data: weeksData, loading: weeksLoading } = useQuery( Queries.weeks.getAll );\n\tconst [ addWeek ] = useMutation( Queries.weeks.add, { refetchQueries: [{ query: Queries.weeks.getAll }], awaitRefetchQueries: true });\n\tconst { authUser } = useContext( Services.Auth );\n\tconst { closePanel } = useContext( Services.UI );\n\tconst [ errors, setErrors ] = useState( null );\n\tconst history = useHistory();\n\n\tif ( daysLoading || weeksLoading ) return null;\n    \n\tconst takenDays = _.map( _.get( weeksData, \"weeks\" ), ({ week_start }) => formatISO( parseISO( week_start )));\n\tconst dateSelectOptions = _.map( _.range( 7, 29, 7 ) , day => {\n\t\tconst date = addDays( startOfWeek( today, { weekStartsOn: 1 }), day );\n\t\treturn {\n\t\t\tvalue: formatISO( date ),\n\t\t\tlabel: `Week starting: ${ format( date, \"do MMMM\" ) }`,\n\t\t\tdisabled: takenDays.includes( formatISO( date )),\n\t\t};});\n\n\treturn ( <>\n\t\t<Pane marginBottom={ 56 }>\n\t\t\t<Heading size={ 600 }>Adding a new week</Heading>\n\t\t</Pane>\n\t\t<Formik\n\t\t\tinitialValues={{}}\n\t\t\tonSubmit={ async ({ week_start }) => {\n\t\t\t\tsetErrors( null );\n\t\t\t\ttry {\n\t\t\t\t\tconst res = await addWeek({ variables: { objects: [{\n\t\t\t\t\t\t_owner: authUser.id,\n\t\t\t\t\t\ttitle: _.get( _.find( dateSelectOptions, [ \"value\", week_start ]), \"label\" ),\n\t\t\t\t\t\tweek_start,\n\t\t\t\t\t\tdays: {\n\t\t\t\t\t\t\tdata: _.map( _.get( daysData, \"days\" ), day => ({ _day: day.id })),\n\t\t\t\t\t\t},\n\t\t\t\t\t}]}});\n\t\t\t\t\tclosePanel();\n\t\t\t\t\tconst id = _.get( res, \"data.insert_weeks.returning[0].id\" );\n\t\t\t\t\thistory.push( `/admin/weeks/${ id }` );\n\t\t\t\t} catch ( error ) {\n\t\t\t\t\tconsole.error( error );\n\t\t\t\t\tsetErrors( error.message );\n\t\t\t\t}\n\t\t\t}}\n\t\t>{\n\t\t\t\t({ values, dirty, handleChange, handleSubmit, isSubmitting }) => {\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t<form>\n\t\t\t\t\t\t\t\t<SelectField label=\"Please choose which upcoming week to create\" name=\"week_start\" value={ values.type } onChange={ handleChange } height={ 40 }>\n\t\t\t\t\t\t\t\t\t<option key=\"empty\" value=\"\">Please select an option...</option>\n\t\t\t\t\t\t\t\t\t{ dateSelectOptions && _.map( dateSelectOptions, ({ value, label, disabled }) => ( \n\t\t\t\t\t\t\t\t\t\t<option key={ value } value={ value } disabled={ disabled }>{ label }</option> \n\t\t\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t\t\t</SelectField>\n\t\t\t\t\t\t\t\t<Button iconBefore={ isSubmitting ? \"\" : \"tick\"} isLoading={ isSubmitting } disabled={ !dirty || !values.week_start } onClick={ handleSubmit }>Add</Button>\n\t\t\t\t\t\t\t\t{ errors && <p>{ errors }</p>}\n\t\t\t\t\t\t\t</form> \n\t\t\t\t\t\t</>\n\t\t\t\t\t);\n\t\t\t\t}}\n\t\t</Formik>\n\t</> );\n}\n","\n// deps\nimport React, { useContext, useState, useEffect } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { SearchInput, Button, Pane, Heading, Text, Select, IconButton } from \"evergreen-ui\";\nimport { Formik } from \"formik\";\nimport { useQuery, useMutation } from \"@apollo/react-hooks\";\nimport _ from \"lodash\";\n\n// app\nimport { Services, Queries, Loading } from \"../index\";\n\n//\n// Adultletics Admin / Views / Panel / Panels / Weeks / Add Workout\n//\n\n\nexport default function UpdateWeekDayWorkoutPanel ({ props }) {\n\tconst { id, title } = props;\n\n\tconst { data, loading } = useQuery( Queries.workouts.getAll );\n\tconst [ updateWeekday ] = useMutation( Queries.weeks.updateWeekday );\n\tconst { closePanel, openPanel } = useContext( Services.UI );\n\tconst [ errors, setErrors ] = useState( null );\n\tconst [ searchTerms, setSearchTerms ] = useState( \"\" );\n\tconst [ filteredWorkouts, setFilteredWorkouts ] = useState( \"\" );\n\tconst [ selectedWorkoutVersionId, setSelectedWorkoutVersionId ] = useState( \"\" );\n\n\tconst workouts = _.get( data, \"workouts\" );\n\tconst selectedWorkout = _.find( workouts, ({ versions }) => _.some( versions, [ \"id\", selectedWorkoutVersionId ]));\n\tconst selectedWorkoutId = _.get( selectedWorkout, \"id\" );\n\n\tuseEffect(() => setFilteredWorkouts( \n\t\t_.orderBy( _.map( workouts, workout => ({\n\t\t\t...workout,\n\t\t\tmatch: matchWorkout( searchTerms, workout ),\n\t\t})), [ \"match\" ], [ \"desc\" ])), [ searchTerms, workouts ]);\n    \n\tconst _handleWorkoutAdd = () => {\n\t\tclosePanel();\n\t\tsetTimeout(() => openPanel({ panel: \"workouts/add\", size: \"wide\", props: { emit: async workoutVersionId => { \n\t\t\ttry {\n\t\t\t\tawait updateWeekday({ variables: { id, data: { _workouts_version: workoutVersionId }}});\n\t\t\t\tclosePanel();\n\t\t\t} catch ( error ) {\n\t\t\t\tconsole.error( error );\n\t\t\t\tsetErrors( error.message );\n\t\t\t}\n\t\t} }}), 200 );\n\t};\n\n\tconst _handleClearWorkout = async e => {\n\t\te.preventDefault();\n\t\tsetErrors( null );\n\t\ttry {\n\t\t\tawait updateWeekday({ variables: { id, data: { _workouts_version: null }}});\n\t\t\tclosePanel();\n\t\t} catch ( error ) {\n\t\t\tconsole.error( error );\n\t\t\tsetErrors( error.message );\n\t\t}\n\t};\n\n\tif ( loading ) return <Loading />;\n\n\treturn ( <>\n\t\t<Pane marginBottom={ 56 } display=\"flex\" justifyContent=\"space-between\">\n\t\t\t<Heading size={ 600 }>Updating Workout for { title }</Heading>\n\t\t\t<Button marginLeft={ 8 } iconBefore=\"plus\" onClick={ _handleWorkoutAdd }>Create workout</Button>\n\t\t</Pane>\n\t\t<Formik\n\t\t\tinitialValues={{}}\n\t\t\tonSubmit={ async () => {\n\t\t\t\tsetErrors( null );\n\t\t\t\ttry {\n\t\t\t\t\tawait updateWeekday({ variables: { id, data: { _workouts_version: selectedWorkoutVersionId }}});\n\t\t\t\t\tclosePanel();\n\t\t\t\t} catch ( error ) {\n\t\t\t\t\tconsole.error( error );\n\t\t\t\t\tsetErrors( error.message );\n\t\t\t\t}\n\t\t\t}}\n\t\t>{\n\t\t\t\t({ handleSubmit, isSubmitting }) => {\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t<form>\n\t\t\t\t\t\t\t\t<Pane marginBottom={ 48 }>\n\t\t\t\t\t\t\t\t\t<SearchInput placeholder=\"Filter available workouts on title and type\" width=\"100%\" onChange={ e => setSearchTerms( e.target.value.split( \" \" )) }/>\n\t\t\t\t\t\t\t\t</Pane>\n\t\t\t\t\t\t\t\t<Pane marginBottom={ 32 }>\n\t\t\t\t\t\t\t\t\t{ !_.isEmpty( filteredWorkouts ) && _.map( filteredWorkouts, workout => \n\t\t\t\t\t\t\t\t\t\t<SearchRow \n\t\t\t\t\t\t\t\t\t\t\tkey={ workout.id } \n\t\t\t\t\t\t\t\t\t\t\tworkout={ workout } \n\t\t\t\t\t\t\t\t\t\t\tmatchSize={ _.size( searchTerms ) } \n\t\t\t\t\t\t\t\t\t\t\tonSelect={ setSelectedWorkoutVersionId }\n\t\t\t\t\t\t\t\t\t\t\tselected={ workout.id === selectedWorkoutId } \n\t\t\t\t\t\t\t\t\t\t/>, \n\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t</Pane>\n\t\t\t\t\t\t\t\t<Pane display=\"flex\" justifyContent=\"space-between\">\n\t\t\t\t\t\t\t\t\t<Button type=\"submit\" iconBefore={ isSubmitting ? \"\" : \"tick\"} isLoading={ isSubmitting } disabled={ !selectedWorkoutVersionId } onClick={ handleSubmit }>Add / Update Workout</Button>\n\t\t\t\t\t\t\t\t\t<Button iconBefore={ isSubmitting ? \"\" : \"cross\"} intent=\"danger\" isLoading={ isSubmitting } onClick={ _handleClearWorkout }>Clear Day</Button>\n\t\t\t\t\t\t\t\t\t{ errors && <p>{ errors }</p>}\n\t\t\t\t\t\t\t\t</Pane>\n\n\t\t\t\t\t\t\t</form> \n\t\t\t\t\t\t</>\n\t\t\t\t\t);\n\t\t\t\t}}\n\t\t</Formik>\n\t</> );\n}\nUpdateWeekDayWorkoutPanel.propTypes = {\n\tprops: PropTypes.object,\n\tid: PropTypes.string,\n\ttitle: PropTypes.string,\n};\n\nconst matchWorkout = ( searchTerms, workout ) => {\n\tconst { title, type } = workout;\n\tconst terms = _.map( searchTerms, term => _.lowerCase( term ));\n\treturn _.reduce( terms, ( total, curr ) => ( _.lowerCase( title ).includes( curr ) || _.lowerCase( type ).includes( curr )) ? total + 1 : total, 0 );\n};\n\nconst getInitialSelectedState = workout => {\n\tconst versions = _.get( workout, \"versions\" );\n\tconst selectOptions = _.map( versions, ({ version_num }) => ({ label: `v${ version_num }`, value: version_num }));\n\treturn _.reduce( selectOptions, ( total, curr ) => curr.value > total ? curr.value : total, 0 );\n};\n\nconst SearchRow = ({ workout, matchSize, onSelect, selected }) => {\n\tconst [ selectedVersion, setSelectedVersion ] = useState( getInitialSelectedState( workout ));\n\tconst [ isTruncated, setIsTruncated ] = useState( true );\n\tconst title = _.get( workout, \"title\" );\n\tconst versions = _.get( workout, \"versions\" );\n\tconst match = _.get( workout, \"match\" );\n\tconst selectOptions = _.map( versions, ({ version_num }) => ({ label: `v${ version_num }`, value: version_num }));\n\t\n\tconst version = _.find( versions, [ \"version_num\", selectedVersion ]);\n\tconst versionId = _.get( version, \"id\" );\n\tconst body = isTruncated ? _.truncate( _.get( version, \"body\" ), { lenght: 100 }) : _.get( version, \"body\" );\n    \n\t// eslint-disable-next-line\n\tuseEffect(() => { if ( selected ) onSelect( versionId );}, [ versionId ]);\n\t\n\tlet colourProps;\n\tif ( selected ) {\n\t\tcolourProps = { color: \"white\", background: \"#B7D4EF\" };\n\t} else if ( match === matchSize ) {\n\t\tcolourProps = { background: \"white\" };\n\t} else {\n\t\tcolourProps = { background: \"#66788A\" };\n\t}\n\n\tconst _handleTruncateClick = e => {\n\t\te.preventDefault();\n\t\tsetIsTruncated( !isTruncated );\n\t};\n    \n\tconst _handleSelectClick = () => {\n\t\tif ( selected ) { \n\t\t\tonSelect( \"\" );\n\t\t} else {\n\t\t\tonSelect( versionId );\n\t\t}\n\t};\n\t\n\treturn (\n\t\t<Pane display=\"flex\" flexDirection=\"row\" minHeight={ 32 } marginBottom={ 16 }>\n\t\t\t<Pane display=\"flex\">\n\t\t\t\t<Select onChange={ e => setSelectedVersion( Number( e.target.value )) } defaultValue={ selectedVersion }>\n\t\t\t\t\t{ selectOptions && _.map( selectOptions, ({ value, label }) => <option key={ value } value={ value } >{ label }</option> )}\n\t\t\t\t</Select> \n\t\t\t\t<IconButton icon={ isTruncated ? \"expand-all\" : \"collapse-all\" } iconSize={ 10 } appearance=\"minimal\" onClick={ _handleTruncateClick }/>\n\t\t\t</Pane>\n\t\t\t<Pane { ...colourProps } elevation={ 1 } display=\"flex\" flex={ 1 } onClick={ _handleSelectClick } paddingLeft={ 16 } paddingRight={ 16 } paddingBottom={ isTruncated ? 0 : 16 } paddingTop={ isTruncated ? 0 : 16 }>\n\t\t\t\t<Pane display=\"flex\" alignItems=\"center\">\n\t\t\t\t\t<Heading size={ 300 } marginRight={ 16 }>{ title }</Heading>\n\t\t\t\t</Pane>\n\t\t\t\t<Pane flex={ 1 } display=\"flex\" flexDirection=\"column\" justifyContent=\"center\">\n\t\t\t\t\t{ body && _.map( body.split( \"\\n\" ), ( line, i ) => line ? <Text key={ i }>{ line }</Text> : <br key={ i } /> )}\n\t\t\t\t</Pane>\n\t\t\t</Pane>\n\t\t</Pane>\n\n\t);\n};\nSearchRow.propTypes = {\n\tworkout: PropTypes.object,\n\tmatchSize: PropTypes.number,\n\tonSelect: PropTypes.func,\n\tselected: PropTypes.bool,\n};\n","\n//\n// Adultletics Admin / Views / Panel / Panels / Index \n//\n\nimport SignIn from \"./auth/sign-in.js\";\nimport DrillsAdd from \"./drills/add\";\nimport DrillsEdit from \"./drills/edit\";\nimport DailyChallengesAdd from \"./daily-challenges/add\";\nimport DailyChallengesEdit from \"./daily-challenges/edit\";\nimport WorkoutsAdd from \"./workouts/add\";\nimport WorkoutsVersionAdd from \"./workouts/addVersion\";\nimport WorkoutsEdit from \"./workouts/edit\";\nimport WeeksAdd from \"./weeks/add\";\nimport WeeksDayWorkoutUpdate from \"./weeks/update-workout\";\nimport WeeksViewWorkoutVersion from \"./weeks/view-workout-version\";\n\nexport default {\n\t\"auth/sign-in\": SignIn,\n\t\"drills/add\": DrillsAdd,\n\t\"drills/edit\": DrillsEdit,\n\t\"daily-challenges/add\": DailyChallengesAdd,\n\t\"daily-challenges/edit\": DailyChallengesEdit,\n\t\"workouts/add\": WorkoutsAdd,\n\t\"workouts/add-version\": WorkoutsVersionAdd,\n\t\"workouts/edit\": WorkoutsEdit,\n\t\"weeks/add\": WeeksAdd,\n\t\"weeks/update-workout\": WeeksDayWorkoutUpdate,\n\t\"weeks/view-workout-version\": WeeksViewWorkoutVersion,\n};\n\nexport { Services, Queries, constants, Loading } from \"../../../views/index\";\n","\n// deps\nimport React, { useContext, useState } from \"react\";\nimport { TextInputField, Button } from \"evergreen-ui\";\nimport { Formik } from \"formik\";\n\n// app\nimport { Services } from \"../index\";\n\n//\n// Adultletics Admin / Views / Panel / Panels / Auth / Sign In\n//\n\n\nexport default function SignInPanel () {\n\tconst { isAuthenticating, signIn } = useContext( Services.Auth );\n\tconst { closePanel } = useContext( Services.UI );\n\tconst [ errors, setErrors ] = useState( null );\n\n\treturn (\n\t\t<Formik\n\t\t\tinitialValues={{}}\n\t\t\tonSubmit={ async ({ email, password }) => {\n\t\t\t\tsetErrors( null );\n\t\t\t\ttry {\n\t\t\t\t\tawait signIn( email, password );\n\t\t\t\t\tclosePanel();\n\t\t\t\t} catch ( error ) {\n\t\t\t\t\tconsole.error( error );\n\t\t\t\t\tsetErrors( error.message );\n\t\t\t\t}\n\t\t\t}}\n\t\t>{\n\t\t\t\t({ values, handleChange, handleSubmit, isSubmitting }) => {\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<form>\n\t\t\t\t\t\t\t<TextInputField\n\t\t\t\t\t\t\t\tlabel=\"Email\"\n\t\t\t\t\t\t\t\ttype=\"email\"\n\t\t\t\t\t\t\t\tname=\"email\"\n\t\t\t\t\t\t\t\tonChange={ handleChange }\n\t\t\t\t\t\t\t\tautoFocus\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t<TextInputField\n\t\t\t\t\t\t\t\tlabel=\"Password\"\n\t\t\t\t\t\t\t\ttype=\"password\"\n\t\t\t\t\t\t\t\tname=\"password\"\n\t\t\t\t\t\t\t\tonChange={ handleChange }\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t<Button isLoading={ isAuthenticating || isSubmitting } disabled={ !values.email || !values.password } onClick={ handleSubmit }>Log In</Button>\n\t\t\t\t\t\t\t{ errors && <p>{ errors }</p>}\n\t\t\t\t\t\t</form> );\n\t\t\t\t}}\n\t\t</Formik>\n\t);\n}\n","\n// deps\nimport React, { useContext, useState } from \"react\";\nimport { Pane, Heading, TextInputField, Button, Text, Textarea, FormField } from \"evergreen-ui\";\nimport { Formik } from \"formik\";\nimport { useMutation } from \"@apollo/react-hooks\";\nimport _ from \"lodash\";\nimport { useHistory } from \"react-router-dom\";\n\n// app\nimport { Services, Queries } from \"../index\";\n\n//\n// Adultletics Admin / Views / Panel / Panels / Drills / Add\n//\n\n\nexport default function AddDrillPanel () {\n\tconst [ insertDrill ] = useMutation( Queries.drills.add, { refetchQueries: [{ query: Queries.drills.getAll }], awaitRefetchQueries: true }); \n\tconst { closePanel } = useContext( Services.UI );\n\tconst [ errors, setErrors ] = useState( null );\n\tconst history = useHistory();\n\n\treturn ( <>\n\t\t<Pane marginBottom={ 56 }>\n\t\t\t<Heading size={ 600 }>Adding a new drill</Heading>\n\t\t</Pane>\n\t\t<Formik\n\t\t\tinitialValues={{ description: \"\" }}\n\t\t\tonSubmit={ async data => {\n\t\t\t\tsetErrors( null );\n\t\t\t\ttry {\n\t\t\t\t\tconst res = await insertDrill({ variables: { objects: [ data ]}});\n\t\t\t\t\tclosePanel();\n\t\t\t\t\tconst id = _.get( res, \"data.insert_drills.returning[0].id\" );\n\t\t\t\t\thistory.push( `/admin/drills/${ id }` );\n\t\t\t\t} catch ( error ) {\n\t\t\t\t\tconsole.error( error );\n\t\t\t\t\tsetErrors( error.message );\n\t\t\t\t}\n\t\t\t}}\n\t\t>{\n\t\t\t\t({ values, dirty, handleChange, handleSubmit, isSubmitting }) => {\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t<form>\n\t\t\t\t\t\t\t\t<TextInputField\n\t\t\t\t\t\t\t\t\tlabel=\"Title\"\n\t\t\t\t\t\t\t\t\tname=\"title\"\n\t\t\t\t\t\t\t\t\tonChange={ handleChange }\n\t\t\t\t\t\t\t\t\tautoFocus\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t<TextInputField\n\t\t\t\t\t\t\t\t\tlabel=\"Url\"\n\t\t\t\t\t\t\t\t\tname=\"url\"\n\t\t\t\t\t\t\t\t\tvalue={ values.url }\n\t\t\t\t\t\t\t\t\tplaceholder=\"https://youtu.be/nPMB8PZE9F8\"\n\t\t\t\t\t\t\t\t\tonChange={ handleChange }\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t<FormField label=\"Workout Description\" marginBottom={ 16 }>\n\t\t\t\t\t\t\t\t\t<Textarea\n\t\t\t\t\t\t\t\t\t\tname=\"description\"\n\t\t\t\t\t\t\t\t\t\tonChange={ handleChange }\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</FormField>\n\t\t\t\t\t\t\t\t<Button iconBefore={ isSubmitting ? \"\" : \"tick\"} isLoading={ isSubmitting } disabled={ !dirty || !values.title || !values.url } onClick={ handleSubmit }>Add</Button>\n\t\t\t\t\t\t\t\t{ errors && <p>{ errors }</p>}\n\t\t\t\t\t\t\t</form> \n\t\t\t\t\t\t\t<Pane marginTop={ 24 }>\n\t\t\t\t\t\t\t\t<Text>To find embed URL: go to the YouTube page, click on Share just below the video display, click on Embed in the pop-up, then select \"Enable privacy-enhanced mode\" and finally copy the quoted part of the text following \"src=\" in the text to the right, should look something like \"https://www.youtube-nocookie.com/embed/nPMB8PZE9F8\"</Text>\n\t\t\t\t\t\t\t</Pane>\n\t\t\t\t\t\t</>\n\t\t\t\t\t);\n\t\t\t\t}}\n\t\t</Formik>\n\t</> );\n}\n","\n// deps\nimport React, { useContext, useState } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { Pane, Heading, TextInputField, Button, Text, Textarea, FormField } from \"evergreen-ui\";\nimport { Formik } from \"formik\";\nimport { useQuery, useMutation } from \"@apollo/react-hooks\";\nimport _ from \"lodash\";\n\n// app\nimport { Services, Queries } from \"../index\";\n\n//\n// Adultletics Admin / Views / Panel / Panels / Drills / Edit\n//\n\n\nexport default function EditDrillPanel ({ props }) {\n\tconst { id } = props;\n\tconst { data, loading } = useQuery( Queries.drills.getOne, { variables: { id }});\n\tconst [ updateDrill ] = useMutation( Queries.drills.update, { refetchQueries: [{ query: Queries.drills.getOne, variables: { id }}], awaitRefetchQueries: true }); \n\tconst { closePanel } = useContext( Services.UI );\n\tconst [ errors, setErrors ] = useState( null );\n\n\tif ( loading ) return null;\n    \n\tconst drill = _.get( data, \"drills_by_pk\" );\n\tconst title = _.get( drill, \"title\" );\n\tconst url = _.get( drill, \"url\" );\n\tconst embed_url = _.get( drill, \"embed_url\" );\n\tconst description = _.get( drill, \"description\" );\n    \n\treturn ( <>\n\t\t<Pane marginBottom={ 56 }>\n\t\t\t<Heading size={ 600 }>Editing challenge: { title }</Heading>\n\t\t</Pane>\n\t\t<Formik\n\t\t\tinitialValues={{ title, url, embed_url, description: _.isNull( description ) ? \"\" : description }}\n\t\t\tonSubmit={ async data => {\n\t\t\t\tsetErrors( null );\n\t\t\t\ttry {\n\t\t\t\t\tawait updateDrill({ variables: { id, data }});\n\t\t\t\t\tclosePanel();\n\t\t\t\t} catch ( error ) {\n\t\t\t\t\tconsole.error( error );\n\t\t\t\t\tsetErrors( error.message );\n\t\t\t\t}\n\t\t\t}}\n\t\t\tenableReinitialize={ true }\n\t\t>{\n\t\t\t\t({ values, dirty, handleChange, handleSubmit, isSubmitting }) => {\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t<form>\n\t\t\t\t\t\t\t\t<TextInputField\n\t\t\t\t\t\t\t\t\tlabel=\"Title\"\n\t\t\t\t\t\t\t\t\tname=\"title\"\n\t\t\t\t\t\t\t\t\tvalue={ values.title }\n\t\t\t\t\t\t\t\t\tonChange={ handleChange }\n\t\t\t\t\t\t\t\t\tautoFocus\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t<TextInputField\n\t\t\t\t\t\t\t\t\tlabel=\"Url\"\n\t\t\t\t\t\t\t\t\tname=\"url\"\n\t\t\t\t\t\t\t\t\tvalue={ values.url }\n\t\t\t\t\t\t\t\t\tplaceholder=\"https://youtu.be/nPMB8PZE9F8\"\n\t\t\t\t\t\t\t\t\tonChange={ handleChange }\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t<FormField label=\"Workout Description\" marginBottom={ 16 }>\n\t\t\t\t\t\t\t\t\t<Textarea\n\t\t\t\t\t\t\t\t\t\tname=\"description\"\n\t\t\t\t\t\t\t\t\t\tonChange={ handleChange }\n\t\t\t\t\t\t\t\t\t\tvalue={ values.description }\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</FormField>\n\t\t\t\t\t\t\t\t<Button iconBefore={ isSubmitting ? \"\" : \"tick\"} isLoading={ isSubmitting } disabled={ !dirty || !values.title || !values.url } onClick={ handleSubmit }>Update</Button>\n\t\t\t\t\t\t\t\t{ errors && <p>{ errors }</p>}\n\t\t\t\t\t\t\t</form> \n\t\t\t\t\t\t\t<Pane marginTop={ 24 }>\n\t\t\t\t\t\t\t\t<Text>To find embed URL: go to the YouTube page, click on Share just below the video display, click on Embed in the pop-up, then select \"Enable privacy-enhanced mode\" and finally copy the quoted part of the text following \"src=\" in the text to the right, should look something like \"https://www.youtube-nocookie.com/embed/nPMB8PZE9F8\"</Text>\n\t\t\t\t\t\t\t</Pane>\n\t\t\t\t\t\t</>\n\t\t\t\t\t);\n\t\t\t\t}}\n\t\t</Formik>\n\t</> );\n}\nEditDrillPanel.propTypes = {\n\tprops: PropTypes.object,\n\tid: PropTypes.string,\n};\n","\n// deps\nimport React, { useContext, useState } from \"react\";\nimport { Pane, Heading, TextInputField, Button, Textarea, FormField } from \"evergreen-ui\";\nimport { Formik } from \"formik\";\nimport { useMutation } from \"@apollo/react-hooks\";\nimport { useHistory } from \"react-router-dom\";\nimport _ from \"lodash\";\n\n// app\nimport { Services, Queries } from \"../index\";\n\n//\n// Adultletics Admin / Views / Panel / Panels / Challenges / Add\n//\n\n\nexport default function AddDailyChallengePanel () {\n\tconst [ insertChallenge ] = useMutation( Queries.dailyChallenges.add, { refetchQueries: [{ query: Queries.dailyChallenges.getAll }], awaitRefetchQueries: true }); \n\tconst { closePanel } = useContext( Services.UI );\n\tconst [ errors, setErrors ] = useState( null );\n\tconst history = useHistory();\n\n\treturn ( <>\n\t\t<Pane marginBottom={ 56 }>\n\t\t\t<Heading size={ 600 }>Adding a new daily challenge</Heading>\n\t\t</Pane>\n\t\t<Formik\n\t\t\tinitialValues={{ description: \"\" }}\n\t\t\tonSubmit={ async data => {\n\t\t\t\tsetErrors( null );\n\t\t\t\ttry {\n\t\t\t\t\tconst res = await insertChallenge({ variables: { objects: [ data ]}});\n\t\t\t\t\tclosePanel();\n\t\t\t\t\tconst id = _.get( res, \"data.insert_challenges.returning[0].id\" );\n\t\t\t\t\thistory.push( `/admin/challenges/${ id }` );\n\t\t\t\t} catch ( error ) {\n\t\t\t\t\tconsole.error( error );\n\t\t\t\t\tsetErrors( error.message );\n\t\t\t\t}\n\t\t\t}}\n\t\t>{\n\t\t\t\t({ values, dirty, handleChange, handleSubmit, isSubmitting }) => {\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t<form>\n\t\t\t\t\t\t\t\t<TextInputField\n\t\t\t\t\t\t\t\t\tlabel=\"Title\"\n\t\t\t\t\t\t\t\t\tname=\"title\"\n\t\t\t\t\t\t\t\t\tonChange={ handleChange }\n\t\t\t\t\t\t\t\t\tautoFocus\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t<FormField label=\"Description\" marginBottom={ 16 }>\n\t\t\t\t\t\t\t\t\t<Textarea\n\t\t\t\t\t\t\t\t\t\tname=\"description\"\n\t\t\t\t\t\t\t\t\t\tonChange={ handleChange }\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</FormField>\n\t\t\t\t\t\t\t\t<Button iconBefore={ isSubmitting ? \"\" : \"tick\"} isLoading={ isSubmitting } disabled={ !dirty || !values.title || !values.description } onClick={ handleSubmit }>Add</Button>\n\t\t\t\t\t\t\t\t{ errors && <p>{ errors }</p>}\n\t\t\t\t\t\t\t</form> \n\t\t\t\t\t\t</>\n\t\t\t\t\t);\n\t\t\t\t}}\n\t\t</Formik>\n\t</> );\n}\n","\n// deps\nimport React, { useContext, useState } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { Pane, Heading, TextInputField, Button, Textarea, FormField } from \"evergreen-ui\";\nimport { Formik } from \"formik\";\nimport { useQuery, useMutation } from \"@apollo/react-hooks\";\nimport _ from \"lodash\";\n\n// app\nimport { Services, Queries } from \"../index\";\n\n//\n// Adultletics Admin / Views / Panel / Panels / Challenges / Edit\n//\n\n\nexport default function EditDailyChallengePanel ({ props }) {\n\tconst { id } = props;\n\tconst { data, loading } = useQuery( Queries.dailyChallenges.getOne, { variables: { id }});\n\tconst [ updateChallenge ] = useMutation( Queries.dailyChallenges.update, { refetchQueries: [{ query: Queries.dailyChallenges.getOne, variables: { id }}], awaitRefetchQueries: true }); \n\tconst { closePanel } = useContext( Services.UI );\n\tconst [ errors, setErrors ] = useState( null );\n\n\tif ( loading ) return null;\n    \n\tconst challenge = _.get( data, \"daily_challenges_by_pk\" );\n\tconst title = _.get( challenge, \"title\" );\n\tconst description = _.get( challenge, \"description\", \"\" );\n    \n\treturn ( <>\n\t\t<Pane marginBottom={ 56 }>\n\t\t\t<Heading size={ 600 }>Editing challenge: { title }</Heading>\n\t\t</Pane>\n\t\t<Formik\n\t\t\tinitialValues={{ title, description: _.isNull( description ) ? \"\" : description }}\n\t\t\tonSubmit={ async data => {\n\t\t\t\tsetErrors( null );\n\t\t\t\ttry {\n\t\t\t\t\tawait updateChallenge({ variables: { id, data }});\n\t\t\t\t\tclosePanel();\n\t\t\t\t} catch ( error ) {\n\t\t\t\t\tconsole.error( error );\n\t\t\t\t\tsetErrors( error.message );\n\t\t\t\t}\n\t\t\t}}\n\t\t\tenableReinitialize={ true }\n\t\t>{\n\t\t\t\t({ values, dirty, handleChange, handleSubmit, isSubmitting }) => {\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t<form>\n\t\t\t\t\t\t\t\t<TextInputField\n\t\t\t\t\t\t\t\t\tlabel=\"Title\"\n\t\t\t\t\t\t\t\t\tname=\"title\"\n\t\t\t\t\t\t\t\t\tvalue={ values.title }\n\t\t\t\t\t\t\t\t\tonChange={ handleChange }\n\t\t\t\t\t\t\t\t\tautoFocus\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t<FormField label=\"Description\" marginBottom={ 16 }>\n\t\t\t\t\t\t\t\t\t<Textarea\n\t\t\t\t\t\t\t\t\t\tname=\"description\"\n\t\t\t\t\t\t\t\t\t\tonChange={ handleChange }\n\t\t\t\t\t\t\t\t\t\tvalue={ values.description }\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</FormField>\n\t\t\t\t\t\t\t\t<Button iconBefore={ isSubmitting ? \"\" : \"tick\"} isLoading={ isSubmitting } disabled={ !dirty || !values.title || !values.description } onClick={ handleSubmit }>Update</Button>\n\t\t\t\t\t\t\t\t{ errors && <p>{ errors }</p>}\n\t\t\t\t\t\t\t</form> \n\t\t\t\t\t\t</>\n\t\t\t\t\t);\n\t\t\t\t}}\n\t\t</Formik>\n\t</> );\n}\nEditDailyChallengePanel.propTypes = {\n\tprops: PropTypes.object,\n\tid: PropTypes.string,\n};\n","\n// deps\nimport React, { useContext, useState } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { Radio, Select, TextInputField, Textarea, FormField, Button, Pane, Heading, Text, IconButton, Paragraph } from \"evergreen-ui\";\nimport { Formik } from \"formik\";\nimport { useMutation, useQuery } from \"@apollo/react-hooks\";\nimport _ from \"lodash\";\nimport { useHistory } from \"react-router-dom\";\n\n// app\nimport { Services, Queries, constants, Loading } from \"../index\";\n\n//\n// Adultletics Admin / Views / Panel / Panels / Workouts / Add\n//\n\n\nexport default function AddWorkoutPanel ({ props }) {\n\tconst { emit } = props;\n\tconst { data: drillsData, loading: drillsLoading } = useQuery( Queries.drills.getAll );\n\tconst [ addVersion ] = useMutation( Queries.workouts.addVersion, { refetchQueries: [{ query: Queries.workouts.getAll }], awaitRefetchQueries: true }); \n\tconst { authUser } = useContext( Services.Auth );\n\tconst { closePanel } = useContext( Services.UI );\n\tconst [ errors, setErrors ] = useState( null );\n\tconst [ selectedDrills, setSelectedDrills ] = useState([]);\n\tconst { intensityOptions, workoutTypes } = constants;\n\tconst history = useHistory();\n    \n\tconst allDrills = _.get( drillsData, \"drills\" );\n\tconst unselectedDrills = _.filter( allDrills, drill => !_.some( selectedDrills, [ \"id\", drill.id ]));\n\n\tif ( drillsLoading ) return <Loading />;\n\n\treturn (\n\t\t<>\n\t\t\t<Pane marginBottom={ 56 }>\n\t\t\t\t<Heading size={ 600 }>Adding a new workout</Heading>\n\t\t\t</Pane>\n\t\t\t<Formik\n\t\t\t\tinitialValues={{ running_km: 0, running_minutes: 0, intensity: \"3\" }}\n\t\t\t\tonSubmit={ async ({ title, body, stats, intensity, type }) => {\n\t\t\t\t\tsetErrors( null );\n\t\t\t\t\ttry {\n\t\t\t\t\t\tconst drills_insert_data = _.map( selectedDrills, ({ id }) => ({ _drill: id }));\n\t\t\t\t\t\tconst res = await addVersion({ variables: { objects: [{\n\t\t\t\t\t\t\tversion_num: 1,\n\t\t\t\t\t\t\t_owner: authUser.id,\n\t\t\t\t\t\t\tbody,\n\t\t\t\t\t\t\tworkout: {\n\t\t\t\t\t\t\t\tdata: {\n\t\t\t\t\t\t\t\t\ttitle, type,\n\t\t\t\t\t\t\t\t\tintensity,\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tstats: {\n\t\t\t\t\t\t\t\tdata: stats ? stats : {},\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tdrills: {\n\t\t\t\t\t\t\t\tdata: drills_insert_data,\n\t\t\t\t\t\t\t},\n\n\t\t\t\t\t\t}]}});\n\t\t\t\t\t\tclosePanel();\n\t\t\t\t\t\tconst versionId = _.get( res, \"data.insert_workouts_versions.returning[0].id\" );\n\t\t\t\t\t\tconst workoutId = _.get( res, \"data.insert_workouts_versions.returning[0].workout.id\" );\n\t\t\t\t\t\tif ( emit ) emit( versionId );\n\t\t\t\t\t\tif ( !emit ) history.push( `/admin/workouts/${ workoutId }` );\n\t\t\t\t\t} catch ( error ) {\n\t\t\t\t\t\tconsole.error( error );\n\t\t\t\t\t\tsetErrors( error.message );\n\t\t\t\t\t}\n\t\t\t\t}}\n\t\t\t>{\n\t\t\t\t\t({ values, dirty, handleChange, handleSubmit, isSubmitting, setFieldValue }) => {\n\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t<form>\n\t\t\t\t\t\t\t\t\t<TextInputField\n\t\t\t\t\t\t\t\t\t\tlabel=\"Workout Title\"\n\t\t\t\t\t\t\t\t\t\tname=\"title\"\n\t\t\t\t\t\t\t\t\t\tonChange={ handleChange }\n\t\t\t\t\t\t\t\t\t\tautoFocus\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t<FormField label=\"Workout Intensity\" onChange={ e => setFieldValue( \"intensity\", e.target.value ) } marginBottom={ 16 }>\n\t\t\t\t\t\t\t\t\t\t<Pane display=\"flex\" flexDirection=\"row\" justifyContent=\"space-between\">\n\t\t\t\t\t\t\t\t\t\t\t{ _.map( intensityOptions, ({ label, value }) => (\n\t\t\t\t\t\t\t\t\t\t\t\t<Radio key={ value } name=\"intensity\" value={ value } label={ label } checked={ value === values.intensity } />\n\t\t\t\t\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t\t\t\t\t</Pane>\n\t\t\t\t\t\t\t\t\t</FormField>\n\t\t\t\t\t\t\t\t\t<FormField label=\"Workout Type\" marginBottom={ 16 }>\n\t\t\t\t\t\t\t\t\t\t<Select name=\"type\" value={ values.type } onChange={ handleChange } height={ 32 } >\n\t\t\t\t\t\t\t\t\t\t\t<option key=\"empty\" value=\"\">Please select an option...</option>\n\t\t\t\t\t\t\t\t\t\t\t{ workoutTypes && _.map( workoutTypes, ({ value, label }) => ( <option key={ value } value={ value }>{ label }</option> ))}\n\t\t\t\t\t\t\t\t\t\t</Select>\n\t\t\t\t\t\t\t\t\t</FormField>\n\t\t\t\t\t\t\t\t\t<FormField label=\"Add Drills to Workout\" marginBottom={ 16 }>\n\t\t\t\t\t\t\t\t\t\t<Pane marginBottom={ 8 } display=\"flex\" justifyContent=\"space-between\">\n\t\t\t\t\t\t\t\t\t\t\t<Select name=\"drill\" value={ values.drill } onChange={ handleChange } height={ 32 }>\n\t\t\t\t\t\t\t\t\t\t\t\t<option key=\"empty\" value=\"\">Please select an option...</option>\n\t\t\t\t\t\t\t\t\t\t\t\t{ unselectedDrills && _.map( unselectedDrills, ({ id, title }) => ( <option key={ id } value={ id }>{ title }</option> ))}\n\t\t\t\t\t\t\t\t\t\t\t</Select>\n\t\t\t\t\t\t\t\t\t\t\t<Button \n\t\t\t\t\t\t\t\t\t\t\t\ticonBefore=\"tick\"\n\t\t\t\t\t\t\t\t\t\t\t\tdisabled={ !values.drill } \n\t\t\t\t\t\t\t\t\t\t\t\tonClick={ e => {\n\t\t\t\t\t\t\t\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t\t\t\t\t\t\t\t\tsetSelectedDrills([ ...selectedDrills, _.find( allDrills, [ \"id\", values.drill ]) ]); \n\t\t\t\t\t\t\t\t\t\t\t\t}} \n\t\t\t\t\t\t\t\t\t\t\t\tmarginRight={ 8 } \n\t\t\t\t\t\t\t\t\t\t\t\tmarginLeft={ 8 }>Attach drill\n\t\t\t\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t\t\t\t</Pane>\n\t\t\t\t\t\t\t\t\t\t<Pane>\n\t\t\t\t\t\t\t\t\t\t\t{ errors && <p>{ errors }</p>}\n\t\t\t\t\t\t\t\t\t\t</Pane>\n\t\t\t\t\t\t\t\t\t</FormField>\n\t\t\t\t\t\t\t\t\t<FormField label=\"Selected Drills\" marginBottom={ 16 }>\n\t\t\t\t\t\t\t\t\t\t<Pane>\n\t\t\t\t\t\t\t\t\t\t\t{ !_.isEmpty( selectedDrills ) ? _.map( selectedDrills, ({ id, title }) => (\n\t\t\t\t\t\t\t\t\t\t\t\t<Pane display=\"flex\" flexDirection=\"row\" elevation={ 1 } height={ 32 } alignItems=\"center\" background=\"white\" marginBottom={ 16 } key={ id } paddingLeft={ 16 } paddingRight={ 8 }>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Text flex={ 1 }>{ title }</Text>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<IconButton icon=\"small-cross\" intent=\"danger\" appearance=\"minimal\" onClick={ e => {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tsetSelectedDrills( _.filter( selectedDrills, drill => drill.id !== id ));\n\t\t\t\t\t\t\t\t\t\t\t\t\t}}/> \n\t\t\t\t\t\t\t\t\t\t\t\t</Pane> )) : <Paragraph marginBottom={ 16 } >No drills selected</Paragraph>}\n\t\t\t\t\t\t\t\t\t\t</Pane>\n\t\t\t\t\t\t\t\t\t</FormField>\n\t\t\t\t\t\t\t\t\t<FormField label=\"Workout Description\" marginBottom={ 16 }>\n\t\t\t\t\t\t\t\t\t\t<Textarea\n\t\t\t\t\t\t\t\t\t\t\tname=\"body\"\n\t\t\t\t\t\t\t\t\t\t\tonChange={ handleChange }\n\t\t\t\t\t\t\t\t\t\t\trows={ 24 }\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t</FormField>\n\t\t\t\t\t\t\t\t\t<FormField label=\"Stats\" marginBottom={ 16 }>\n\t\t\t\t\t\t\t\t\t\t<table className=\"stats-input-table\">\n\t\t\t\t\t\t\t\t\t\t\t<thead>\n\t\t\t\t\t\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<th></th>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<th colSpan={ 2 }><Heading size={ 200 }>5/10km</Heading></th>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<th colSpan={ 2 }><Heading size={ 200 }>half/ultra</Heading></th>\n\t\t\t\t\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t\t\t\t</thead>\n\t\t\t\t\t\t\t\t\t\t\t<tbody>\n\t\t\t\t\t\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<td><Heading size={ 200 }>Beginner</Heading></td>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<td><TextInputField\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tlabel=\"km\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tname=\"stats.running_km_beginner_short\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\ttype=\"number\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tonChange={ handleChange }\n\t\t\t\t\t\t\t\t\t\t\t\t\t/></td>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<td><TextInputField\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tlabel=\"mins\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tname=\"stats.running_minutes_beginner_short\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\ttype=\"number\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tonChange={ handleChange }\n\t\t\t\t\t\t\t\t\t\t\t\t\t/></td>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<td><TextInputField\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tlabel=\"km\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tname=\"stats.running_km_beginner_long\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\ttype=\"number\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tonChange={ handleChange }\n\t\t\t\t\t\t\t\t\t\t\t\t\t/></td>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<td><TextInputField\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tlabel=\"mins\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tname=\"stats.running_minutes_beginner_long\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\ttype=\"number\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tonChange={ handleChange }\n\t\t\t\t\t\t\t\t\t\t\t\t\t/></td>\n\t\t\t\t\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<td><Heading size={ 200 }>Intermediate</Heading></td>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<td><TextInputField\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tlabel=\"km\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tname=\"stats.running_km_intermediate_short\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\ttype=\"number\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tonChange={ handleChange }\n\t\t\t\t\t\t\t\t\t\t\t\t\t/></td>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<td><TextInputField\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tlabel=\"mins\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tname=\"stats.running_minutes_intermediate_short\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\ttype=\"number\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tonChange={ handleChange }\n\t\t\t\t\t\t\t\t\t\t\t\t\t/></td>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<td><TextInputField\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tlabel=\"km\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tname=\"stats.running_km_intermediate_long\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\ttype=\"number\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tonChange={ handleChange }\n\t\t\t\t\t\t\t\t\t\t\t\t\t/></td>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<td><TextInputField\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tlabel=\"mins\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tname=\"stats.running_minutes_intermediate_long\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\ttype=\"number\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tonChange={ handleChange }\n\t\t\t\t\t\t\t\t\t\t\t\t\t/></td>\n\t\t\t\t\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<td><Heading size={ 200 }>Advanced</Heading></td>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<td><TextInputField\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tlabel=\"km\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tname=\"stats.running_km_advanced_short\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\ttype=\"number\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tonChange={ handleChange }\n\t\t\t\t\t\t\t\t\t\t\t\t\t/></td>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<td><TextInputField\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tlabel=\"mins\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tname=\"stats.running_minutes_advanced_short\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\ttype=\"number\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tonChange={ handleChange }\n\t\t\t\t\t\t\t\t\t\t\t\t\t/></td>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<td><TextInputField\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tlabel=\"km\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tname=\"stats.running_km_advanced_long\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\ttype=\"number\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tonChange={ handleChange }\n\t\t\t\t\t\t\t\t\t\t\t\t\t/></td>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<td><TextInputField\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tlabel=\"mins\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tname=\"stats.running_minutes_advanced_long\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\ttype=\"number\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tonChange={ handleChange }\n\t\t\t\t\t\t\t\t\t\t\t\t\t/></td>\n\t\t\t\t\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t\t\t\t</tbody>\n\t\t\t\t\t\t\t\t\t\t</table>\n\t\t\t\t\t\t\t\t\t</FormField>\n\t\t\t\t\t\t\t\t\t<Button iconBefore={ isSubmitting ? \"\" : \"tick\"} isLoading={ isSubmitting } disabled={ !dirty || !values.title } onClick={ handleSubmit }>Add</Button>\n\t\t\t\t\t\t\t\t\t{ errors && <p>{ errors }</p>}\n\t\t\t\t\t\t\t\t</form> \n\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t);\n\t\t\t\t\t}}\n\t\t\t</Formik>\n\t\t</> );\n}\nAddWorkoutPanel.propTypes = {\n\tprops: PropTypes.object,\n\temit: PropTypes.func,\n};","\n// deps\nimport React, { useContext, useState, useEffect } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { Heading, Pane, TextInputField, Textarea, FormField, Button,Text, Select, IconButton, Paragraph } from \"evergreen-ui\";\nimport { Formik } from \"formik\";\nimport { useQuery, useMutation } from \"@apollo/react-hooks\";\nimport _ from \"lodash\";\n\n// app\nimport { Services, Queries, Loading } from \"../index\";\n\n//\n// Adultletics Admin / Views / Panel / Panels / Workouts / Add Version\n//\n\n\nexport default function AddWorkoutVersionPanel ({ props }) {\n\tconst { id, workoutId, emit } = props;\n\tconst { data: workoutData, loading: workoutLoading } = useQuery( Queries.workouts.getOne, { variables: { id: workoutId }});\n\tconst { data: drillsData, loading: drillsLoading } = useQuery( Queries.drills.getAll );\n\tconst { data, loading } = useQuery( Queries.workouts.getVersion, { variables: { id }});\n\tconst [ addVersion ] = useMutation( Queries.workouts.addVersion ); \n\tconst [ selectedDrills, setSelectedDrills ] = useState([]);\n\tconst { closePanel } = useContext( Services.UI );\n\tconst { authUser } = useContext( Services.Auth );\n\tconst [ errors, setErrors ] = useState( null );\n\n\tconst version = _.get( data, \"workouts_versions_by_pk\" );\n\tuseEffect(() => setSelectedDrills( _.map( _.get( version, \"drills\", []), \"drill\" )), [ version ]);\n\n\tif ( loading || workoutLoading || drillsLoading ) return <Loading />;\n\n\tconst highestExistingVersion = _.reduce( _.get( workoutData, \"workouts_by_pk.versions\" ), ( total, curr ) => curr.version_num > total ? curr.version_num : total, 0 );\n\tconst newVersionNum = highestExistingVersion + 1;\n\n\tconst initialValues = {\n\t\tbody: _.get( version, \"body\" ),\n\t\trunning_km: _.get( version, \"stats.running_km\", 0 ),\n\t\trunning_minutes: _.get( version, \"stats.running_minutes\", 0 ),\n\t};\n    \n\tconst allDrills = _.get( drillsData, \"drills\" );\n\tconst unselectedDrills = _.filter( allDrills, drill => !_.some( selectedDrills, [ \"id\", drill.id ]));\n    \n\treturn ( <>\n\t\t<Pane marginBottom={ 56 }>\n\t\t\t<Heading size={ 600 }>Adding a new version of workout: { _.get( version, \"workout.title\", \"\" ) }</Heading>\n\t\t</Pane>\n\t\t<Formik\n\t\t\tinitialValues={{ ...initialValues }}\n\t\t\tonSubmit={ async ({ body, stats }) => {\n\t\t\t\tsetErrors( null );\n\t\t\t\ttry {\n\t\t\t\t\tconst drills_insert_data = _.map( selectedDrills, ({ id }) => ({ _drill: id }));\n\t\t\t\t\tconst res = await addVersion({ variables: { objects: [{\n\t\t\t\t\t\tbody, \n\t\t\t\t\t\tversion_num: newVersionNum,\n\t\t\t\t\t\t_workout: workoutId,\n\t\t\t\t\t\t_owner: authUser.id,\n\t\t\t\t\t\tstats: {\n\t\t\t\t\t\t\tdata: stats ? stats : {},\n\t\t\t\t\t\t},\n\t\t\t\t\t\tdrills: {\n\t\t\t\t\t\t\tdata: drills_insert_data,\n\t\t\t\t\t\t},\n\t\t\t\t\t}]}});\n\t\t\t\t\tclosePanel();\n\t\t\t\t\tconst id = _.get( res, \"data.insert_workouts_versions.returning[0].id\" );\n\t\t\t\t\tif ( emit ) emit( id );\n\t\t\t\t} catch ( error ) {\n\t\t\t\t\tconsole.error( error );\n\t\t\t\t\tsetErrors( error.message );\n\t\t\t\t}\n\t\t\t}}\n\t\t>{\n\t\t\t\t({ values, dirty, handleChange, handleSubmit, isSubmitting }) => {\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t<form>\n\t\t\t\t\t\t\t\t<FormField label=\"Workout Description\" marginBottom={ 8 }>\n\t\t\t\t\t\t\t\t\t<Textarea\n\t\t\t\t\t\t\t\t\t\tname=\"body\"\n\t\t\t\t\t\t\t\t\t\tvalue={ values.body }\n\t\t\t\t\t\t\t\t\t\tonChange={ handleChange }\n\t\t\t\t\t\t\t\t\t\trows={ 24 }\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</FormField>\n\t\t\t\t\t\t\t\t<FormField label=\"Add Drills\" marginBottom={ 16 }>\n\t\t\t\t\t\t\t\t\t<Pane marginBottom={ 8 } display=\"flex\" justifyContent=\"space-between\">\n\t\t\t\t\t\t\t\t\t\t<Select name=\"drill\" value={ values.drill } onChange={ handleChange } height={ 32 }>\n\t\t\t\t\t\t\t\t\t\t\t<option key=\"empty\" value=\"\">Please select an option...</option>\n\t\t\t\t\t\t\t\t\t\t\t{ unselectedDrills && _.map( unselectedDrills, ({ id, title }) => ( <option key={ id } value={ id }>{ title }</option> ))}\n\t\t\t\t\t\t\t\t\t\t</Select>\n\t\t\t\t\t\t\t\t\t\t<Button \n\t\t\t\t\t\t\t\t\t\t\ticonBefore=\"tick\"\n\t\t\t\t\t\t\t\t\t\t\tdisabled={ !values.drill } \n\t\t\t\t\t\t\t\t\t\t\tonClick={ e => {\n\t\t\t\t\t\t\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t\t\t\t\t\t\t\tsetSelectedDrills([ ...selectedDrills, _.find( allDrills, [ \"id\", values.drill ]) ]); \n\t\t\t\t\t\t\t\t\t\t\t}} \n\t\t\t\t\t\t\t\t\t\t\tmarginRight={ 8 } \n\t\t\t\t\t\t\t\t\t\t\tmarginLeft={ 8 }>Attach drill\n\t\t\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t\t\t</Pane>\n\t\t\t\t\t\t\t\t\t<Pane>\n\t\t\t\t\t\t\t\t\t\t{ errors && <p>{ errors }</p>}\n\t\t\t\t\t\t\t\t\t</Pane>\n\t\t\t\t\t\t\t\t</FormField>\n\t\t\t\t\t\t\t\t<FormField label=\"Selected drills\" marginBottom={ 16 }>\n\t\t\t\t\t\t\t\t\t<Pane>\n\t\t\t\t\t\t\t\t\t\t{ !_.isEmpty( selectedDrills ) ? _.map( selectedDrills, ({ id, title }) => (\n\t\t\t\t\t\t\t\t\t\t\t<Pane display=\"flex\" flexDirection=\"row\" elevation={ 1 } height={ 32 } alignItems=\"center\" background=\"white\" marginBottom={ 16 } key={ id } paddingLeft={ 16 } paddingRight={ 8 }>\n\t\t\t\t\t\t\t\t\t\t\t\t<Text flex={ 1 }>{ title }</Text>\n\t\t\t\t\t\t\t\t\t\t\t\t<IconButton icon=\"small-cross\" intent=\"danger\" appearance=\"minimal\" onClick={ e => {\n\t\t\t\t\t\t\t\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t\t\t\t\t\t\t\t\tsetSelectedDrills( _.filter( selectedDrills, drill => drill.id !== id ));\n\t\t\t\t\t\t\t\t\t\t\t\t}}/> \n\t\t\t\t\t\t\t\t\t\t\t</Pane> )) : <Paragraph marginBottom={ 16 } >No drills selected</Paragraph>}\n\t\t\t\t\t\t\t\t\t</Pane>\n\t\t\t\t\t\t\t\t</FormField>\n\t\t\t\t\t\t\t\t<FormField label=\"Stats\" marginBottom={ 16 }>\n\t\t\t\t\t\t\t\t\t<table className=\"stats-input-table\">\n\t\t\t\t\t\t\t\t\t\t<thead>\n\t\t\t\t\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t\t\t\t\t<th></th>\n\t\t\t\t\t\t\t\t\t\t\t\t<th colSpan={ 2 }><Heading size={ 200 }>5/10km</Heading></th>\n\t\t\t\t\t\t\t\t\t\t\t\t<th colSpan={ 2 }><Heading size={ 200 }>half/ultra</Heading></th>\n\t\t\t\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t\t\t</thead>\n\t\t\t\t\t\t\t\t\t\t<tbody>\n\t\t\t\t\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t\t\t\t\t<td><Heading size={ 200 }>Beginner</Heading></td>\n\t\t\t\t\t\t\t\t\t\t\t\t<td><TextInputField\n\t\t\t\t\t\t\t\t\t\t\t\t\tlabel=\"km\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tname=\"stats.running_km_beginner_short\"\n\t\t\t\t\t\t\t\t\t\t\t\t\ttype=\"number\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tonChange={ handleChange }\n\t\t\t\t\t\t\t\t\t\t\t\t/></td>\n\t\t\t\t\t\t\t\t\t\t\t\t<td><TextInputField\n\t\t\t\t\t\t\t\t\t\t\t\t\tlabel=\"mins\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tname=\"stats.running_minutes_beginner_short\"\n\t\t\t\t\t\t\t\t\t\t\t\t\ttype=\"number\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tonChange={ handleChange }\n\t\t\t\t\t\t\t\t\t\t\t\t/></td>\n\t\t\t\t\t\t\t\t\t\t\t\t<td><TextInputField\n\t\t\t\t\t\t\t\t\t\t\t\t\tlabel=\"km\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tname=\"stats.running_km_beginner_long\"\n\t\t\t\t\t\t\t\t\t\t\t\t\ttype=\"number\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tonChange={ handleChange }\n\t\t\t\t\t\t\t\t\t\t\t\t/></td>\n\t\t\t\t\t\t\t\t\t\t\t\t<td><TextInputField\n\t\t\t\t\t\t\t\t\t\t\t\t\tlabel=\"mins\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tname=\"stats.running_minutes_beginner_long\"\n\t\t\t\t\t\t\t\t\t\t\t\t\ttype=\"number\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tonChange={ handleChange }\n\t\t\t\t\t\t\t\t\t\t\t\t/></td>\n\t\t\t\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t\t\t\t\t<td><Heading size={ 200 }>Intermediate</Heading></td>\n\t\t\t\t\t\t\t\t\t\t\t\t<td><TextInputField\n\t\t\t\t\t\t\t\t\t\t\t\t\tlabel=\"km\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tname=\"stats.running_km_intermediate_short\"\n\t\t\t\t\t\t\t\t\t\t\t\t\ttype=\"number\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tonChange={ handleChange }\n\t\t\t\t\t\t\t\t\t\t\t\t/></td>\n\t\t\t\t\t\t\t\t\t\t\t\t<td><TextInputField\n\t\t\t\t\t\t\t\t\t\t\t\t\tlabel=\"mins\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tname=\"stats.running_minutes_intermediate_short\"\n\t\t\t\t\t\t\t\t\t\t\t\t\ttype=\"number\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tonChange={ handleChange }\n\t\t\t\t\t\t\t\t\t\t\t\t/></td>\n\t\t\t\t\t\t\t\t\t\t\t\t<td><TextInputField\n\t\t\t\t\t\t\t\t\t\t\t\t\tlabel=\"km\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tname=\"stats.running_km_intermediate_long\"\n\t\t\t\t\t\t\t\t\t\t\t\t\ttype=\"number\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tonChange={ handleChange }\n\t\t\t\t\t\t\t\t\t\t\t\t/></td>\n\t\t\t\t\t\t\t\t\t\t\t\t<td><TextInputField\n\t\t\t\t\t\t\t\t\t\t\t\t\tlabel=\"mins\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tname=\"stats.running_minutes_intermediate_long\"\n\t\t\t\t\t\t\t\t\t\t\t\t\ttype=\"number\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tonChange={ handleChange }\n\t\t\t\t\t\t\t\t\t\t\t\t/></td>\n\t\t\t\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t\t\t\t\t<td><Heading size={ 200 }>Advanced</Heading></td>\n\t\t\t\t\t\t\t\t\t\t\t\t<td><TextInputField\n\t\t\t\t\t\t\t\t\t\t\t\t\tlabel=\"km\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tname=\"stats.running_km_advanced_short\"\n\t\t\t\t\t\t\t\t\t\t\t\t\ttype=\"number\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tonChange={ handleChange }\n\t\t\t\t\t\t\t\t\t\t\t\t/></td>\n\t\t\t\t\t\t\t\t\t\t\t\t<td><TextInputField\n\t\t\t\t\t\t\t\t\t\t\t\t\tlabel=\"mins\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tname=\"stats.running_minutes_advanced_short\"\n\t\t\t\t\t\t\t\t\t\t\t\t\ttype=\"number\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tonChange={ handleChange }\n\t\t\t\t\t\t\t\t\t\t\t\t/></td>\n\t\t\t\t\t\t\t\t\t\t\t\t<td><TextInputField\n\t\t\t\t\t\t\t\t\t\t\t\t\tlabel=\"km\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tname=\"stats.running_km_advanced_long\"\n\t\t\t\t\t\t\t\t\t\t\t\t\ttype=\"number\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tonChange={ handleChange }\n\t\t\t\t\t\t\t\t\t\t\t\t/></td>\n\t\t\t\t\t\t\t\t\t\t\t\t<td><TextInputField\n\t\t\t\t\t\t\t\t\t\t\t\t\tlabel=\"mins\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tname=\"stats.running_minutes_advanced_long\"\n\t\t\t\t\t\t\t\t\t\t\t\t\ttype=\"number\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tonChange={ handleChange }\n\t\t\t\t\t\t\t\t\t\t\t\t/></td>\n\t\t\t\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t\t\t</tbody>\n\t\t\t\t\t\t\t\t\t</table>\n\t\t\t\t\t\t\t\t</FormField>\n\t\t\t\t\t\t\t\t<Button iconBefore={ isSubmitting ? \"\" : \"tick\"} isLoading={ isSubmitting } disabled={ !dirty } onClick={ handleSubmit }>Add</Button>\n\t\t\t\t\t\t\t\t{ errors && <p>{ errors }</p>}\n\t\t\t\t\t\t\t</form> \n\t\t\t\t\t\t</>\n\t\t\t\t\t);\n\t\t\t\t}}\n\t\t</Formik>\n\t</> );\n}\nAddWorkoutVersionPanel.propTypes = {\n\tprops: PropTypes.object,\n\tid: PropTypes.string,\n\tworkoutId: PropTypes.string,\n\temit: PropTypes.func,\n};\n","\n// deps\nimport React, { useContext, useState } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { Radio, Select, TextInputField, Heading, Pane, Textarea, FormField, Button, Text, IconButton, Paragraph } from \"evergreen-ui\";\nimport { Formik } from \"formik\";\nimport { useQuery, useMutation } from \"@apollo/react-hooks\";\nimport _ from \"lodash\";\n\n// app\nimport { Services, Queries, constants, Loading } from \"../index\";\n\n//\n// Adultletics Admin / Views / Panel / Panels / Workouts / Edit\n//\n\n\nexport default function EditWorkoutVersionPanel ({ props }) {\n\tconst { id } = props;\n\tconst { data, loading } = useQuery( Queries.workouts.getVersion, { variables: { id }});\n\tconst { data: drillsData, loading: drillsLoading } = useQuery( Queries.drills.getAll );\n\tconst [ updateVersion ] = useMutation( Queries.workouts.updateVersion, { refetchQueries: [{ query: Queries.workouts.getVersion, variables: { id }}], awaitRefetchQueries: true });\n\tconst [ addDrill, { addDrillsLoading }] = useMutation( Queries.workouts.addDrill, { refetchQueries: [{ query: Queries.workouts.getVersion, variables: { id }}], awaitRefetchQueries: true });\n\tconst [ removeDrill ] = useMutation( Queries.workouts.removeDrill, { refetchQueries: [{ query: Queries.workouts.getVersion, variables: { id }}], awaitRefetchQueries: true });\n\tconst { closePanel } = useContext( Services.UI );\n\tconst [ errors, setErrors ] = useState( null );\n\tconst { intensityOptions, workoutTypes } = constants;\n\n\tif ( loading || drillsLoading ) return <Loading />;\n\n\tconst version = _.get( data, \"workouts_versions_by_pk\" );\n\n\tconst initialValues = {\n\t\tbody: _.get( version, \"body\" ),\n\t\ttitle: _.get( version, \"workout.title\", \"\" ),\n\t\tstats: _.reduce( _.get( version, \"stats\", {}), ( total, value, key ) => ({ ...total, [ key ]: _.isNull( value ) ? \"\" : value }), {}),\n\t\tintensity: _.get( version, \"workout.intensity\", \"3\" ),\n\t\ttype: _.get( version, \"workout.type\", \"\" ),\n\t};\n    \n\tconst workoutsDrills = _.get( version, \"drills\", []);\n\tconst selectedDrills = _.map( workoutsDrills, drill => ({ workoutsDrillId: drill.id, ...drill.drill }));\n\tconst allDrills = _.get( drillsData, \"drills\" );\n\tconst unselectedDrills = _.filter( allDrills, drill => !_.some( selectedDrills, [ \"id\", drill.id ]));\n\n\treturn (\n\t\t<>\n\t\t\t<Pane marginBottom={ 56 }>\n\t\t\t\t<Heading size={ 600 }>Editing version { _.get( version, \"version_num\" ) } of workout: { _.get( version, \"workout.title\", \"\" ) }</Heading>\n\t\t\t</Pane>\n\t\t\t<Formik\n\t\t\t\tinitialValues={{ ...initialValues }}\n\t\t\t\tonSubmit={ async ({ title, body, stats, type, intensity }) => {\n\t\t\t\t\tsetErrors( null );\n\t\t\t\t\ttry {\n\t\t\t\t\t\tconst stats_update_data = _.reduce( stats, ( total, value, key ) => {\n\t\t\t\t\t\t\tif ( key === \"id\" || key === \"__typename\" ) return total;\n\t\t\t\t\t\t\treturn { ...total, [ key ]: value === \"\" ? null : value };\n\t\t\t\t\t\t}, {});\n\t\t\t\t\t\tawait updateVersion({ variables: {\n\t\t\t\t\t\t\tversion_id: id,\n\t\t\t\t\t\t\tworkout_id: _.get( version, \"workout.id\" ),\n\t\t\t\t\t\t\tstats_id: _.get( version, \"stats.id\" ),\n\t\t\t\t\t\t\tbody,\n\t\t\t\t\t\t\tworkout_data: {\n\t\t\t\t\t\t\t\ttitle,\n\t\t\t\t\t\t\t\ttype,\n\t\t\t\t\t\t\t\tintensity,\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tstats_data: stats_update_data,\n\t\t\t\t\t\t}});\n\t\t\t\t\t\tclosePanel();\n\t\t\t\t\t} catch ( error ) {\n\t\t\t\t\t\tconsole.error( error );\n\t\t\t\t\t\tsetErrors( error.message );\n\t\t\t\t\t}\n\t\t\t\t}}\n\t\t\t>{\n\t\t\t\t\t({ values, dirty, handleChange, handleSubmit, isSubmitting, setFieldValue }) => {\n\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t<form>\n\t\t\t\t\t\t\t\t\t<TextInputField\n\t\t\t\t\t\t\t\t\t\tlabel=\"Workout Title (effects all versions)\"\n\t\t\t\t\t\t\t\t\t\tname=\"title\"\n\t\t\t\t\t\t\t\t\t\tvalue={ values.title }\n\t\t\t\t\t\t\t\t\t\tonChange={ handleChange }\n\t\t\t\t\t\t\t\t\t\tautoFocus\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t<FormField label=\"Workout Intensity (effects all versions)\" onChange={ e => setFieldValue( \"intensity\", e.target.value ) } marginBottom={ 16 }>\n\t\t\t\t\t\t\t\t\t\t<Pane display=\"flex\" flexDirection=\"row\" justifyContent=\"space-between\">\n\t\t\t\t\t\t\t\t\t\t\t{ _.map( intensityOptions, ({ label, value }) => (\n\t\t\t\t\t\t\t\t\t\t\t\t<Radio key={ value } name=\"intensity\" value={ value } label={ label } checked={ value === values.intensity }/>\n\t\t\t\t\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t\t\t\t\t</Pane>\n\t\t\t\t\t\t\t\t\t</FormField>\n\t\t\t\t\t\t\t\t\t<FormField label=\"Workout Type (effects all versions)\" marginBottom={ 16 }>\n\t\t\t\t\t\t\t\t\t\t<Select name=\"type\" value={ values.type } onChange={ handleChange } height={ 32 } >\n\t\t\t\t\t\t\t\t\t\t\t<option key=\"empty\" value=\"\">Please select an option...</option>\n\t\t\t\t\t\t\t\t\t\t\t{ workoutTypes && _.map( workoutTypes, ({ value, label }) => ( <option key={ value } value={ value }>{ label }</option> ))}\n\t\t\t\t\t\t\t\t\t\t</Select>\n\t\t\t\t\t\t\t\t\t</FormField>\n\t\t\t\t\t\t\t\t\t<FormField label=\"Add Drills\" marginBottom={ 16 }>\n\t\t\t\t\t\t\t\t\t\t<Pane marginBottom={ 8 } display=\"flex\" justifyContent=\"space-between\">\n\t\t\t\t\t\t\t\t\t\t\t<Select name=\"drill\" value={ values.drill } onChange={ handleChange } height={ 32 }>\n\t\t\t\t\t\t\t\t\t\t\t\t<option key=\"empty\" value=\"\">Please select an option...</option>\n\t\t\t\t\t\t\t\t\t\t\t\t{ unselectedDrills && _.map( unselectedDrills, ({ id, title }) => ( <option key={ id } value={ id }>{ title }</option> ))}\n\t\t\t\t\t\t\t\t\t\t\t</Select>\n\t\t\t\t\t\t\t\t\t\t\t<Button \n\t\t\t\t\t\t\t\t\t\t\t\ticonBefore={ addDrillsLoading ? \"\" : \"tick\"} \n\t\t\t\t\t\t\t\t\t\t\t\tisLoading={ addDrillsLoading } \n\t\t\t\t\t\t\t\t\t\t\t\tdisabled={ !values.drill } \n\t\t\t\t\t\t\t\t\t\t\t\tonClick={ e => {\n\t\t\t\t\t\t\t\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t\t\t\t\t\t\t\t\taddDrill({ variables: { objects: [{ _drill: values.drill, _workouts_version: _.get( version, \"id\" ) }]}}); \n\t\t\t\t\t\t\t\t\t\t\t\t}} \n\t\t\t\t\t\t\t\t\t\t\t\tmarginRight={ 8 } \n\t\t\t\t\t\t\t\t\t\t\t\tmarginLeft={ 8 }>Attach drill\n\t\t\t\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t\t\t\t</Pane>\n\t\t\t\t\t\t\t\t\t\t<Pane>\n\t\t\t\t\t\t\t\t\t\t\t{ errors && <p>{ errors }</p>}\n\t\t\t\t\t\t\t\t\t\t</Pane>\n\t\t\t\t\t\t\t\t\t</FormField>\n\t\t\t\t\t\t\t\t\t<FormField label=\"Selected drills\" marginBottom={ 16 }>\n\t\t\t\t\t\t\t\t\t\t<Pane>\n\t\t\t\t\t\t\t\t\t\t\t{ !_.isEmpty( selectedDrills ) ? _.map( selectedDrills, ({ id, title, workoutsDrillId }) => (\n\t\t\t\t\t\t\t\t\t\t\t\t<Pane display=\"flex\" flexDirection=\"row\" elevation={ 1 } height={ 32 } alignItems=\"center\" background=\"white\" marginBottom={ 16 } key={ id } paddingLeft={ 16 } paddingRight={ 8 }>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Text flex={ 1 }>{ title }</Text>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<IconButton icon=\"small-cross\" intent=\"danger\" appearance=\"minimal\" onClick={ e => {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tremoveDrill({ variables: { id: workoutsDrillId }});\n\t\t\t\t\t\t\t\t\t\t\t\t\t}}/> \n\t\t\t\t\t\t\t\t\t\t\t\t</Pane> )) : <Paragraph marginBottom={ 16 } >No drills selected</Paragraph>}\n\t\t\t\t\t\t\t\t\t\t</Pane>\n\t\t\t\t\t\t\t\t\t</FormField>\n\t\t\t\t\t\t\t\t\t<FormField label=\"Workout Description\" marginBottom={ 16 }>\n\t\t\t\t\t\t\t\t\t\t<Textarea\n\t\t\t\t\t\t\t\t\t\t\tname=\"body\"\n\t\t\t\t\t\t\t\t\t\t\tvalue={ values.body }\n\t\t\t\t\t\t\t\t\t\t\tonChange={ handleChange }\n\t\t\t\t\t\t\t\t\t\t\trows={ 24 }\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t</FormField>\n\t\t\t\t\t\t\t\t\t<FormField label=\"Stats\" marginBottom={ 16 }>\n\t\t\t\t\t\t\t\t\t\t<table className=\"stats-input-table\">\n\t\t\t\t\t\t\t\t\t\t\t<thead>\n\t\t\t\t\t\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<th></th>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<th colSpan={ 2 }><Heading size={ 200 }>5/10km</Heading></th>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<th colSpan={ 2 }><Heading size={ 200 }>half/ultra</Heading></th>\n\t\t\t\t\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t\t\t\t</thead>\n\t\t\t\t\t\t\t\t\t\t\t<tbody>\n\t\t\t\t\t\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<td><Heading size={ 200 }>Beginner</Heading></td>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<td><TextInputField\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tlabel=\"km\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tname=\"stats.running_km_beginner_short\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tvalue={ values.stats.running_km_beginner_short }\n\t\t\t\t\t\t\t\t\t\t\t\t\t\ttype=\"number\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tonChange={ handleChange }\n\t\t\t\t\t\t\t\t\t\t\t\t\t/></td>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<td><TextInputField\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tlabel=\"mins\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tname=\"stats.running_minutes_beginner_short\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tvalue={ values.stats.running_minutes_beginner_short }\n\t\t\t\t\t\t\t\t\t\t\t\t\t\ttype=\"number\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tonChange={ handleChange }\n\t\t\t\t\t\t\t\t\t\t\t\t\t/></td>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<td><TextInputField\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tlabel=\"km\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tname=\"stats.running_km_beginner_long\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tvalue={ values.stats.running_km_beginner_long }\n\t\t\t\t\t\t\t\t\t\t\t\t\t\ttype=\"number\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tonChange={ handleChange }\n\t\t\t\t\t\t\t\t\t\t\t\t\t/></td>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<td><TextInputField\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tlabel=\"mins\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tname=\"stats.running_minutes_beginner_long\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tvalue={ values.stats.running_minutes_beginner_long }\n\t\t\t\t\t\t\t\t\t\t\t\t\t\ttype=\"number\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tonChange={ handleChange }\n\t\t\t\t\t\t\t\t\t\t\t\t\t/></td>\n\t\t\t\t\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<td><Heading size={ 200 }>Intermediate</Heading></td>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<td><TextInputField\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tlabel=\"km\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tname=\"stats.running_km_intermediate_short\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tvalue={ values.stats.running_km_intermediate_short }\n\t\t\t\t\t\t\t\t\t\t\t\t\t\ttype=\"number\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tonChange={ handleChange }\n\t\t\t\t\t\t\t\t\t\t\t\t\t/></td>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<td><TextInputField\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tlabel=\"mins\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tname=\"stats.running_minutes_intermediate_short\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tvalue={ values.stats.running_minutes_intermediate_short }\n\t\t\t\t\t\t\t\t\t\t\t\t\t\ttype=\"number\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tonChange={ handleChange }\n\t\t\t\t\t\t\t\t\t\t\t\t\t/></td>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<td><TextInputField\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tlabel=\"km\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tname=\"stats.running_km_intermediate_long\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tvalue={ values.stats.running_km_intermediate_long }\n\t\t\t\t\t\t\t\t\t\t\t\t\t\ttype=\"number\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tonChange={ handleChange }\n\t\t\t\t\t\t\t\t\t\t\t\t\t/></td>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<td><TextInputField\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tlabel=\"mins\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tname=\"stats.running_minutes_intermediate_long\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tvalue={ values.stats.running_minutes_intermediate_long }\n\t\t\t\t\t\t\t\t\t\t\t\t\t\ttype=\"number\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tonChange={ handleChange }\n\t\t\t\t\t\t\t\t\t\t\t\t\t/></td>\n\t\t\t\t\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<td><Heading size={ 200 }>Advanced</Heading></td>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<td><TextInputField\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tlabel=\"km\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tname=\"stats.running_km_advanced_short\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tvalue={ values.stats.running_km_advanced_short }\n\t\t\t\t\t\t\t\t\t\t\t\t\t\ttype=\"number\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tonChange={ handleChange }\n\t\t\t\t\t\t\t\t\t\t\t\t\t/></td>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<td><TextInputField\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tlabel=\"mins\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tname=\"stats.running_minutes_advanced_short\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tvalue={ values.stats.running_minutes_advanced_short }\n\t\t\t\t\t\t\t\t\t\t\t\t\t\ttype=\"number\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tonChange={ handleChange }\n\t\t\t\t\t\t\t\t\t\t\t\t\t/></td>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<td><TextInputField\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tlabel=\"km\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tname=\"stats.running_km_advanced_long\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tvalue={ values.stats.running_km_advanced_long }\n\t\t\t\t\t\t\t\t\t\t\t\t\t\ttype=\"number\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tonChange={ handleChange }\n\t\t\t\t\t\t\t\t\t\t\t\t\t/></td>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<td><TextInputField\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tlabel=\"mins\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tname=\"stats.running_minutes_advanced_long\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tvalue={ values.stats.running_minutes_advanced_long }\n\t\t\t\t\t\t\t\t\t\t\t\t\t\ttype=\"number\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tonChange={ handleChange }\n\t\t\t\t\t\t\t\t\t\t\t\t\t/></td>\n\t\t\t\t\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t\t\t\t</tbody>\n\t\t\t\t\t\t\t\t\t\t</table>\n\t\t\t\t\t\t\t\t\t</FormField>\n\t\t\t\t\t\t\t\t\t<Button iconBefore={ isSubmitting ? \"\" : \"tick\"} isLoading={ isSubmitting } disabled={ !dirty } onClick={ handleSubmit }>Update</Button>\n\t\t\t\t\t\t\t\t\t{ errors && <p>{ errors }</p>}\n\t\t\t\t\t\t\t\t</form> \n\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t);\n\t\t\t\t\t}}\n\t\t\t</Formik>\n\t\t</>\n\t);\n}\nEditWorkoutVersionPanel.propTypes = {\n\tprops: PropTypes.object,\n\tid: PropTypes.string,\n};\n","\n// deps\nimport React from \"react\";\nimport PropTypes from \"prop-types\";\nimport { Badge, Text, Pane, Heading, Paragraph } from \"evergreen-ui\";\nimport { Link } from \"react-router-dom\";\nimport { useQuery } from \"@apollo/react-hooks\";\nimport _ from \"lodash\";\n\n// app\nimport { Loading, Queries, constants } from \"../index\";\n\n//\n// Adultletics Admin / Views / Panel / Panels / Weeks / View Workout Version\n//\n\n\nexport default function ViewWorkoutVersionPanel ({ props }) {\n\tconst { id } = props;\n\tconst { intensityOptions, workoutTypes } = constants;\n\tconst { data, loading } = useQuery( Queries.workouts.getVersion, { variables: { id }});\n\n\tif ( loading ) return <Loading />;\n    \n\tconst version = _.get( data, \"workouts_versions_by_pk\" );\n    \n\tconst version_num = _.get( version, \"version_num\" );\n\tconst body = _.get( version, \"body\" );\n\tconst drills = _.map( _.get( version, \"drills\", []), \"drill\" );\n\tconst workout = _.get( version, \"workout\" );\n\tconst title = _.get( workout, \"title\" );\n\tconst typesValue = _.get( workout, \"type\" );\n\tconst intensityValue = _.get( workout, \"intensity\" );\n    \n\tconst intensity = _.get( _.find( intensityOptions, [ \"value\", intensityValue ]), \"label\", \"\" );\n\tconst type = _.get( _.find( workoutTypes, [ \"value\", typesValue ]), \"label\", \"\" );\n\n\treturn ( <>\n\t\t<Pane marginBottom={ 32 } display=\"flex\" flexDirection=\"row\" alignItems=\"center\">\n\t\t\t<Pane marginRight={ 16 }>\n\t\t\t\t<Heading size={ 600 }>{ title } - version { version_num }</Heading>\n\t\t\t</Pane>\n\t\t\t<Pane flex={ 1 }>\n\t\t\t\t<Badge marginRight={ 8 } color=\"blue\">{ type }</Badge>\n\t\t\t\t<Badge color=\"blue\">{ intensity }</Badge>\n\t\t\t</Pane>\n\t\t</Pane>\n\t\t<Pane background=\"white\" padding={ 32 } marginBottom={ 32 } elevation={ 1 }>\n\t\t\t<Heading marginBottom={ 16 } size={ 200 }>Description:</Heading>\n\t\t\t{ body && _.map( body.split( \"\\n\" ), ( line, i ) => line ? <Paragraph key={ i }>{ line }</Paragraph> : <br key={ i } /> )}\n\t\t</Pane>\n\t\t<Pane marginBottom={ 32 }>\n\t\t\t<Heading size={ 200 } marginBottom={ 16 }>Drills:</Heading>\n\t\t\t{ !_.isEmpty( drills ) ? _.map( drills, drill => {\n\t\t\t\tconst { id, title } = drill;\n\t\t\t\treturn ( \n\t\t\t\t\t<Link to={ `/admin/drills/${ id }` } key={ id } style={{ marginBottom: \"24px\" }}>\n\t\t\t\t\t\t<Pane display=\"flex\" elevation={ 1 } height={ 48 } alignItems=\"center\" background=\"white\" marginBottom={ 16 }>\n\t\t\t\t\t\t\t<Text marginLeft={ 24 }>{ title }</Text> \n\t\t\t\t\t\t</Pane> \n\t\t\t\t\t</Link>\n\t\t\t\t);\n\t\t\t}) : <Paragraph>No attached drills</Paragraph> }\n\t\t</Pane>\n\t</> );\n}\nViewWorkoutVersionPanel.propTypes = {\n\tprops: PropTypes.object,\n\tid: PropTypes.string,\n};\n","\n// deps\nimport React, { useContext } from \"react\";\nimport { SideSheet } from \"evergreen-ui\";\nimport _ from \"lodash\";\n\n// app\nimport { Services } from \"../../views/index\";\nimport panelMap from \"./panels\";\n\n//\n// Adultletics Admin / Views / Panel / Panel\n//\n\n\nconst widthMap = {\n\twide: 930,\n\tnormal: 620,\n};\n\nexport default function Panel () {\n\tconst { panel, closePanel } = useContext( Services.UI );\n\tconst _isOpen = !_.isEmpty( panel );\n\tconst ShownPanel = panelMap[ _.get( panel, \"panel\", false ) ];\n\tconst props = _.get( panel, \"props\", {});\n\tconst size = widthMap[ _.get( panel, \"size\", \"normal\" ) ]; \n\n\treturn (\n\t\t<>\n\t\t\t<SideSheet\n\t\t\t\tisShown={ _isOpen }\n\t\t\t\tonCloseComplete={ closePanel }\n\t\t\t\tpreventBodyScrolling\n\t\t\t\twidth={ size }\n\t\t\t>\n\t\t\t\t<div className=\"v-panel\">\n\t\t\t\t\t{ ( _isOpen && ShownPanel ) && <ShownPanel props={ props } /> }\n\t\t\t\t</div>\n\t\t\t</SideSheet>\n\t\t</>\n\t);\n}\n\n// example: openPanel({ panel: \"auth/sign-in\", props: { id: \"123\" }, width: \"wide\" })\n","\n// deps\nimport React, { useState, useEffect, lazy } from \"react\";\nimport { Switch, Route, useHistory } from \"react-router-dom\";\nimport _ from \"lodash\";\n\n// app\nimport FirebaseProvider from \"./firebase\";\nimport ApolloProvider from \"./apollo\";\nimport Services from \"./services\"\nimport Panel from \"../components/panel/panel\"\nimport { Pane } from \"evergreen-ui\";\n\nconst Admin = lazy(() => import('../views/views-admin'))\n\n//\n// Adultletics / App / React App\n//\n\n\nexport default function ReactApp () {\n\tconst { Auth, UI } = Services;\n\tconst [ auth, setAuth ] = useState({\n\t\tauthUser: {},\n\t\ttoken: \"\",\n\t\tuid: \"\",\n\t\tisAuthenticating: true,\n\t\tisAuthenticated: false,\n\t\tupdateAuth: payload => setAuth( auth => ({ ...auth, ...payload })),\n\t\tsignIn: () => {},\n\t\tsignOut: () => {},\n\t});\n\tconst [ ui, setUI ] = useState({\n\t\tpanel: {},\n\t\topenPanel: payload => setUI( ui => ({ ...ui, panel: payload })),\n\t\tclosePanel: () => setUI( ui => ({ ...ui, panel: {}})),\n\t\tbreakpoint: getBreakpoint(),\n\t\tsetBreakpoint: payload => setUI( ui => ({ ...ui, breakpoint: payload })),\n\t});\n\tconst { setBreakpoint } = ui;\n    \n\tuseEffect(() => window.addEventListener( \"resize\", _.debounce(() => setBreakpoint( getBreakpoint()), 1000 )), [ setBreakpoint ]);\n\n\treturn (\n\t\t<Auth.Provider value={ auth }>\n\t\t\t<UI.Provider value={ ui }>\n\t\t\t\t<ApolloProvider>\n\t\t\t\t\t<FirebaseProvider>\n\t\t\t\t\t\t<Panel />\n\t\t\t\t\t\t<Pane background=\"tint1\" minHeight=\"100vh\">\n\t\t\t\t\t\t\t<div className=\"v-router\">\n\t\t\t\t\t\t\t\t<Switch>\n\t\t\t\t\t\t\t\t\t<Route path=\"/admin\" component={ Admin } />\n                                    <Route path=\"*\" component={ NoRoute } />\n\t\t\t\t\t\t\t\t</Switch>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</Pane>                                \n\t\t\t\t\t</FirebaseProvider>\n\t\t\t\t</ApolloProvider>\n\t\t\t</UI.Provider>\n\t\t</Auth.Provider>\n\t);\n}\n\n\nconst getBreakpoint = () => {\n\tconst width = window.innerWidth;\n\tif ( width <= 640 ) return \"small\";\n\tif ( width <= 1008 ) return \"medium\";\n\treturn \"large\";\n};\n\nconst NoRoute = () => {\n    const history = useHistory();\n    history.push( \"/\" )\n    return ( <></> )\n}"],"sourceRoot":""}