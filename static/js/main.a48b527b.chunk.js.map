{"version":3,"sources":["views/app/firebase.js","views/app/router.js","views/app/apollo.js","views/app/app.js","components/panel/panels/weeks/add.js","components/panel/panels/weeks/update-workout.js","components/panel/panels/index.js","components/panel/panels/auth/sign-in.js","components/panel/panels/drills/add.js","components/panel/panels/drills/edit.js","components/panel/panels/daily-challenges/add.js","components/panel/panels/daily-challenges/edit.js","components/panel/panels/workouts/add.js","components/panel/panels/workouts/addVersion.js","components/panel/panels/workouts/edit.js","components/panel/panel.js","components/top-nav/top-nav.js","views/app/queries.js","views/app/services.js","components/loading/loading.js","base/constants.js","views/dashboard/dashboard.js","views/workouts/workout.js","views/workouts/workouts.js","views/workouts/index.js","views/weeks/week.js","views/weeks/weeks.js","views/weeks/index.js","views/drills/drill.js","views/drills/drills.js","views/drills/index.js","views/daily-challenges/challenge.js","views/daily-challenges/challenges.js","views/daily-challenges/index.js","serviceWorker.js","index.js"],"names":["Firebase","children","apolloClient","useApolloClient","useContext","Services","Auth","updateAuth","authUser","uid","isAuthenticated","useEffect","_","get","a","query","Queries","auth","getUser","variables","userRes","signIn","email","password","firebase","signInWithEmailAndPassword","signOut","onAuthStateChanged","user","isAuthenticating","getIdToken","token","getIdTokenResult","idTokenResult","claims","isEmpty","initializeApp","apiKey","process","authDomain","databaseURL","projectId","propTypes","PropTypes","node","Router","UI","useState","panel","openPanel","payload","setUI","ui","closePanel","notifications","addNotification","window","innerWidth","toaster","warning","duration","position","Provider","value","Panel","Pane","background","minHeight","TopNav","className","path","DrillsIndex","WorkoutsIndex","WeeksIndex","Dashboard","Loading","Apollo","httpLink","HttpLink","uri","headers","Authorization","wsLink","WebSocketLink","options","reconnect","timeout","connectionParams","link","split","getMainDefinition","kind","operation","client","ApolloClient","cache","InMemoryCache","App","setAuth","today","Date","matchWorkout","searchTerms","workout","title","type","terms","map","term","lowerCase","reduce","total","curr","includes","SearchRow","colourProps","matchSize","onSelect","selected","versions","selectOptions","version_num","label","getInitialSelectedState","selectedVersion","setSelectedVersion","isTruncated","setIsTruncated","match","version","find","versionId","body","truncate","lenght","color","display","flexDirection","marginBottom","Select","onChange","e","Number","target","defaultValue","key","IconButton","icon","iconSize","appearance","onClick","preventDefault","elevation","flex","paddingLeft","paddingRight","paddingBottom","paddingTop","alignItems","Heading","size","marginRight","justifyContent","line","i","Text","errors","setErrors","initialValues","onSubmit","console","error","message","values","handleChange","handleSubmit","isSubmitting","TextInputField","name","autoFocus","Button","isLoading","disabled","useMutation","drills","add","refetchQueries","getAll","awaitRefetchQueries","insertDrill","description","data","objects","dirty","url","placeholder","embed_url","FormField","Textarea","iconBefore","marginTop","id","props","useQuery","getOne","loading","update","updateDrill","drill","isNull","enableReinitialize","dailyChallenges","insertChallenge","updateChallenge","challenge","emit","drillsData","drillsLoading","workouts","addVersion","selectedDrills","setSelectedDrills","intensityOptions","constants","workoutTypes","history","useHistory","allDrills","unselectedDrills","filter","some","running_km","running_minutes","intensity","stats","drills_insert_data","_drill","_owner","res","workoutId","push","setFieldValue","Radio","checked","height","marginLeft","Paragraph","intent","rows","colSpan","workoutData","workoutLoading","getVersion","newVersionNum","_workout","updateVersion","addDrill","addDrillsLoading","removeDrill","workoutsDrills","workoutsDrillId","stats_update_data","version_id","workout_id","stats_id","workout_data","stats_data","_workouts_version","running_km_beginner_short","running_minutes_beginner_short","running_km_beginner_long","running_minutes_beginner_long","running_km_intermediate_short","running_minutes_intermediate_short","running_km_intermediate_long","running_minutes_intermediate_long","running_km_advanced_short","running_minutes_advanced_short","running_km_advanced_long","running_minutes_advanced_long","days","daysData","daysLoading","weeks","weeksData","weeksLoading","addWeek","takenDays","week_start","formatISO","parseISO","dateSelectOptions","range","day","date","addDays","startOfWeek","weekStartsOn","format","_day","SelectField","updateWeekday","setSearchTerms","filteredWorkouts","setFilteredWorkouts","selectedWorkoutVersionId","setSelectedWorkoutVersionId","selectedWorkout","selectedWorkoutId","orderBy","_handleClearWorkout","setTimeout","workoutVersionId","SearchInput","width","widthMap","wide","normal","_isOpen","ShownPanel","panelMap","SideSheet","isShown","onCloseComplete","preventBodyScrolling","pathname","useLocation","Tablist","route","Tab","isSelected","startsWith","aria-controls","Avatar","first_name","GET_USER","gql","GET_ALL_DRILLS","GET_DRILL_BY_ID","INSERT_DRILL","UPDATE_DRILL","GET_ALL_CHALLENGES","GET_CHALLENGE_BY_ID","INSERT_CHALLENGE","UPDATE_CHALLENGE","GET_ALL_WORKOUTS","GET_WORKOUT","SUBSCRIBE_WORKOUT","GET_WORKOUT_VERSION","INSERT_WORKOUT_VERSION","UPDATE_WORKOUT_VERSION","INSERT_WORKOUTS_DRILL","DELETE_WORKOUTS_DRILL","DELETE_WORKOUT","DELETE_VERSION","GET_ALL_WEEKS","SUBSCRIBE_ALL_WEEKS","subscribe","deleteWorkout","deleteVersion","subscribeAll","updateWeek","createContext","Spinner","system","useSubscription","sort","b","padding","upperCase","WorkoutTypeChart","memo","typeList","lastTenWeekWeightedCounts","compact","rangeRight","end","start","loopData","slice","lastTenWeekRanks","week","weekAsSortedArrayPairs","toPairs","graphData","margin","top","right","bottom","left","colors","scheme","lineWidth","activeLineWidth","inactiveLineWidth","inactiveOpacity","pointSize","activePointSize","inactivePointSize","pointColor","theme","pointBorderWidth","activePointBorderWidth","pointBorderColor","from","axisTop","axisRight","axisBottom","tickSize","tickPadding","tickRotation","legend","legendPosition","legendOffset","axisLeft","endLabelPadding","isEqual","WorkoutPopularityChart","workoutList","last","EnergySystemsChart","keys","uniq","keysObject","workoutTypesObject","offsetType","order","fillOpacity","legends","anchor","direction","translateX","itemWidth","itemHeight","itemTextColor","symbolSize","symbolShape","effects","on","style","Workout","removeWorkout","removeVersion","typesValue","intensityValue","_handleWorkoutDelete","_handleVersionDelete","_handleVersionAdd","Badge","to","WorkoutMinutesSplit","beginner","intermediate","advanced","innerPadding","layout","groupMode","justify","isInteractive","enableGridY","dataFrom","translateY","itemDirection","Workouts","intensityLabel","typeLabel","useParams","_workoutView","Boolean","Week","challengesData","challengesLoading","updated_at","challenges","challengeSelectOptions","_handleDownload","replace","log","_challenge","workoutTitle","workoutVersion","daily_challenge","doc","Document","DocXParagraph","text","heading","HeadingLevel","HEADING_1","forEach","HEADING_3","spacing","before","drillsText","bullet","level","HEADING_4","addSection","Packer","toBlob","then","blob","save","EnergySystemSplit","allEnergySystems","workoutsEnergySystemMap","capitalize","nth","el","colorBy","WeeksMinutesSplit","now","Weeks","age","differenceInCalendarDays","_weekView","Drill","workoutsCount","Link","href","rel","src","frameBorder","allow","allowFullScreen","Drills","_drillView","Challenge","weeksCount","Challenges","daily_challenges","location","hostname","rootElement","document","getElementById","hasChildNodes","hydrate","render","navigator","serviceWorker","ready","registration","unregister","catch"],"mappings":"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","file":"static/js/main.a48b527b.chunk.js","sourcesContent":["\n// deps\nimport React, { useContext, useEffect } from \"react\";\nimport PropTypes from \"prop-types\";\nimport firebase from \"firebase/app\";\nimport \"firebase/auth\";\nimport _ from \"lodash\";\nimport { useApolloClient } from \"@apollo/react-hooks\";\n\n// app\nimport { Queries, Services } from \"../index\";\n\n//\n// Adultletics Admin / Views / App / Firebase\n//\n\n\nconst firebaseConfig = {\n\tapiKey: process.env.REACT_APP_FIREBASE_API_KEY,\n\tauthDomain: process.env.REACT_APP_FIREBASE_AUTH_DOMAIN,\n\tdatabaseURL: process.env.REACT_APP_FIREBASE_DB_URL,\n\tprojectId: process.env.REACT_APP_FIREBASE_PROJECT_ID,\n};\n\nfirebase.initializeApp( firebaseConfig );\n\nexport default function Firebase ({ children }) {\n\tconst apolloClient = useApolloClient();\n\tconst { updateAuth, authUser, uid, isAuthenticated } = useContext( Services.Auth );\n\n\tuseEffect(() => {\n\t\tif ( uid && uid !== _.get( authUser, \"uid\", \"\" )) {\n\t\t\t( async () => {\n\t\t\t\tconst userRes = await apolloClient.query({ query: Queries.auth.getUser, variables: { uid }});\n\t\t\t\tconst authUser = _.get( userRes, \"data.users_by_pk\" );\n\t\t\t\tupdateAuth({ authUser });\n\t\t\t})();\n\t\t}\n\t// eslint-disable-next-line\n\t}, [ uid ]);\n\t\t\n\tuseEffect(() => {\n\t\tupdateAuth({ \n\t\t\tsignIn: async ( email, password ) => await firebase.auth().signInWithEmailAndPassword( email, password ), \n\t\t\tsignOut: () => firebase.auth().signOut(),\n\t\t});\n\t\t\n\t\tfirebase.auth().onAuthStateChanged( async user => {\n\t\t\tupdateAuth({ isAuthenticating: true });\n\t\t\tif ( user ) {\n\t\t\t\tconst token = await user.getIdToken();\n\t\t\t\tconst idTokenResult = await user.getIdTokenResult();\n\t\t\t\tconst hasuraClaim = idTokenResult.claims[ \"https://hasura.io/jwt/claims\" ];\n\t\t\t\tif ( hasuraClaim ) updateAuth({ token, uid: user.uid });\n\t\t\t} else { \n\t\t\t\tupdateAuth({ authUser: {}, token: null, uid: \"\" }); \n\t\t\t}\n\t\t\tupdateAuth({ isAuthenticating: false });\n\t\t});\n\t// eslint-disable-next-line\n\t}, []);\n\n\tuseEffect(() => { \n\t\tif ( _.isEmpty( authUser ) && isAuthenticated !== false ) updateAuth({ isAuthenticated: false });\n\t\tif ( !_.isEmpty( authUser ) && isAuthenticated !== true ) updateAuth({ isAuthenticated: true });\n\t// eslint-disable-next-line\n\t}, [ authUser ]);\n\n\treturn (\n\t\t<>\n\t\t\t{ children && children }\n\t\t</>\n\t);\n}\nFirebase.propTypes = {\n\tchildren: PropTypes.node,\n};\n","\n// deps\nimport React, { useState, useContext, useEffect } from \"react\";\n\n// app\nimport { Services, Panel, TopNav, Dashboard, WorkoutsIndex, WeeksIndex, DrillsIndex, DailyChallengesIndex, Loading } from \"../index\";\nimport { BrowserRouter, Switch, Route } from \"react-router-dom\";\nimport { toaster, Pane } from \"evergreen-ui\";\n\n//\n// Adultletics Admin / Views / App / App\n//\n\n\nexport default function Router () {\n\tconst { UI, Auth } = Services;\n\tconst [ ui, setUI ] = useState({\n\t\tpanel: {},\n\t\topenPanel: payload => setUI( ui => ({ ...ui, panel: payload })),\n\t\tclosePanel: () => setUI( ui => ({ ...ui, panel: {}})),\n\t\tnotifications: [{}],\n\t\taddNotification: () => {},\n\t});\n\tconst { isAuthenticated } = useContext( Auth );\n        \n\tuseEffect(() => { if ( window.innerWidth < 1000 ) toaster.warning( \"This page is designed for a larger browswer\", { duration: 30, position: \"top-right\" });}, []);\n\n\treturn (\n\t\t<>\n\t\t\t<UI.Provider value={ ui }>\n\t\t\t\t<BrowserRouter>\n\t\t\t\t\t<Panel />\n\t\t\t\t\t<Pane background=\"tint1\" minHeight=\"100vh\">\n\t\t\t\t\t\t<TopNav />\n\t\t\t\t\t\t<div className=\"v-router\">\n\t\t\t\t\t\t\t{ isAuthenticated ? <Switch>\n\t\t\t\t\t\t\t\t<Route path=\"/drills/:id?\"><DrillsIndex /></Route>\n\t\t\t\t\t\t\t\t<Route path=\"/workouts/:id?\"><WorkoutsIndex /></Route>\n\t\t\t\t\t\t\t\t<Route path=\"/weeks/:id?\"><WeeksIndex /></Route>\n\t\t\t\t\t\t\t\t<Route path=\"/challenges/:id?\"><DailyChallengesIndex /></Route>\n\t\t\t\t\t\t\t\t<Route path=\"/\"><Dashboard /></Route>\n\t\t\t\t\t\t\t</Switch> : <Loading /> }\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</Pane>\n\t\t\t\t</BrowserRouter>\n\t\t\t</UI.Provider>\n\t\t</>\n\t);\n}\n","\n// deps\nimport React, { useContext } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { ApolloProvider } from \"@apollo/react-hooks\";\nimport ApolloClient from \"apollo-client\";\nimport { WebSocketLink } from \"apollo-link-ws\";\nimport { HttpLink } from \"apollo-link-http\";\nimport { split } from \"apollo-link\";\nimport { getMainDefinition } from \"apollo-utilities\";\nimport { InMemoryCache } from \"apollo-cache-inmemory\";\n\n\n// app\nimport { Services } from \"../index\";\n\n//\n// Adultletics Admin / Views / App / Apollo Provider\n//\n\nexport default function Apollo ({ children }) {\n\tconst { token } = useContext( Services.Auth );\n    \n\tconst httpLink = new HttpLink({\n\t\turi: \"https://adultletics-hasura.herokuapp.com/v1/graphql\",\n\t\theaders: token ? { Authorization: `Bearer ${ token }` } : {},\n\t});\n    \n\tconst wsLink = new WebSocketLink({\n\t\turi: \"wss://adultletics-hasura.herokuapp.com/v1/graphql\",\n\t\toptions: {\n\t\t\treconnect: true,\n\t\t\ttimeout: 30000,\n\t\t\tconnectionParams: token ? { headers: { Authorization: `Bearer ${ token }` }} : {},\n\t\t},\n\t});\n\n\tconst link = split(\n\t\t({ query }) => {\n\t\t\tconst { kind, operation } = getMainDefinition( query );\n\t\t\treturn kind === \"OperationDefinition\" && operation === \"subscription\";\n\t\t},\n\t\twsLink,\n\t\thttpLink,\n\t);\n\n\tconst client = new ApolloClient({\n\t\tlink,\n\t\tcache: new InMemoryCache(),\n\t});\n    \n\treturn (\n\t\t<ApolloProvider client={ client }>\n\t\t\t{ children }\n\t\t</ApolloProvider>\n\t);\n}\nApollo.propTypes = {\n\tchildren: PropTypes.node,\n};\n","\n// deps\nimport React, { useState } from \"react\";\n\n// app\nimport FirebaseProvider from \"./firebase\";\nimport Router from \"./router\";\nimport ApolloProvider from \"./apollo\";\nimport { Services } from \"../index\";\n \n//\n// Adultletics Admin / Views / App / App\n//\n\n\nexport default function App () {\n\tconst { Auth } = Services;\n\tconst [ auth, setAuth ] = useState({\n\t\tauthUser: {},\n\t\ttoken: \"\",\n\t\tuid: \"\",\n\t\tisAuthenticating: true,\n\t\tisAuthenticated: false,\n\t\tupdateAuth: payload => setAuth( auth => ({ ...auth, ...payload })),\n\t\tsignIn: () => {},\n\t\tsignOut: () => {},\n\t});\n    \n\treturn (\n\t\t<div className=\"App\">\n\t\t\t<Auth.Provider value={ auth }>\n\t\t\t\t<ApolloProvider>\n\t\t\t\t\t<FirebaseProvider>\n\t\t\t\t\t\t<Router />\n\t\t\t\t\t</FirebaseProvider>\n\t\t\t\t</ApolloProvider>\n\t\t\t</Auth.Provider>\n\t\t</div>\n\t);\n}\n","\n// deps\nimport React, { useContext, useState } from \"react\";\nimport { SelectField, Button, Pane, Heading } from \"evergreen-ui\";\nimport { Formik } from \"formik\";\nimport { useQuery, useMutation } from \"@apollo/react-hooks\";\nimport _ from \"lodash\";\nimport { useHistory } from \"react-router-dom\";\nimport { addDays, format, formatISO, startOfWeek, parseISO } from \"date-fns\";\n\n// app\nimport { Services, Queries } from \"../index\";\n\n//\n// Adultletics Admin / Views / Panel / Panels / Weeks / Add\n//\n\n\nconst today = new Date();\n\nexport default function AddWeekPanel () {\n\tconst { data: daysData, loading: daysLoading } = useQuery( Queries.days.getAll );\n\tconst { data: weeksData, loading: weeksLoading } = useQuery( Queries.weeks.getAll );\n\tconst [ addWeek ] = useMutation( Queries.weeks.add, { refetchQueries: [{ query: Queries.weeks.getAll }], awaitRefetchQueries: true });\n\tconst { authUser } = useContext( Services.Auth );\n\tconst { closePanel } = useContext( Services.UI );\n\tconst [ errors, setErrors ] = useState( null );\n\tconst history = useHistory();\n\n\tif ( daysLoading || weeksLoading ) return null;\n    \n\tconst takenDays = _.map( _.get( weeksData, \"weeks\" ), ({ week_start }) => formatISO( parseISO( week_start )));\n\tconst dateSelectOptions = _.map( _.range( 7, 29, 7 ) , day => {\n\t\tconst date = addDays( startOfWeek( today, { weekStartsOn: 1 }), day );\n\t\treturn {\n\t\t\tvalue: formatISO( date ),\n\t\t\tlabel: `Week starting: ${ format( date, \"do MMMM\" ) }`,\n\t\t\tdisabled: takenDays.includes( formatISO( date )),\n\t\t};});\n\n\treturn ( <>\n\t\t<Pane marginBottom={ 56 }>\n\t\t\t<Heading size={ 600 }>Adding a new week</Heading>\n\t\t</Pane>\n\t\t<Formik\n\t\t\tinitialValues={{}}\n\t\t\tonSubmit={ async ({ week_start }) => {\n\t\t\t\tsetErrors( null );\n\t\t\t\ttry {\n\t\t\t\t\tconst res = await addWeek({ variables: { objects: [{\n\t\t\t\t\t\t_owner: authUser.id,\n\t\t\t\t\t\ttitle: _.get( _.find( dateSelectOptions, [ \"value\", week_start ]), \"label\" ),\n\t\t\t\t\t\tweek_start,\n\t\t\t\t\t\tdays: {\n\t\t\t\t\t\t\tdata: _.map( _.get( daysData, \"days\" ), day => ({ _day: day.id })),\n\t\t\t\t\t\t},\n\t\t\t\t\t}]}});\n\t\t\t\t\tclosePanel();\n\t\t\t\t\tconst id = _.get( res, \"data.insert_weeks.returning[0].id\" );\n\t\t\t\t\thistory.push( `/weeks/${ id }` );\n\t\t\t\t} catch ( error ) {\n\t\t\t\t\tconsole.error( error );\n\t\t\t\t\tsetErrors( error.message );\n\t\t\t\t}\n\t\t\t}}\n\t\t>{\n\t\t\t\t({ values, dirty, handleChange, handleSubmit, isSubmitting }) => {\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t<form>\n\t\t\t\t\t\t\t\t<SelectField label=\"Please choose which upcoming week to create\" name=\"week_start\" value={ values.type } onChange={ handleChange } height={ 40 }>\n\t\t\t\t\t\t\t\t\t<option key=\"empty\" value=\"\">Please select an option...</option>\n\t\t\t\t\t\t\t\t\t{ dateSelectOptions && _.map( dateSelectOptions, ({ value, label, disabled }) => ( \n\t\t\t\t\t\t\t\t\t\t<option key={ value } value={ value } disabled={ disabled }>{ label }</option> \n\t\t\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t\t\t</SelectField>\n\t\t\t\t\t\t\t\t<Button iconBefore={ isSubmitting ? \"\" : \"tick\"} isLoading={ isSubmitting } disabled={ !dirty || !values.week_start } onClick={ handleSubmit }>Add</Button>\n\t\t\t\t\t\t\t\t{ errors && <p>{ errors }</p>}\n\t\t\t\t\t\t\t</form> \n\t\t\t\t\t\t</>\n\t\t\t\t\t);\n\t\t\t\t}}\n\t\t</Formik>\n\t</> );\n}\n","\n// deps\nimport React, { useContext, useState, useEffect } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { SearchInput, Button, Pane, Heading, Text, Select, IconButton } from \"evergreen-ui\";\nimport { Formik } from \"formik\";\nimport { useQuery, useMutation } from \"@apollo/react-hooks\";\nimport _ from \"lodash\";\n\n// app\nimport { Services, Queries, Loading } from \"../index\";\n\n//\n// Adultletics Admin / Views / Panel / Panels / Weeks / Add Workout\n//\n\n\nexport default function UpdateWeekDayWorkoutPanel ({ props }) {\n\tconst { id, title } = props;\n\n\tconst { data, loading } = useQuery( Queries.workouts.getAll );\n\tconst [ updateWeekday ] = useMutation( Queries.weeks.updateWeekday );\n\tconst { closePanel, openPanel } = useContext( Services.UI );\n\tconst [ errors, setErrors ] = useState( null );\n\tconst [ searchTerms, setSearchTerms ] = useState( \"\" );\n\tconst [ filteredWorkouts, setFilteredWorkouts ] = useState( \"\" );\n\tconst [ selectedWorkoutVersionId, setSelectedWorkoutVersionId ] = useState( \"\" );\n\n\tconst workouts = _.get( data, \"workouts\" );\n\tconst selectedWorkout = _.find( workouts, ({ versions }) => _.some( versions, [ \"id\", selectedWorkoutVersionId ]));\n\tconst selectedWorkoutId = _.get( selectedWorkout, \"id\" );\n\n\tuseEffect(() => setFilteredWorkouts( \n\t\t_.orderBy( \n\t\t\t_.map( workouts, workout => ({\n\t\t\t\t...workout,\n\t\t\t\tmatch: matchWorkout( searchTerms, workout ),\n\t\t\t})),\n\t\t), [ \"match\", \"desc\" ],\n\t), [ searchTerms, workouts ]);\n    \n\tconst _handleWorkoutAdd = () => {\n\t\tclosePanel();\n\t\tsetTimeout(() => openPanel({ panel: \"workouts/add\", size: \"wide\", props: { emit: async workoutVersionId => { \n\t\t\ttry {\n\t\t\t\tawait updateWeekday({ variables: { id, data: { _workouts_version: workoutVersionId }}});\n\t\t\t\tclosePanel();\n\t\t\t} catch ( error ) {\n\t\t\t\tconsole.error( error );\n\t\t\t\tsetErrors( error.message );\n\t\t\t}\n\t\t} }}), 200 );\n\t};\n\n\tconst _handleClearWorkout = async e => {\n\t\te.preventDefault();\n\t\tsetErrors( null );\n\t\ttry {\n\t\t\tawait updateWeekday({ variables: { id, data: { _workouts_version: null }}});\n\t\t\tclosePanel();\n\t\t} catch ( error ) {\n\t\t\tconsole.error( error );\n\t\t\tsetErrors( error.message );\n\t\t}\n\t};\n\n\tif ( loading ) return <Loading />;\n\n\treturn ( <>\n\t\t<Pane marginBottom={ 56 } display=\"flex\" justifyContent=\"space-between\">\n\t\t\t<Heading size={ 600 }>Updating Workout for { title }</Heading>\n\t\t\t<Button marginLeft={ 8 } iconBefore=\"plus\" onClick={ _handleWorkoutAdd }>Create workout</Button>\n\t\t</Pane>\n\t\t<Formik\n\t\t\tinitialValues={{}}\n\t\t\tonSubmit={ async () => {\n\t\t\t\tsetErrors( null );\n\t\t\t\ttry {\n\t\t\t\t\tawait updateWeekday({ variables: { id, data: { _workouts_version: selectedWorkoutVersionId }}});\n\t\t\t\t\tclosePanel();\n\t\t\t\t} catch ( error ) {\n\t\t\t\t\tconsole.error( error );\n\t\t\t\t\tsetErrors( error.message );\n\t\t\t\t}\n\t\t\t}}\n\t\t>{\n\t\t\t\t({ handleSubmit, isSubmitting }) => {\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t<form>\n\t\t\t\t\t\t\t\t<Pane marginBottom={ 48 }>\n\t\t\t\t\t\t\t\t\t<SearchInput placeholder=\"Filter available workouts on title and type\" width=\"100%\" onChange={ e => setSearchTerms( e.target.value.split( \" \" )) }/>\n\t\t\t\t\t\t\t\t</Pane>\n\t\t\t\t\t\t\t\t<Pane marginBottom={ 32 }>\n\t\t\t\t\t\t\t\t\t{ !_.isEmpty( filteredWorkouts ) && _.map( filteredWorkouts, workout => \n\t\t\t\t\t\t\t\t\t\t<SearchRow \n\t\t\t\t\t\t\t\t\t\t\tkey={ workout.id } \n\t\t\t\t\t\t\t\t\t\t\tworkout={ workout } \n\t\t\t\t\t\t\t\t\t\t\tmatchSize={ _.size( searchTerms ) } \n\t\t\t\t\t\t\t\t\t\t\tonSelect={ setSelectedWorkoutVersionId }\n\t\t\t\t\t\t\t\t\t\t\tselected={ workout.id === selectedWorkoutId } \n\t\t\t\t\t\t\t\t\t\t/>, \n\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t</Pane>\n\t\t\t\t\t\t\t\t<Pane display=\"flex\" justifyContent=\"space-between\">\n\t\t\t\t\t\t\t\t\t<Button type=\"submit\" iconBefore={ isSubmitting ? \"\" : \"tick\"} isLoading={ isSubmitting } disabled={ !selectedWorkoutVersionId } onClick={ handleSubmit }>Add / Update Workout</Button>\n\t\t\t\t\t\t\t\t\t<Button iconBefore={ isSubmitting ? \"\" : \"cross\"} intent=\"danger\" isLoading={ isSubmitting } onClick={ _handleClearWorkout }>Clear Day</Button>\n\t\t\t\t\t\t\t\t\t{ errors && <p>{ errors }</p>}\n\t\t\t\t\t\t\t\t</Pane>\n\n\t\t\t\t\t\t\t</form> \n\t\t\t\t\t\t</>\n\t\t\t\t\t);\n\t\t\t\t}}\n\t\t</Formik>\n\t</> );\n}\nUpdateWeekDayWorkoutPanel.propTypes = {\n\tprops: PropTypes.object,\n\tid: PropTypes.string,\n\ttitle: PropTypes.string,\n};\n\nconst matchWorkout = ( searchTerms, workout ) => {\n\tconst { title, type } = workout;\n\tconst terms = _.map( searchTerms, term => _.lowerCase( term ));\n\treturn _.reduce( terms, ( total, curr ) => ( _.lowerCase( title ).includes( curr ) || _.lowerCase( type ).includes( curr )) ? total + 1 : total, 0 );\n};\n\nconst getInitialSelectedState = workout => {\n\tconst versions = _.get( workout, \"versions\" );\n\tconst selectOptions = _.map( versions, ({ version_num }) => ({ label: `v${ version_num }`, value: version_num }));\n\treturn _.reduce( selectOptions, ( total, curr ) => curr.value > total ? curr.value : total, 0 );\n};\n\nconst SearchRow = ({ workout, matchSize, onSelect, selected }) => {\n\tconst [ selectedVersion, setSelectedVersion ] = useState( getInitialSelectedState( workout ));\n\tconst [ isTruncated, setIsTruncated ] = useState( true );\n\tconst title = _.get( workout, \"title\" );\n\tconst versions = _.get( workout, \"versions\" );\n\tconst match = _.get( workout, \"match\" );\n\tconst selectOptions = _.map( versions, ({ version_num }) => ({ label: `v${ version_num }`, value: version_num }));\n\t\n\tconst version = _.find( versions, [ \"version_num\", selectedVersion ]);\n\tconst versionId = _.get( version, \"id\" );\n\tconst body = isTruncated ? _.truncate( _.get( version, \"body\" ), { lenght: 100 }) : _.get( version, \"body\" );\n    \n\t// eslint-disable-next-line\n\tuseEffect(() => { if ( selected ) onSelect( versionId );}, [ versionId ]);\n\t\n\tlet colourProps;\n\tif ( selected ) {\n\t\tcolourProps = { color: \"white\", background: \"#B7D4EF\" };\n\t} else if ( match === matchSize ) {\n\t\tcolourProps = { background: \"white\" };\n\t} else {\n\t\tcolourProps = { background: \"#66788A\" };\n\t}\n\n\tconst _handleTruncateClick = e => {\n\t\te.preventDefault();\n\t\tsetIsTruncated( !isTruncated );\n\t};\n    \n\tconst _handleSelectClick = () => {\n\t\tif ( selected ) { \n\t\t\tonSelect( \"\" );\n\t\t} else {\n\t\t\tonSelect( versionId );\n\t\t}\n\t};\n\t\n\treturn (\n\t\t<Pane display=\"flex\" flexDirection=\"row\" minHeight={ 32 } marginBottom={ 16 }>\n\t\t\t<Pane display=\"flex\">\n\t\t\t\t<Select onChange={ e => setSelectedVersion( Number( e.target.value )) } defaultValue={ selectedVersion }>\n\t\t\t\t\t{ selectOptions && _.map( selectOptions, ({ value, label }) => <option key={ value } value={ value } >{ label }</option> )}\n\t\t\t\t</Select> \n\t\t\t\t<IconButton icon={ isTruncated ? \"expand-all\" : \"collapse-all\" } iconSize={ 10 } appearance=\"minimal\" onClick={ _handleTruncateClick }/>\n\t\t\t</Pane>\n\t\t\t<Pane { ...colourProps } elevation={ 1 } display=\"flex\" flex={ 1 } onClick={ _handleSelectClick } paddingLeft={ 16 } paddingRight={ 16 } paddingBottom={ isTruncated ? 0 : 16 } paddingTop={ isTruncated ? 0 : 16 }>\n\t\t\t\t<Pane display=\"flex\" alignItems=\"center\">\n\t\t\t\t\t<Heading size={ 300 } marginRight={ 16 }>{ title }</Heading>\n\t\t\t\t</Pane>\n\t\t\t\t<Pane flex={ 1 } display=\"flex\" flexDirection=\"column\" justifyContent=\"center\">\n\t\t\t\t\t{ body && _.map( body.split( \"\\n\" ), ( line, i ) => line ? <Text key={ i }>{ line }</Text> : <br key={ i } /> )}\n\t\t\t\t</Pane>\n\t\t\t</Pane>\n\t\t</Pane>\n\n\t);\n};\nSearchRow.propTypes = {\n\tworkout: PropTypes.object,\n\tmatchSize: PropTypes.number,\n\tonSelect: PropTypes.func,\n\tselected: PropTypes.bool,\n};\n","\n//\n// Adultletics Admin / Views / Panel / Panels / Index \n//\n\nimport SignIn from \"./auth/sign-in.js\";\nimport DrillsAdd from \"./drills/add\";\nimport DrillsEdit from \"./drills/edit\";\nimport DailyChallengesAdd from \"./daily-challenges/add\";\nimport DailyChallengesEdit from \"./daily-challenges/edit\";\nimport WorkoutsAdd from \"./workouts/add\";\nimport WorkoutsVersionAdd from \"./workouts/addVersion\";\nimport WorkoutsEdit from \"./workouts/edit\";\nimport WeeksAdd from \"./weeks/add\";\nimport WeeksDayWorkoutUpdate from \"./weeks/update-workout\";\n\nexport default {\n\t\"auth/sign-in\": SignIn,\n\t\"drills/add\": DrillsAdd,\n\t\"drills/edit\": DrillsEdit,\n\t\"daily-challenges/add\": DailyChallengesAdd,\n\t\"daily-challenges/edit\": DailyChallengesEdit,\n\t\"workouts/add\": WorkoutsAdd,\n\t\"workouts/add-version\": WorkoutsVersionAdd,\n\t\"workouts/edit\": WorkoutsEdit,\n\t\"weeks/add\": WeeksAdd,\n\t\"weeks/update-workout\": WeeksDayWorkoutUpdate,\n};\n\nexport { Services, Queries, constants, Loading } from \"../../../views/index\";\n","\n// deps\nimport React, { useContext, useState } from \"react\";\nimport { TextInputField, Button } from \"evergreen-ui\";\nimport { Formik } from \"formik\";\n\n// app\nimport { Services } from \"../index\";\n\n//\n// Adultletics Admin / Views / Panel / Panels / Auth / Sign In\n//\n\n\nexport default function SignInPanel () {\n\tconst { isAuthenticating, signIn } = useContext( Services.Auth );\n\tconst { closePanel } = useContext( Services.UI );\n\tconst [ errors, setErrors ] = useState( null );\n\n\treturn (\n\t\t<Formik\n\t\t\tinitialValues={{}}\n\t\t\tonSubmit={ async ({ email, password }) => {\n\t\t\t\tsetErrors( null );\n\t\t\t\ttry {\n\t\t\t\t\tawait signIn( email, password );\n\t\t\t\t\tclosePanel();\n\t\t\t\t} catch ( error ) {\n\t\t\t\t\tconsole.error( error );\n\t\t\t\t\tsetErrors( error.message );\n\t\t\t\t}\n\t\t\t}}\n\t\t>{\n\t\t\t\t({ values, handleChange, handleSubmit, isSubmitting }) => {\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<form>\n\t\t\t\t\t\t\t<TextInputField\n\t\t\t\t\t\t\t\tlabel=\"Email\"\n\t\t\t\t\t\t\t\ttype=\"email\"\n\t\t\t\t\t\t\t\tname=\"email\"\n\t\t\t\t\t\t\t\tonChange={ handleChange }\n\t\t\t\t\t\t\t\tautoFocus\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t<TextInputField\n\t\t\t\t\t\t\t\tlabel=\"Password\"\n\t\t\t\t\t\t\t\ttype=\"password\"\n\t\t\t\t\t\t\t\tname=\"password\"\n\t\t\t\t\t\t\t\tonChange={ handleChange }\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t<Button isLoading={ isAuthenticating || isSubmitting } disabled={ !values.email || !values.password } onClick={ handleSubmit }>Log In</Button>\n\t\t\t\t\t\t\t{ errors && <p>{ errors }</p>}\n\t\t\t\t\t\t</form> );\n\t\t\t\t}}\n\t\t</Formik>\n\t);\n}\n","\n// deps\nimport React, { useContext, useState } from \"react\";\nimport { Pane, Heading, TextInputField, Button, Text, Textarea, FormField } from \"evergreen-ui\";\nimport { Formik } from \"formik\";\nimport { useMutation } from \"@apollo/react-hooks\";\n\n// app\nimport { Services, Queries } from \"../index\";\n\n//\n// Adultletics Admin / Views / Panel / Panels / Drills / Add\n//\n\n\nexport default function AddDrillPanel () {\n\tconst [ insertDrill ] = useMutation( Queries.drills.add, { refetchQueries: [{ query: Queries.drills.getAll }], awaitRefetchQueries: true }); \n\tconst { closePanel } = useContext( Services.UI );\n\tconst [ errors, setErrors ] = useState( null );\n\n\treturn ( <>\n\t\t<Pane marginBottom={ 56 }>\n\t\t\t<Heading size={ 600 }>Adding a new drill</Heading>\n\t\t</Pane>\n\t\t<Formik\n\t\t\tinitialValues={{ description: \"\" }}\n\t\t\tonSubmit={ async data => {\n\t\t\t\tsetErrors( null );\n\t\t\t\ttry {\n\t\t\t\t\tawait insertDrill({ variables: { objects: [ data ]}});\n\t\t\t\t\tclosePanel();\n\t\t\t\t} catch ( error ) {\n\t\t\t\t\tconsole.error( error );\n\t\t\t\t\tsetErrors( error.message );\n\t\t\t\t}\n\t\t\t}}\n\t\t>{\n\t\t\t\t({ values, dirty, handleChange, handleSubmit, isSubmitting }) => {\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t<form>\n\t\t\t\t\t\t\t\t<TextInputField\n\t\t\t\t\t\t\t\t\tlabel=\"Title\"\n\t\t\t\t\t\t\t\t\tname=\"title\"\n\t\t\t\t\t\t\t\t\tonChange={ handleChange }\n\t\t\t\t\t\t\t\t\tautoFocus\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t<TextInputField\n\t\t\t\t\t\t\t\t\tlabel=\"Url to include on weekly workout download\"\n\t\t\t\t\t\t\t\t\tname=\"url\"\n\t\t\t\t\t\t\t\t\tvalue={ values.url }\n\t\t\t\t\t\t\t\t\tplaceholder=\"https://youtu.be/nPMB8PZE9F8\"\n\t\t\t\t\t\t\t\t\tonChange={ handleChange }\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t<TextInputField\n\t\t\t\t\t\t\t\t\tlabel=\"Url to include the video in this Admin Portal (see below on how-to find)\"\n\t\t\t\t\t\t\t\t\tname=\"embed_url\"\n\t\t\t\t\t\t\t\t\tvalue={ values.embed_url }\n\t\t\t\t\t\t\t\t\tplaceholder=\"https://www.youtube-nocookie.com/embed/nPMB8PZE9F8\"\n\t\t\t\t\t\t\t\t\tonChange={ handleChange }\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t<FormField label=\"Workout Description\" marginBottom={ 16 }>\n\t\t\t\t\t\t\t\t\t<Textarea\n\t\t\t\t\t\t\t\t\t\tname=\"description\"\n\t\t\t\t\t\t\t\t\t\tonChange={ handleChange }\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</FormField>\n\t\t\t\t\t\t\t\t<Button iconBefore={ isSubmitting ? \"\" : \"tick\"} isLoading={ isSubmitting } disabled={ !dirty || !values.title || !values.url } onClick={ handleSubmit }>Add</Button>\n\t\t\t\t\t\t\t\t{ errors && <p>{ errors }</p>}\n\t\t\t\t\t\t\t</form> \n\t\t\t\t\t\t\t<Pane marginTop={ 24 }>\n\t\t\t\t\t\t\t\t<Text>To find embed URL: go to the YouTube page, click on Share just below the video display, click on Embed in the pop-up, then select \"Enable privacy-enhanced mode\" and finally copy the quoted part of the text following \"src=\" in the text to the right, should look something like \"https://www.youtube-nocookie.com/embed/nPMB8PZE9F8\"</Text>\n\t\t\t\t\t\t\t</Pane>\n\t\t\t\t\t\t</>\n\t\t\t\t\t);\n\t\t\t\t}}\n\t\t</Formik>\n\t</> );\n}\n","\n// deps\nimport React, { useContext, useState } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { Pane, Heading, TextInputField, Button, Text, Textarea, FormField } from \"evergreen-ui\";\nimport { Formik } from \"formik\";\nimport { useQuery, useMutation } from \"@apollo/react-hooks\";\nimport _ from \"lodash\";\n\n// app\nimport { Services, Queries } from \"../index\";\n\n//\n// Adultletics Admin / Views / Panel / Panels / Drills / Edit\n//\n\n\nexport default function EditDrillPanel ({ props }) {\n\tconst { id } = props;\n\tconst { data, loading } = useQuery( Queries.drills.getOne, { variables: { id }});\n\tconst [ updateDrill ] = useMutation( Queries.drills.update, { refetchQueries: [{ query: Queries.drills.getOne, variables: { id }}], awaitRefetchQueries: true }); \n\tconst { closePanel } = useContext( Services.UI );\n\tconst [ errors, setErrors ] = useState( null );\n\n\tif ( loading ) return null;\n    \n\tconst drill = _.get( data, \"drills_by_pk\" );\n\tconst title = _.get( drill, \"title\" );\n\tconst url = _.get( drill, \"url\" );\n\tconst embed_url = _.get( drill, \"embed_url\" );\n\tconst description = _.get( drill, \"description\" );\n    \n\treturn ( <>\n\t\t<Pane marginBottom={ 56 }>\n\t\t\t<Heading size={ 600 }>Editing challenge: { title }</Heading>\n\t\t</Pane>\n\t\t<Formik\n\t\t\tinitialValues={{ title, url, embed_url, description: _.isNull( description ) ? \"\" : description }}\n\t\t\tonSubmit={ async data => {\n\t\t\t\tsetErrors( null );\n\t\t\t\ttry {\n\t\t\t\t\tawait updateDrill({ variables: { id, data }});\n\t\t\t\t\tclosePanel();\n\t\t\t\t} catch ( error ) {\n\t\t\t\t\tconsole.error( error );\n\t\t\t\t\tsetErrors( error.message );\n\t\t\t\t}\n\t\t\t}}\n\t\t\tenableReinitialize={ true }\n\t\t>{\n\t\t\t\t({ values, dirty, handleChange, handleSubmit, isSubmitting }) => {\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t<form>\n\t\t\t\t\t\t\t\t<TextInputField\n\t\t\t\t\t\t\t\t\tlabel=\"Title\"\n\t\t\t\t\t\t\t\t\tname=\"title\"\n\t\t\t\t\t\t\t\t\tvalue={ values.title }\n\t\t\t\t\t\t\t\t\tonChange={ handleChange }\n\t\t\t\t\t\t\t\t\tautoFocus\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t<TextInputField\n\t\t\t\t\t\t\t\t\tlabel=\"Url to include on weekly workout download\"\n\t\t\t\t\t\t\t\t\tname=\"url\"\n\t\t\t\t\t\t\t\t\tvalue={ values.url }\n\t\t\t\t\t\t\t\t\tplaceholder=\"https://youtu.be/nPMB8PZE9F8\"\n\t\t\t\t\t\t\t\t\tonChange={ handleChange }\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t<TextInputField\n\t\t\t\t\t\t\t\t\tlabel=\"Url to include on this page (see below on how-to find)\"\n\t\t\t\t\t\t\t\t\tname=\"embed_url\"\n\t\t\t\t\t\t\t\t\tvalue={ values.embed_url }\n\t\t\t\t\t\t\t\t\tplaceholder=\"https://www.youtube-nocookie.com/embed/nPMB8PZE9F8\"\n\t\t\t\t\t\t\t\t\tonChange={ handleChange }\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t<FormField label=\"Workout Description\" marginBottom={ 16 }>\n\t\t\t\t\t\t\t\t\t<Textarea\n\t\t\t\t\t\t\t\t\t\tname=\"description\"\n\t\t\t\t\t\t\t\t\t\tonChange={ handleChange }\n\t\t\t\t\t\t\t\t\t\tvalue={ values.description }\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</FormField>\n\t\t\t\t\t\t\t\t<Button iconBefore={ isSubmitting ? \"\" : \"tick\"} isLoading={ isSubmitting } disabled={ !dirty || !values.title || !values.url } onClick={ handleSubmit }>Update</Button>\n\t\t\t\t\t\t\t\t{ errors && <p>{ errors }</p>}\n\t\t\t\t\t\t\t</form> \n\t\t\t\t\t\t\t<Pane marginTop={ 24 }>\n\t\t\t\t\t\t\t\t<Text>To find embed URL: go to the YouTube page, click on Share just below the video display, click on Embed in the pop-up, then select \"Enable privacy-enhanced mode\" and finally copy the quoted part of the text following \"src=\" in the text to the right, should look something like \"https://www.youtube-nocookie.com/embed/nPMB8PZE9F8\"</Text>\n\t\t\t\t\t\t\t</Pane>\n\t\t\t\t\t\t</>\n\t\t\t\t\t);\n\t\t\t\t}}\n\t\t</Formik>\n\t</> );\n}\nEditDrillPanel.propTypes = {\n\tprops: PropTypes.object,\n\tid: PropTypes.string,\n};\n","\n// deps\nimport React, { useContext, useState } from \"react\";\nimport { Pane, Heading, TextInputField, Button, Textarea, FormField } from \"evergreen-ui\";\nimport { Formik } from \"formik\";\nimport { useMutation } from \"@apollo/react-hooks\";\n\n// app\nimport { Services, Queries } from \"../index\";\n\n//\n// Adultletics Admin / Views / Panel / Panels / Challenges / Add\n//\n\n\nexport default function AddDailyChallengePanel () {\n\tconst [ insertChallenge ] = useMutation( Queries.dailyChallenges.add, { refetchQueries: [{ query: Queries.dailyChallenges.getAll }], awaitRefetchQueries: true }); \n\tconst { closePanel } = useContext( Services.UI );\n\tconst [ errors, setErrors ] = useState( null );\n\n\treturn ( <>\n\t\t<Pane marginBottom={ 56 }>\n\t\t\t<Heading size={ 600 }>Adding a new daily challenge</Heading>\n\t\t</Pane>\n\t\t<Formik\n\t\t\tinitialValues={{ description: \"\" }}\n\t\t\tonSubmit={ async data => {\n\t\t\t\tsetErrors( null );\n\t\t\t\ttry {\n\t\t\t\t\tawait insertChallenge({ variables: { objects: [ data ]}});\n\t\t\t\t\tclosePanel();\n\t\t\t\t} catch ( error ) {\n\t\t\t\t\tconsole.error( error );\n\t\t\t\t\tsetErrors( error.message );\n\t\t\t\t}\n\t\t\t}}\n\t\t>{\n\t\t\t\t({ values, dirty, handleChange, handleSubmit, isSubmitting }) => {\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t<form>\n\t\t\t\t\t\t\t\t<TextInputField\n\t\t\t\t\t\t\t\t\tlabel=\"Title\"\n\t\t\t\t\t\t\t\t\tname=\"title\"\n\t\t\t\t\t\t\t\t\tonChange={ handleChange }\n\t\t\t\t\t\t\t\t\tautoFocus\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t<FormField label=\"Description\" marginBottom={ 16 }>\n\t\t\t\t\t\t\t\t\t<Textarea\n\t\t\t\t\t\t\t\t\t\tname=\"description\"\n\t\t\t\t\t\t\t\t\t\tonChange={ handleChange }\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</FormField>\n\t\t\t\t\t\t\t\t<Button iconBefore={ isSubmitting ? \"\" : \"tick\"} isLoading={ isSubmitting } disabled={ !dirty || !values.title || !values.description } onClick={ handleSubmit }>Add</Button>\n\t\t\t\t\t\t\t\t{ errors && <p>{ errors }</p>}\n\t\t\t\t\t\t\t</form> \n\t\t\t\t\t\t</>\n\t\t\t\t\t);\n\t\t\t\t}}\n\t\t</Formik>\n\t</> );\n}\n","\n// deps\nimport React, { useContext, useState } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { Pane, Heading, TextInputField, Button, Textarea, FormField } from \"evergreen-ui\";\nimport { Formik } from \"formik\";\nimport { useQuery, useMutation } from \"@apollo/react-hooks\";\nimport _ from \"lodash\";\n\n// app\nimport { Services, Queries } from \"../index\";\n\n//\n// Adultletics Admin / Views / Panel / Panels / Challenges / Edit\n//\n\n\nexport default function EditDailyChallengePanel ({ props }) {\n\tconst { id } = props;\n\tconst { data, loading } = useQuery( Queries.dailyChallenges.getOne, { variables: { id }});\n\tconst [ updateChallenge ] = useMutation( Queries.dailyChallenges.update, { refetchQueries: [{ query: Queries.dailyChallenges.getOne, variables: { id }}], awaitRefetchQueries: true }); \n\tconst { closePanel } = useContext( Services.UI );\n\tconst [ errors, setErrors ] = useState( null );\n\n\tif ( loading ) return null;\n    \n\tconst challenge = _.get( data, \"daily_challenges_by_pk\" );\n\tconst title = _.get( challenge, \"title\" );\n\tconst description = _.get( challenge, \"description\", \"\" );\n    \n\treturn ( <>\n\t\t<Pane marginBottom={ 56 }>\n\t\t\t<Heading size={ 600 }>Editing challenge: { title }</Heading>\n\t\t</Pane>\n\t\t<Formik\n\t\t\tinitialValues={{ title, description: _.isNull( description ) ? \"\" : description }}\n\t\t\tonSubmit={ async data => {\n\t\t\t\tsetErrors( null );\n\t\t\t\ttry {\n\t\t\t\t\tawait updateChallenge({ variables: { id, data }});\n\t\t\t\t\tclosePanel();\n\t\t\t\t} catch ( error ) {\n\t\t\t\t\tconsole.error( error );\n\t\t\t\t\tsetErrors( error.message );\n\t\t\t\t}\n\t\t\t}}\n\t\t\tenableReinitialize={ true }\n\t\t>{\n\t\t\t\t({ values, dirty, handleChange, handleSubmit, isSubmitting }) => {\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t<form>\n\t\t\t\t\t\t\t\t<TextInputField\n\t\t\t\t\t\t\t\t\tlabel=\"Title\"\n\t\t\t\t\t\t\t\t\tname=\"title\"\n\t\t\t\t\t\t\t\t\tvalue={ values.title }\n\t\t\t\t\t\t\t\t\tonChange={ handleChange }\n\t\t\t\t\t\t\t\t\tautoFocus\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t<FormField label=\"Description\" marginBottom={ 16 }>\n\t\t\t\t\t\t\t\t\t<Textarea\n\t\t\t\t\t\t\t\t\t\tname=\"description\"\n\t\t\t\t\t\t\t\t\t\tonChange={ handleChange }\n\t\t\t\t\t\t\t\t\t\tvalue={ values.description }\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</FormField>\n\t\t\t\t\t\t\t\t<Button iconBefore={ isSubmitting ? \"\" : \"tick\"} isLoading={ isSubmitting } disabled={ !dirty || !values.title || !values.description } onClick={ handleSubmit }>Update</Button>\n\t\t\t\t\t\t\t\t{ errors && <p>{ errors }</p>}\n\t\t\t\t\t\t\t</form> \n\t\t\t\t\t\t</>\n\t\t\t\t\t);\n\t\t\t\t}}\n\t\t</Formik>\n\t</> );\n}\nEditDailyChallengePanel.propTypes = {\n\tprops: PropTypes.object,\n\tid: PropTypes.string,\n};\n","\n// deps\nimport React, { useContext, useState } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { Radio, Select, TextInputField, Textarea, FormField, Button, Pane, Heading, Text, IconButton, Paragraph } from \"evergreen-ui\";\nimport { Formik } from \"formik\";\nimport { useMutation, useQuery } from \"@apollo/react-hooks\";\nimport _ from \"lodash\";\nimport { useHistory } from \"react-router-dom\";\n\n// app\nimport { Services, Queries, constants, Loading } from \"../index\";\n\n//\n// Adultletics Admin / Views / Panel / Panels / Workouts / Add\n//\n\n\nexport default function AddWorkoutPanel ({ props }) {\n\tconst { emit } = props;\n\tconst { data: drillsData, loading: drillsLoading } = useQuery( Queries.drills.getAll );\n\tconst [ addVersion ] = useMutation( Queries.workouts.addVersion, { refetchQueries: [{ query: Queries.workouts.getAll }], awaitRefetchQueries: true }); \n\tconst { authUser } = useContext( Services.Auth );\n\tconst { closePanel } = useContext( Services.UI );\n\tconst [ errors, setErrors ] = useState( null );\n\tconst [ selectedDrills, setSelectedDrills ] = useState([]);\n\tconst { intensityOptions, workoutTypes } = constants;\n\tconst history = useHistory();\n    \n\tconst allDrills = _.get( drillsData, \"drills\" );\n\tconst unselectedDrills = _.filter( allDrills, drill => !_.some( selectedDrills, [ \"id\", drill.id ]));\n\n\tif ( drillsLoading ) return <Loading />;\n\n\treturn (\n\t\t<>\n\t\t\t<Pane marginBottom={ 56 }>\n\t\t\t\t<Heading size={ 600 }>Adding a new workout</Heading>\n\t\t\t</Pane>\n\t\t\t<Formik\n\t\t\t\tinitialValues={{ running_km: 0, running_minutes: 0, intensity: \"3\" }}\n\t\t\t\tonSubmit={ async ({ title, body, stats, intensity, type }) => {\n\t\t\t\t\tsetErrors( null );\n\t\t\t\t\ttry {\n\t\t\t\t\t\tconst drills_insert_data = _.map( selectedDrills, ({ id }) => ({ _drill: id }));\n\t\t\t\t\t\tconst res = await addVersion({ variables: { objects: [{\n\t\t\t\t\t\t\tversion_num: 1,\n\t\t\t\t\t\t\t_owner: authUser.id,\n\t\t\t\t\t\t\tbody,\n\t\t\t\t\t\t\tworkout: {\n\t\t\t\t\t\t\t\tdata: {\n\t\t\t\t\t\t\t\t\ttitle, type,\n\t\t\t\t\t\t\t\t\tintensity,\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tstats: {\n\t\t\t\t\t\t\t\tdata: stats,\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tdrills: {\n\t\t\t\t\t\t\t\tdata: drills_insert_data,\n\t\t\t\t\t\t\t},\n\n\t\t\t\t\t\t}]}});\n\t\t\t\t\t\tclosePanel();\n\t\t\t\t\t\tconst versionId = _.get( res, \"data.insert_workouts_versions.returning[0].id\" );\n\t\t\t\t\t\tconst workoutId = _.get( res, \"data.insert_workouts_versions.returning[0].workout.id\" );\n\t\t\t\t\t\tif ( emit ) emit( versionId );\n\t\t\t\t\t\tif ( !emit ) history.push( `/workouts/${ workoutId }` );\n\t\t\t\t\t} catch ( error ) {\n\t\t\t\t\t\tconsole.error( error );\n\t\t\t\t\t\tsetErrors( error.message );\n\t\t\t\t\t}\n\t\t\t\t}}\n\t\t\t>{\n\t\t\t\t\t({ values, dirty, handleChange, handleSubmit, isSubmitting, setFieldValue }) => {\n\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t<form>\n\t\t\t\t\t\t\t\t\t<TextInputField\n\t\t\t\t\t\t\t\t\t\tlabel=\"Workout Title\"\n\t\t\t\t\t\t\t\t\t\tname=\"title\"\n\t\t\t\t\t\t\t\t\t\tonChange={ handleChange }\n\t\t\t\t\t\t\t\t\t\tautoFocus\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t<FormField label=\"Workout Intensity\" onChange={ e => setFieldValue( \"intensity\", e.target.value ) } marginBottom={ 16 }>\n\t\t\t\t\t\t\t\t\t\t<Pane display=\"flex\" flexDirection=\"row\" justifyContent=\"space-between\">\n\t\t\t\t\t\t\t\t\t\t\t{ _.map( intensityOptions, ({ label, value }) => (\n\t\t\t\t\t\t\t\t\t\t\t\t<Radio key={ value } name=\"intensity\" value={ value } label={ label } checked={ value === values.intensity } />\n\t\t\t\t\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t\t\t\t\t</Pane>\n\t\t\t\t\t\t\t\t\t</FormField>\n\t\t\t\t\t\t\t\t\t<FormField label=\"Workout Type\" marginBottom={ 16 }>\n\t\t\t\t\t\t\t\t\t\t<Select name=\"type\" value={ values.type } onChange={ handleChange } height={ 32 } >\n\t\t\t\t\t\t\t\t\t\t\t<option key=\"empty\" value=\"\">Please select an option...</option>\n\t\t\t\t\t\t\t\t\t\t\t{ workoutTypes && _.map( workoutTypes, ({ value, label }) => ( <option key={ value } value={ value }>{ label }</option> ))}\n\t\t\t\t\t\t\t\t\t\t</Select>\n\t\t\t\t\t\t\t\t\t</FormField>\n\t\t\t\t\t\t\t\t\t<FormField label=\"Add Drills to Workout\" marginBottom={ 16 }>\n\t\t\t\t\t\t\t\t\t\t<Pane marginBottom={ 8 } display=\"flex\" justifyContent=\"space-between\">\n\t\t\t\t\t\t\t\t\t\t\t<Select name=\"drill\" value={ values.drill } onChange={ handleChange } height={ 32 }>\n\t\t\t\t\t\t\t\t\t\t\t\t<option key=\"empty\" value=\"\">Please select an option...</option>\n\t\t\t\t\t\t\t\t\t\t\t\t{ unselectedDrills && _.map( unselectedDrills, ({ id, title }) => ( <option key={ id } value={ id }>{ title }</option> ))}\n\t\t\t\t\t\t\t\t\t\t\t</Select>\n\t\t\t\t\t\t\t\t\t\t\t<Button \n\t\t\t\t\t\t\t\t\t\t\t\ticonBefore=\"tick\"\n\t\t\t\t\t\t\t\t\t\t\t\tdisabled={ !values.drill } \n\t\t\t\t\t\t\t\t\t\t\t\tonClick={ e => {\n\t\t\t\t\t\t\t\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t\t\t\t\t\t\t\t\tsetSelectedDrills([ ...selectedDrills, _.find( allDrills, [ \"id\", values.drill ]) ]); \n\t\t\t\t\t\t\t\t\t\t\t\t}} \n\t\t\t\t\t\t\t\t\t\t\t\tmarginRight={ 8 } \n\t\t\t\t\t\t\t\t\t\t\t\tmarginLeft={ 8 }>Attach drill\n\t\t\t\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t\t\t\t</Pane>\n\t\t\t\t\t\t\t\t\t\t<Pane>\n\t\t\t\t\t\t\t\t\t\t\t{ errors && <p>{ errors }</p>}\n\t\t\t\t\t\t\t\t\t\t</Pane>\n\t\t\t\t\t\t\t\t\t</FormField>\n\t\t\t\t\t\t\t\t\t<FormField label=\"Selected Drills\" marginBottom={ 16 }>\n\t\t\t\t\t\t\t\t\t\t<Pane>\n\t\t\t\t\t\t\t\t\t\t\t{ !_.isEmpty( selectedDrills ) ? _.map( selectedDrills, ({ id, title }) => (\n\t\t\t\t\t\t\t\t\t\t\t\t<Pane display=\"flex\" flexDirection=\"row\" elevation={ 1 } height={ 32 } alignItems=\"center\" background=\"white\" marginBottom={ 16 } key={ id } paddingLeft={ 16 } paddingRight={ 8 }>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Text flex={ 1 }>{ title }</Text>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<IconButton icon=\"small-cross\" intent=\"danger\" appearance=\"minimal\" onClick={ e => {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tsetSelectedDrills( _.filter( selectedDrills, drill => drill.id !== id ));\n\t\t\t\t\t\t\t\t\t\t\t\t\t}}/> \n\t\t\t\t\t\t\t\t\t\t\t\t</Pane> )) : <Paragraph marginBottom={ 16 } >No drills selected</Paragraph>}\n\t\t\t\t\t\t\t\t\t\t</Pane>\n\t\t\t\t\t\t\t\t\t</FormField>\n\t\t\t\t\t\t\t\t\t<FormField label=\"Workout Description\" marginBottom={ 16 }>\n\t\t\t\t\t\t\t\t\t\t<Textarea\n\t\t\t\t\t\t\t\t\t\t\tname=\"body\"\n\t\t\t\t\t\t\t\t\t\t\tonChange={ handleChange }\n\t\t\t\t\t\t\t\t\t\t\trows={ 24 }\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t</FormField>\n\t\t\t\t\t\t\t\t\t<FormField label=\"Stats\" marginBottom={ 16 }>\n\t\t\t\t\t\t\t\t\t\t<table className=\"stats-input-table\">\n\t\t\t\t\t\t\t\t\t\t\t<thead>\n\t\t\t\t\t\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<th></th>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<th colSpan={ 2 }><Heading size={ 200 }>5/10km</Heading></th>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<th colSpan={ 2 }><Heading size={ 200 }>half/ultra</Heading></th>\n\t\t\t\t\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t\t\t\t</thead>\n\t\t\t\t\t\t\t\t\t\t\t<tbody>\n\t\t\t\t\t\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<td><Heading size={ 200 }>Beginner</Heading></td>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<td><TextInputField\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tlabel=\"km\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tname=\"stats.running_km_beginner_short\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\ttype=\"number\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tonChange={ handleChange }\n\t\t\t\t\t\t\t\t\t\t\t\t\t/></td>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<td><TextInputField\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tlabel=\"mins\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tname=\"stats.running_minutes_beginner_short\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\ttype=\"number\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tonChange={ handleChange }\n\t\t\t\t\t\t\t\t\t\t\t\t\t/></td>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<td><TextInputField\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tlabel=\"km\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tname=\"stats.running_km_beginner_long\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\ttype=\"number\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tonChange={ handleChange }\n\t\t\t\t\t\t\t\t\t\t\t\t\t/></td>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<td><TextInputField\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tlabel=\"mins\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tname=\"stats.running_minutes_beginner_long\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\ttype=\"number\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tonChange={ handleChange }\n\t\t\t\t\t\t\t\t\t\t\t\t\t/></td>\n\t\t\t\t\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<td><Heading size={ 200 }>Intermediate</Heading></td>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<td><TextInputField\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tlabel=\"km\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tname=\"stats.running_km_intermediate_short\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\ttype=\"number\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tonChange={ handleChange }\n\t\t\t\t\t\t\t\t\t\t\t\t\t/></td>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<td><TextInputField\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tlabel=\"mins\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tname=\"stats.running_minutes_intermediate_short\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\ttype=\"number\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tonChange={ handleChange }\n\t\t\t\t\t\t\t\t\t\t\t\t\t/></td>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<td><TextInputField\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tlabel=\"km\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tname=\"stats.running_km_intermediate_long\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\ttype=\"number\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tonChange={ handleChange }\n\t\t\t\t\t\t\t\t\t\t\t\t\t/></td>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<td><TextInputField\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tlabel=\"mins\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tname=\"stats.running_minutes_intermediate_long\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\ttype=\"number\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tonChange={ handleChange }\n\t\t\t\t\t\t\t\t\t\t\t\t\t/></td>\n\t\t\t\t\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<td><Heading size={ 200 }>Advanced</Heading></td>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<td><TextInputField\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tlabel=\"km\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tname=\"stats.running_km_advanced_short\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\ttype=\"number\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tonChange={ handleChange }\n\t\t\t\t\t\t\t\t\t\t\t\t\t/></td>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<td><TextInputField\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tlabel=\"mins\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tname=\"stats.running_minutes_advanced_short\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\ttype=\"number\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tonChange={ handleChange }\n\t\t\t\t\t\t\t\t\t\t\t\t\t/></td>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<td><TextInputField\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tlabel=\"km\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tname=\"stats.running_km_advanced_long\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\ttype=\"number\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tonChange={ handleChange }\n\t\t\t\t\t\t\t\t\t\t\t\t\t/></td>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<td><TextInputField\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tlabel=\"mins\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tname=\"stats.running_minutes_advanced_long\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\ttype=\"number\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tonChange={ handleChange }\n\t\t\t\t\t\t\t\t\t\t\t\t\t/></td>\n\t\t\t\t\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t\t\t\t</tbody>\n\t\t\t\t\t\t\t\t\t\t</table>\n\t\t\t\t\t\t\t\t\t</FormField>\n\t\t\t\t\t\t\t\t\t<Button iconBefore={ isSubmitting ? \"\" : \"tick\"} isLoading={ isSubmitting } disabled={ !dirty || !values.title } onClick={ handleSubmit }>Add</Button>\n\t\t\t\t\t\t\t\t\t{ errors && <p>{ errors }</p>}\n\t\t\t\t\t\t\t\t</form> \n\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t);\n\t\t\t\t\t}}\n\t\t\t</Formik>\n\t\t</> );\n}\nAddWorkoutPanel.propTypes = {\n\tprops: PropTypes.object,\n\temit: PropTypes.func,\n};","\n// deps\nimport React, { useContext, useState, useEffect } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { Heading, Pane, TextInputField, Textarea, FormField, Button,Text, Select, IconButton, Paragraph } from \"evergreen-ui\";\nimport { Formik } from \"formik\";\nimport { useQuery, useMutation } from \"@apollo/react-hooks\";\nimport _ from \"lodash\";\n\n// app\nimport { Services, Queries, Loading } from \"../index\";\n\n//\n// Adultletics Admin / Views / Panel / Panels / Workouts / Add Version\n//\n\n\nexport default function AddWorkoutVersionPanel ({ props }) {\n\tconst { id, workoutId, emit } = props;\n\tconst { data: workoutData, loading: workoutLoading } = useQuery( Queries.workouts.getOne, { variables: { id: workoutId }});\n\tconst { data: drillsData, loading: drillsLoading } = useQuery( Queries.drills.getAll );\n\tconst { data, loading } = useQuery( Queries.workouts.getVersion, { variables: { id }});\n\tconst [ addVersion ] = useMutation( Queries.workouts.addVersion ); \n\tconst [ selectedDrills, setSelectedDrills ] = useState([]);\n\tconst { closePanel } = useContext( Services.UI );\n\tconst { authUser } = useContext( Services.Auth );\n\tconst [ errors, setErrors ] = useState( null );\n\n\tconst version = _.get( data, \"workouts_versions_by_pk\" );\n\tuseEffect(() => setSelectedDrills( _.map( _.get( version, \"drills\", []), \"drill\" )), [ version ]);\n\n\tif ( loading || workoutLoading || drillsLoading ) return <Loading />;\n\n\tconst highestExistingVersion = _.reduce( _.get( workoutData, \"workouts_by_pk.versions\" ), ( total, curr ) => curr.version_num > total ? curr.version_num : total, 0 );\n\tconst newVersionNum = highestExistingVersion + 1;\n\n\tconst initialValues = {\n\t\tbody: _.get( version, \"body\" ),\n\t\trunning_km: _.get( version, \"stats.running_km\", 0 ),\n\t\trunning_minutes: _.get( version, \"stats.running_minutes\", 0 ),\n\t};\n    \n\tconst allDrills = _.get( drillsData, \"drills\" );\n\tconst unselectedDrills = _.filter( allDrills, drill => !_.some( selectedDrills, [ \"id\", drill.id ]));\n    \n\treturn ( <>\n\t\t<Pane marginBottom={ 56 }>\n\t\t\t<Heading size={ 600 }>Adding a new version of workout: { _.get( version, \"workout.title\", \"\" ) }</Heading>\n\t\t</Pane>\n\t\t<Formik\n\t\t\tinitialValues={{ ...initialValues }}\n\t\t\tonSubmit={ async ({ body, stats }) => {\n\t\t\t\tsetErrors( null );\n\t\t\t\ttry {\n\t\t\t\t\tconst drills_insert_data = _.map( selectedDrills, ({ id }) => ({ _drill: id }));\n\t\t\t\t\tconst res = await addVersion({ variables: { objects: [{\n\t\t\t\t\t\tbody, \n\t\t\t\t\t\tversion_num: newVersionNum,\n\t\t\t\t\t\t_workout: workoutId,\n\t\t\t\t\t\t_owner: authUser.id,\n\t\t\t\t\t\tstats: {\n\t\t\t\t\t\t\tdata: stats,\n\t\t\t\t\t\t},\n\t\t\t\t\t\tdrills: {\n\t\t\t\t\t\t\tdata: drills_insert_data,\n\t\t\t\t\t\t},\n\t\t\t\t\t}]}});\n\t\t\t\t\tclosePanel();\n\t\t\t\t\tconst id = _.get( res, \"data.insert_workouts_versions.returning[0].id\" );\n\t\t\t\t\tif ( emit ) emit( id );\n\t\t\t\t} catch ( error ) {\n\t\t\t\t\tconsole.error( error );\n\t\t\t\t\tsetErrors( error.message );\n\t\t\t\t}\n\t\t\t}}\n\t\t>{\n\t\t\t\t({ values, dirty, handleChange, handleSubmit, isSubmitting }) => {\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t<form>\n\t\t\t\t\t\t\t\t<FormField label=\"Workout Description\" marginBottom={ 8 }>\n\t\t\t\t\t\t\t\t\t<Textarea\n\t\t\t\t\t\t\t\t\t\tname=\"body\"\n\t\t\t\t\t\t\t\t\t\tvalue={ values.body }\n\t\t\t\t\t\t\t\t\t\tonChange={ handleChange }\n\t\t\t\t\t\t\t\t\t\trows={ 24 }\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</FormField>\n\t\t\t\t\t\t\t\t<FormField label=\"Add Drills\" marginBottom={ 16 }>\n\t\t\t\t\t\t\t\t\t<Pane marginBottom={ 8 } display=\"flex\" justifyContent=\"space-between\">\n\t\t\t\t\t\t\t\t\t\t<Select name=\"drill\" value={ values.drill } onChange={ handleChange } height={ 32 }>\n\t\t\t\t\t\t\t\t\t\t\t<option key=\"empty\" value=\"\">Please select an option...</option>\n\t\t\t\t\t\t\t\t\t\t\t{ unselectedDrills && _.map( unselectedDrills, ({ id, title }) => ( <option key={ id } value={ id }>{ title }</option> ))}\n\t\t\t\t\t\t\t\t\t\t</Select>\n\t\t\t\t\t\t\t\t\t\t<Button \n\t\t\t\t\t\t\t\t\t\t\ticonBefore=\"tick\"\n\t\t\t\t\t\t\t\t\t\t\tdisabled={ !values.drill } \n\t\t\t\t\t\t\t\t\t\t\tonClick={ e => {\n\t\t\t\t\t\t\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t\t\t\t\t\t\t\tsetSelectedDrills([ ...selectedDrills, _.find( allDrills, [ \"id\", values.drill ]) ]); \n\t\t\t\t\t\t\t\t\t\t\t}} \n\t\t\t\t\t\t\t\t\t\t\tmarginRight={ 8 } \n\t\t\t\t\t\t\t\t\t\t\tmarginLeft={ 8 }>Attach drill\n\t\t\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t\t\t</Pane>\n\t\t\t\t\t\t\t\t\t<Pane>\n\t\t\t\t\t\t\t\t\t\t{ errors && <p>{ errors }</p>}\n\t\t\t\t\t\t\t\t\t</Pane>\n\t\t\t\t\t\t\t\t</FormField>\n\t\t\t\t\t\t\t\t<FormField label=\"Selected drills\" marginBottom={ 16 }>\n\t\t\t\t\t\t\t\t\t<Pane>\n\t\t\t\t\t\t\t\t\t\t{ !_.isEmpty( selectedDrills ) ? _.map( selectedDrills, ({ id, title }) => (\n\t\t\t\t\t\t\t\t\t\t\t<Pane display=\"flex\" flexDirection=\"row\" elevation={ 1 } height={ 32 } alignItems=\"center\" background=\"white\" marginBottom={ 16 } key={ id } paddingLeft={ 16 } paddingRight={ 8 }>\n\t\t\t\t\t\t\t\t\t\t\t\t<Text flex={ 1 }>{ title }</Text>\n\t\t\t\t\t\t\t\t\t\t\t\t<IconButton icon=\"small-cross\" intent=\"danger\" appearance=\"minimal\" onClick={ e => {\n\t\t\t\t\t\t\t\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t\t\t\t\t\t\t\t\tsetSelectedDrills( _.filter( selectedDrills, drill => drill.id !== id ));\n\t\t\t\t\t\t\t\t\t\t\t\t}}/> \n\t\t\t\t\t\t\t\t\t\t\t</Pane> )) : <Paragraph marginBottom={ 16 } >No drills selected</Paragraph>}\n\t\t\t\t\t\t\t\t\t</Pane>\n\t\t\t\t\t\t\t\t</FormField>\n\t\t\t\t\t\t\t\t<FormField label=\"Stats\" marginBottom={ 16 }>\n\t\t\t\t\t\t\t\t\t<table className=\"stats-input-table\">\n\t\t\t\t\t\t\t\t\t\t<thead>\n\t\t\t\t\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t\t\t\t\t<th></th>\n\t\t\t\t\t\t\t\t\t\t\t\t<th colSpan={ 2 }><Heading size={ 200 }>5/10km</Heading></th>\n\t\t\t\t\t\t\t\t\t\t\t\t<th colSpan={ 2 }><Heading size={ 200 }>half/ultra</Heading></th>\n\t\t\t\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t\t\t</thead>\n\t\t\t\t\t\t\t\t\t\t<tbody>\n\t\t\t\t\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t\t\t\t\t<td><Heading size={ 200 }>Beginner</Heading></td>\n\t\t\t\t\t\t\t\t\t\t\t\t<td><TextInputField\n\t\t\t\t\t\t\t\t\t\t\t\t\tlabel=\"km\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tname=\"stats.running_km_beginner_short\"\n\t\t\t\t\t\t\t\t\t\t\t\t\ttype=\"number\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tonChange={ handleChange }\n\t\t\t\t\t\t\t\t\t\t\t\t/></td>\n\t\t\t\t\t\t\t\t\t\t\t\t<td><TextInputField\n\t\t\t\t\t\t\t\t\t\t\t\t\tlabel=\"mins\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tname=\"stats.running_minutes_beginner_short\"\n\t\t\t\t\t\t\t\t\t\t\t\t\ttype=\"number\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tonChange={ handleChange }\n\t\t\t\t\t\t\t\t\t\t\t\t/></td>\n\t\t\t\t\t\t\t\t\t\t\t\t<td><TextInputField\n\t\t\t\t\t\t\t\t\t\t\t\t\tlabel=\"km\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tname=\"stats.running_km_beginner_long\"\n\t\t\t\t\t\t\t\t\t\t\t\t\ttype=\"number\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tonChange={ handleChange }\n\t\t\t\t\t\t\t\t\t\t\t\t/></td>\n\t\t\t\t\t\t\t\t\t\t\t\t<td><TextInputField\n\t\t\t\t\t\t\t\t\t\t\t\t\tlabel=\"mins\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tname=\"stats.running_minutes_beginner_long\"\n\t\t\t\t\t\t\t\t\t\t\t\t\ttype=\"number\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tonChange={ handleChange }\n\t\t\t\t\t\t\t\t\t\t\t\t/></td>\n\t\t\t\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t\t\t\t\t<td><Heading size={ 200 }>Intermediate</Heading></td>\n\t\t\t\t\t\t\t\t\t\t\t\t<td><TextInputField\n\t\t\t\t\t\t\t\t\t\t\t\t\tlabel=\"km\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tname=\"stats.running_km_intermediate_short\"\n\t\t\t\t\t\t\t\t\t\t\t\t\ttype=\"number\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tonChange={ handleChange }\n\t\t\t\t\t\t\t\t\t\t\t\t/></td>\n\t\t\t\t\t\t\t\t\t\t\t\t<td><TextInputField\n\t\t\t\t\t\t\t\t\t\t\t\t\tlabel=\"mins\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tname=\"stats.running_minutes_intermediate_short\"\n\t\t\t\t\t\t\t\t\t\t\t\t\ttype=\"number\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tonChange={ handleChange }\n\t\t\t\t\t\t\t\t\t\t\t\t/></td>\n\t\t\t\t\t\t\t\t\t\t\t\t<td><TextInputField\n\t\t\t\t\t\t\t\t\t\t\t\t\tlabel=\"km\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tname=\"stats.running_km_intermediate_long\"\n\t\t\t\t\t\t\t\t\t\t\t\t\ttype=\"number\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tonChange={ handleChange }\n\t\t\t\t\t\t\t\t\t\t\t\t/></td>\n\t\t\t\t\t\t\t\t\t\t\t\t<td><TextInputField\n\t\t\t\t\t\t\t\t\t\t\t\t\tlabel=\"mins\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tname=\"stats.running_minutes_intermediate_long\"\n\t\t\t\t\t\t\t\t\t\t\t\t\ttype=\"number\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tonChange={ handleChange }\n\t\t\t\t\t\t\t\t\t\t\t\t/></td>\n\t\t\t\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t\t\t\t\t<td><Heading size={ 200 }>Advanced</Heading></td>\n\t\t\t\t\t\t\t\t\t\t\t\t<td><TextInputField\n\t\t\t\t\t\t\t\t\t\t\t\t\tlabel=\"km\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tname=\"stats.running_km_advanced_short\"\n\t\t\t\t\t\t\t\t\t\t\t\t\ttype=\"number\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tonChange={ handleChange }\n\t\t\t\t\t\t\t\t\t\t\t\t/></td>\n\t\t\t\t\t\t\t\t\t\t\t\t<td><TextInputField\n\t\t\t\t\t\t\t\t\t\t\t\t\tlabel=\"mins\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tname=\"stats.running_minutes_advanced_short\"\n\t\t\t\t\t\t\t\t\t\t\t\t\ttype=\"number\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tonChange={ handleChange }\n\t\t\t\t\t\t\t\t\t\t\t\t/></td>\n\t\t\t\t\t\t\t\t\t\t\t\t<td><TextInputField\n\t\t\t\t\t\t\t\t\t\t\t\t\tlabel=\"km\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tname=\"stats.running_km_advanced_long\"\n\t\t\t\t\t\t\t\t\t\t\t\t\ttype=\"number\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tonChange={ handleChange }\n\t\t\t\t\t\t\t\t\t\t\t\t/></td>\n\t\t\t\t\t\t\t\t\t\t\t\t<td><TextInputField\n\t\t\t\t\t\t\t\t\t\t\t\t\tlabel=\"mins\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tname=\"stats.running_minutes_advanced_long\"\n\t\t\t\t\t\t\t\t\t\t\t\t\ttype=\"number\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tonChange={ handleChange }\n\t\t\t\t\t\t\t\t\t\t\t\t/></td>\n\t\t\t\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t\t\t</tbody>\n\t\t\t\t\t\t\t\t\t</table>\n\t\t\t\t\t\t\t\t</FormField>\n\t\t\t\t\t\t\t\t<Button iconBefore={ isSubmitting ? \"\" : \"tick\"} isLoading={ isSubmitting } disabled={ !dirty } onClick={ handleSubmit }>Add</Button>\n\t\t\t\t\t\t\t\t{ errors && <p>{ errors }</p>}\n\t\t\t\t\t\t\t</form> \n\t\t\t\t\t\t</>\n\t\t\t\t\t);\n\t\t\t\t}}\n\t\t</Formik>\n\t</> );\n}\nAddWorkoutVersionPanel.propTypes = {\n\tprops: PropTypes.object,\n\tid: PropTypes.string,\n\tworkoutId: PropTypes.string,\n\temit: PropTypes.func,\n};\n","\n// deps\nimport React, { useContext, useState } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { Radio, Select, TextInputField, Heading, Pane, Textarea, FormField, Button, Text, IconButton, Paragraph } from \"evergreen-ui\";\nimport { Formik } from \"formik\";\nimport { useQuery, useMutation } from \"@apollo/react-hooks\";\nimport _ from \"lodash\";\n\n// app\nimport { Services, Queries, constants, Loading } from \"../index\";\n\n//\n// Adultletics Admin / Views / Panel / Panels / Workouts / Edit\n//\n\n\nexport default function EditWorkoutVersionPanel ({ props }) {\n\tconst { id } = props;\n\tconst { data, loading } = useQuery( Queries.workouts.getVersion, { variables: { id }});\n\tconst { data: drillsData, loading: drillsLoading } = useQuery( Queries.drills.getAll );\n\tconst [ updateVersion ] = useMutation( Queries.workouts.updateVersion, { refetchQueries: [{ query: Queries.workouts.getVersion, variables: { id }}], awaitRefetchQueries: true });\n\tconst [ addDrill, { addDrillsLoading }] = useMutation( Queries.workouts.addDrill, { refetchQueries: [{ query: Queries.workouts.getVersion, variables: { id }}], awaitRefetchQueries: true });\n\tconst [ removeDrill ] = useMutation( Queries.workouts.removeDrill, { refetchQueries: [{ query: Queries.workouts.getVersion, variables: { id }}], awaitRefetchQueries: true });\n\tconst { closePanel } = useContext( Services.UI );\n\tconst [ errors, setErrors ] = useState( null );\n\tconst { intensityOptions, workoutTypes } = constants;\n\n\tif ( loading || drillsLoading ) return <Loading />;\n\n\tconst version = _.get( data, \"workouts_versions_by_pk\" );\n\n\tconst initialValues = {\n\t\tbody: _.get( version, \"body\" ),\n\t\ttitle: _.get( version, \"workout.title\", \"\" ),\n\t\tstats: _.reduce( _.get( version, \"stats\", {}), ( total, value, key ) => ({ ...total, [ key ]: _.isNull( value ) ? \"\" : value }), {}),\n\t\tintensity: _.get( version, \"workout.intensity\", \"3\" ),\n\t\ttype: _.get( version, \"workout.type\", \"\" ),\n\t};\n    \n\tconst workoutsDrills = _.get( version, \"drills\", []);\n\tconst selectedDrills = _.map( workoutsDrills, drill => ({ workoutsDrillId: drill.id, ...drill.drill }));\n\tconst allDrills = _.get( drillsData, \"drills\" );\n\tconst unselectedDrills = _.filter( allDrills, drill => !_.some( selectedDrills, [ \"id\", drill.id ]));\n\n\treturn (\n\t\t<>\n\t\t\t<Pane marginBottom={ 56 }>\n\t\t\t\t<Heading size={ 600 }>Editing version { _.get( version, \"version_num\" ) } of workout: { _.get( version, \"workout.title\", \"\" ) }</Heading>\n\t\t\t</Pane>\n\t\t\t<Formik\n\t\t\t\tinitialValues={{ ...initialValues }}\n\t\t\t\tonSubmit={ async ({ title, body, stats, type, intensity }) => {\n\t\t\t\t\tsetErrors( null );\n\t\t\t\t\ttry {\n\t\t\t\t\t\tconst stats_update_data = _.reduce( stats, ( total, value, key ) => {\n\t\t\t\t\t\t\tif ( key === \"id\" || key === \"__typename\" ) return total;\n\t\t\t\t\t\t\treturn { ...total, [ key ]: value === \"\" ? null : value };\n\t\t\t\t\t\t}, {});\n\t\t\t\t\t\tawait updateVersion({ variables: {\n\t\t\t\t\t\t\tversion_id: id,\n\t\t\t\t\t\t\tworkout_id: _.get( version, \"workout.id\" ),\n\t\t\t\t\t\t\tstats_id: _.get( version, \"stats.id\" ),\n\t\t\t\t\t\t\tbody,\n\t\t\t\t\t\t\tworkout_data: {\n\t\t\t\t\t\t\t\ttitle,\n\t\t\t\t\t\t\t\ttype,\n\t\t\t\t\t\t\t\tintensity,\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tstats_data: stats_update_data,\n\t\t\t\t\t\t}});\n\t\t\t\t\t\tclosePanel();\n\t\t\t\t\t} catch ( error ) {\n\t\t\t\t\t\tconsole.error( error );\n\t\t\t\t\t\tsetErrors( error.message );\n\t\t\t\t\t}\n\t\t\t\t}}\n\t\t\t>{\n\t\t\t\t\t({ values, dirty, handleChange, handleSubmit, isSubmitting, setFieldValue }) => {\n\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t<form>\n\t\t\t\t\t\t\t\t\t<TextInputField\n\t\t\t\t\t\t\t\t\t\tlabel=\"Workout Title (effects all versions)\"\n\t\t\t\t\t\t\t\t\t\tname=\"title\"\n\t\t\t\t\t\t\t\t\t\tvalue={ values.title }\n\t\t\t\t\t\t\t\t\t\tonChange={ handleChange }\n\t\t\t\t\t\t\t\t\t\tautoFocus\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t<FormField label=\"Workout Intensity (effects all versions)\" onChange={ e => setFieldValue( \"intensity\", e.target.value ) } marginBottom={ 16 }>\n\t\t\t\t\t\t\t\t\t\t<Pane display=\"flex\" flexDirection=\"row\" justifyContent=\"space-between\">\n\t\t\t\t\t\t\t\t\t\t\t{ _.map( intensityOptions, ({ label, value }) => (\n\t\t\t\t\t\t\t\t\t\t\t\t<Radio key={ value } name=\"intensity\" value={ value } label={ label } checked={ value === values.intensity }/>\n\t\t\t\t\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t\t\t\t\t</Pane>\n\t\t\t\t\t\t\t\t\t</FormField>\n\t\t\t\t\t\t\t\t\t<FormField label=\"Workout Type (effects all versions)\" marginBottom={ 16 }>\n\t\t\t\t\t\t\t\t\t\t<Select name=\"type\" value={ values.type } onChange={ handleChange } height={ 32 } >\n\t\t\t\t\t\t\t\t\t\t\t<option key=\"empty\" value=\"\">Please select an option...</option>\n\t\t\t\t\t\t\t\t\t\t\t{ workoutTypes && _.map( workoutTypes, ({ value, label }) => ( <option key={ value } value={ value }>{ label }</option> ))}\n\t\t\t\t\t\t\t\t\t\t</Select>\n\t\t\t\t\t\t\t\t\t</FormField>\n\t\t\t\t\t\t\t\t\t<FormField label=\"Add Drills\" marginBottom={ 16 }>\n\t\t\t\t\t\t\t\t\t\t<Pane marginBottom={ 8 } display=\"flex\" justifyContent=\"space-between\">\n\t\t\t\t\t\t\t\t\t\t\t<Select name=\"drill\" value={ values.drill } onChange={ handleChange } height={ 32 }>\n\t\t\t\t\t\t\t\t\t\t\t\t<option key=\"empty\" value=\"\">Please select an option...</option>\n\t\t\t\t\t\t\t\t\t\t\t\t{ unselectedDrills && _.map( unselectedDrills, ({ id, title }) => ( <option key={ id } value={ id }>{ title }</option> ))}\n\t\t\t\t\t\t\t\t\t\t\t</Select>\n\t\t\t\t\t\t\t\t\t\t\t<Button \n\t\t\t\t\t\t\t\t\t\t\t\ticonBefore={ addDrillsLoading ? \"\" : \"tick\"} \n\t\t\t\t\t\t\t\t\t\t\t\tisLoading={ addDrillsLoading } \n\t\t\t\t\t\t\t\t\t\t\t\tdisabled={ !values.drill } \n\t\t\t\t\t\t\t\t\t\t\t\tonClick={ e => {\n\t\t\t\t\t\t\t\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t\t\t\t\t\t\t\t\taddDrill({ variables: { objects: [{ _drill: values.drill, _workouts_version: _.get( version, \"id\" ) }]}}); \n\t\t\t\t\t\t\t\t\t\t\t\t}} \n\t\t\t\t\t\t\t\t\t\t\t\tmarginRight={ 8 } \n\t\t\t\t\t\t\t\t\t\t\t\tmarginLeft={ 8 }>Attach drill\n\t\t\t\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t\t\t\t</Pane>\n\t\t\t\t\t\t\t\t\t\t<Pane>\n\t\t\t\t\t\t\t\t\t\t\t{ errors && <p>{ errors }</p>}\n\t\t\t\t\t\t\t\t\t\t</Pane>\n\t\t\t\t\t\t\t\t\t</FormField>\n\t\t\t\t\t\t\t\t\t<FormField label=\"Selected drills\" marginBottom={ 16 }>\n\t\t\t\t\t\t\t\t\t\t<Pane>\n\t\t\t\t\t\t\t\t\t\t\t{ !_.isEmpty( selectedDrills ) ? _.map( selectedDrills, ({ id, title, workoutsDrillId }) => (\n\t\t\t\t\t\t\t\t\t\t\t\t<Pane display=\"flex\" flexDirection=\"row\" elevation={ 1 } height={ 32 } alignItems=\"center\" background=\"white\" marginBottom={ 16 } key={ id } paddingLeft={ 16 } paddingRight={ 8 }>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Text flex={ 1 }>{ title }</Text>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<IconButton icon=\"small-cross\" intent=\"danger\" appearance=\"minimal\" onClick={ e => {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tremoveDrill({ variables: { id: workoutsDrillId }});\n\t\t\t\t\t\t\t\t\t\t\t\t\t}}/> \n\t\t\t\t\t\t\t\t\t\t\t\t</Pane> )) : <Paragraph marginBottom={ 16 } >No drills selected</Paragraph>}\n\t\t\t\t\t\t\t\t\t\t</Pane>\n\t\t\t\t\t\t\t\t\t</FormField>\n\t\t\t\t\t\t\t\t\t<FormField label=\"Workout Description\" marginBottom={ 16 }>\n\t\t\t\t\t\t\t\t\t\t<Textarea\n\t\t\t\t\t\t\t\t\t\t\tname=\"body\"\n\t\t\t\t\t\t\t\t\t\t\tvalue={ values.body }\n\t\t\t\t\t\t\t\t\t\t\tonChange={ handleChange }\n\t\t\t\t\t\t\t\t\t\t\trows={ 24 }\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t</FormField>\n\t\t\t\t\t\t\t\t\t<FormField label=\"Stats\" marginBottom={ 16 }>\n\t\t\t\t\t\t\t\t\t\t<table className=\"stats-input-table\">\n\t\t\t\t\t\t\t\t\t\t\t<thead>\n\t\t\t\t\t\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<th></th>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<th colSpan={ 2 }><Heading size={ 200 }>5/10km</Heading></th>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<th colSpan={ 2 }><Heading size={ 200 }>half/ultra</Heading></th>\n\t\t\t\t\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t\t\t\t</thead>\n\t\t\t\t\t\t\t\t\t\t\t<tbody>\n\t\t\t\t\t\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<td><Heading size={ 200 }>Beginner</Heading></td>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<td><TextInputField\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tlabel=\"km\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tname=\"stats.running_km_beginner_short\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tvalue={ values.stats.running_km_beginner_short }\n\t\t\t\t\t\t\t\t\t\t\t\t\t\ttype=\"number\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tonChange={ handleChange }\n\t\t\t\t\t\t\t\t\t\t\t\t\t/></td>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<td><TextInputField\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tlabel=\"mins\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tname=\"stats.running_minutes_beginner_short\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tvalue={ values.stats.running_minutes_beginner_short }\n\t\t\t\t\t\t\t\t\t\t\t\t\t\ttype=\"number\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tonChange={ handleChange }\n\t\t\t\t\t\t\t\t\t\t\t\t\t/></td>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<td><TextInputField\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tlabel=\"km\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tname=\"stats.running_km_beginner_long\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tvalue={ values.stats.running_km_beginner_long }\n\t\t\t\t\t\t\t\t\t\t\t\t\t\ttype=\"number\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tonChange={ handleChange }\n\t\t\t\t\t\t\t\t\t\t\t\t\t/></td>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<td><TextInputField\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tlabel=\"mins\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tname=\"stats.running_minutes_beginner_long\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tvalue={ values.stats.running_minutes_beginner_long }\n\t\t\t\t\t\t\t\t\t\t\t\t\t\ttype=\"number\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tonChange={ handleChange }\n\t\t\t\t\t\t\t\t\t\t\t\t\t/></td>\n\t\t\t\t\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<td><Heading size={ 200 }>Intermediate</Heading></td>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<td><TextInputField\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tlabel=\"km\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tname=\"stats.running_km_intermediate_short\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tvalue={ values.stats.running_km_intermediate_short }\n\t\t\t\t\t\t\t\t\t\t\t\t\t\ttype=\"number\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tonChange={ handleChange }\n\t\t\t\t\t\t\t\t\t\t\t\t\t/></td>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<td><TextInputField\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tlabel=\"mins\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tname=\"stats.running_minutes_intermediate_short\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tvalue={ values.stats.running_minutes_intermediate_short }\n\t\t\t\t\t\t\t\t\t\t\t\t\t\ttype=\"number\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tonChange={ handleChange }\n\t\t\t\t\t\t\t\t\t\t\t\t\t/></td>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<td><TextInputField\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tlabel=\"km\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tname=\"stats.running_km_intermediate_long\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tvalue={ values.stats.running_km_intermediate_long }\n\t\t\t\t\t\t\t\t\t\t\t\t\t\ttype=\"number\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tonChange={ handleChange }\n\t\t\t\t\t\t\t\t\t\t\t\t\t/></td>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<td><TextInputField\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tlabel=\"mins\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tname=\"stats.running_minutes_intermediate_long\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tvalue={ values.stats.running_minutes_intermediate_long }\n\t\t\t\t\t\t\t\t\t\t\t\t\t\ttype=\"number\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tonChange={ handleChange }\n\t\t\t\t\t\t\t\t\t\t\t\t\t/></td>\n\t\t\t\t\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<td><Heading size={ 200 }>Advanced</Heading></td>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<td><TextInputField\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tlabel=\"km\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tname=\"stats.running_km_advanced_short\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tvalue={ values.stats.running_km_advanced_short }\n\t\t\t\t\t\t\t\t\t\t\t\t\t\ttype=\"number\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tonChange={ handleChange }\n\t\t\t\t\t\t\t\t\t\t\t\t\t/></td>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<td><TextInputField\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tlabel=\"mins\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tname=\"stats.running_minutes_advanced_short\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tvalue={ values.stats.running_minutes_advanced_short }\n\t\t\t\t\t\t\t\t\t\t\t\t\t\ttype=\"number\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tonChange={ handleChange }\n\t\t\t\t\t\t\t\t\t\t\t\t\t/></td>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<td><TextInputField\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tlabel=\"km\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tname=\"stats.running_km_advanced_long\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tvalue={ values.stats.running_km_advanced_long }\n\t\t\t\t\t\t\t\t\t\t\t\t\t\ttype=\"number\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tonChange={ handleChange }\n\t\t\t\t\t\t\t\t\t\t\t\t\t/></td>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<td><TextInputField\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tlabel=\"mins\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tname=\"stats.running_minutes_advanced_long\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tvalue={ values.stats.running_minutes_advanced_long }\n\t\t\t\t\t\t\t\t\t\t\t\t\t\ttype=\"number\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tonChange={ handleChange }\n\t\t\t\t\t\t\t\t\t\t\t\t\t/></td>\n\t\t\t\t\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t\t\t\t</tbody>\n\t\t\t\t\t\t\t\t\t\t</table>\n\t\t\t\t\t\t\t\t\t</FormField>\n\t\t\t\t\t\t\t\t\t<Button iconBefore={ isSubmitting ? \"\" : \"tick\"} isLoading={ isSubmitting } disabled={ !dirty } onClick={ handleSubmit }>Update</Button>\n\t\t\t\t\t\t\t\t\t{ errors && <p>{ errors }</p>}\n\t\t\t\t\t\t\t\t</form> \n\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t);\n\t\t\t\t\t}}\n\t\t\t</Formik>\n\t\t</>\n\t);\n}\nEditWorkoutVersionPanel.propTypes = {\n\tprops: PropTypes.object,\n\tid: PropTypes.string,\n};\n","\n// deps\nimport React, { useContext } from \"react\";\nimport { SideSheet } from \"evergreen-ui\";\nimport _ from \"lodash\";\n\n// app\nimport { Services } from \"../../views/index\";\nimport panelMap from \"./panels\";\n\n//\n// Adultletics Admin / Views / Panel / Panel\n//\n\n\nconst widthMap = {\n\twide: 930,\n\tnormal: 620,\n};\n\nexport default function Panel () {\n\tconst { panel, closePanel } = useContext( Services.UI );\n\tconst _isOpen = !_.isEmpty( panel );\n\tconst ShownPanel = panelMap[ _.get( panel, \"panel\", false ) ];\n\tconst props = _.get( panel, \"props\", {});\n\tconst size = widthMap[ _.get( panel, \"size\", \"normal\" ) ]; \n\n\treturn (\n\t\t<>\n\t\t\t<SideSheet\n\t\t\t\tisShown={ _isOpen }\n\t\t\t\tonCloseComplete={ closePanel }\n\t\t\t\tpreventBodyScrolling\n\t\t\t\twidth={ size }\n\t\t\t>\n\t\t\t\t<div className=\"v-panel\">\n\t\t\t\t\t{ ( _isOpen && ShownPanel ) && <ShownPanel props={ props } /> }\n\t\t\t\t</div>\n\t\t\t</SideSheet>\n\t\t</>\n\t);\n}\n\n// example: openPanel({ panel: \"auth/sign-in\", props: { id: \"123\" }, width: \"wide\" })\n","\n// deps\nimport React, { useContext } from \"react\";\nimport { Avatar, Pane, Heading, Button, Tablist, Tab } from \"evergreen-ui\";\nimport _ from \"lodash\";\n\n// app\nimport { Services } from \"../../views/index\";\nimport { useHistory, useLocation } from \"react-router-dom\";\n\n//\n// Adultletics Admin / Views / TopNav / TopNav\n//\n\n\nexport default function TopNav () {\n\tconst history = useHistory();\n\tconst { pathname } = useLocation();\n\tconst { openPanel } = useContext( Services.UI );\n\tconst { isAuthenticated, authUser, signOut } = useContext( Services.Auth );\n\n\tconst tabs = [\n\t\t{\n\t\t\tname: \"Home\",\n\t\t\troute: \"/\",\n\t\t},\n\t\t{\n\t\t\tname: \"Workouts\",\n\t\t\troute: \"/workouts\",\n\t\t},\n\t\t{\n\t\t\tname: \"Weeks\",\n\t\t\troute: \"/weeks\",\n\t\t},\n\t\t{\n\t\t\tname: \"Drills\",\n\t\t\troute: \"/drills\",\n\t\t},\n\t\t{\n\t\t\tname: \"Daily Challenges\",\n\t\t\troute: \"/challenges\",\n\t\t},\n\t];\n\n\treturn (\n\t\t<div className=\"c-top-nav\">\n\t\t\t<Pane display=\"flex\" height={ 78 } alignItems=\"center\">\n\t\t\t\t<Pane alignItems=\"center\" justifyContent=\"center\" marginLeft={ 24 }>\n\t\t\t\t\t<Heading size={ 200  } >Adultletics Admin Panel</Heading>\n\t\t\t\t</Pane>\n\t\t\t\t<Pane display=\"flex\" flex={ 1 } justifyContent=\"space-between\" paddingLeft={ 16 }>\n\t\t\t\t\t<Pane alignItems=\"center\">\n\t\t\t\t\t\t<Tablist alignItems=\"center\">\n\t\t\t\t\t\t\t{ _.map( tabs, ({ name, route }) => (\n\t\t\t\t\t\t\t\t<Tab\n\t\t\t\t\t\t\t\t\tkey={ route }\n\t\t\t\t\t\t\t\t\tid={ route }\n\t\t\t\t\t\t\t\t\tonSelect={ () => history.push( route ) }\n\t\t\t\t\t\t\t\t\tisSelected={ route === \"/\" ? pathname === route : pathname.startsWith( route ) }\n\t\t\t\t\t\t\t\t\taria-controls={ `panel-${ name }` }\n\t\t\t\t\t\t\t\t\theight={ 40 }\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t{ name }\n\t\t\t\t\t\t\t\t</Tab>\n\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t</Tablist>\n\t\t\t\t\t</Pane>\n\t\t\t\t\t<Pane display=\"flex\" alignItems=\"center\" paddingRight={ 16 }>\n\t\t\t\t\t\t{ isAuthenticated ? \n\t\t\t\t\t\t\t<Button isLoading={ _.isEmpty( authUser ) } marginRight={ 16 } onClick={ signOut }>Log Out</Button> : \n\t\t\t\t\t\t\t<Button marginRight={ 16 } onClick={ () => openPanel({ panel: \"auth/sign-in\" }) }>Log In</Button> \n\t\t\t\t\t\t}\n\t\t\t\t\t\t<Avatar name={ authUser.first_name } size={ 40 } />\n\t\t\t\t\t</Pane>\n\t\t\t\t</Pane>\n\t\t\t</Pane>\n\t\t</div>\n\t);\n}\n","\n// deps\nimport gql from \"graphql-tag\";\n\n//\n// Adultletics Admin / Views / App / Queries\n//\n\n\n// AUTH\nconst GET_USER = gql`\n\tquery getUser ( $uid: String! ) {\n\t\tusers_by_pk( uid: $uid ) {\n\t\t\temail first_name id\n\t\t}\n\t}\n`;\n\n\n// DRILLS\nconst GET_ALL_DRILLS = gql`\n\tquery getAllDrills {\n\t\tdrills ( order_by: { title: asc }) {\n\t\t\tid title url description embed_url\n\t\t}\n\t}\n`;\n\nconst GET_DRILL_BY_ID = gql`\n\tquery getAllDrills ( $id: uuid! ) {\n\t\tdrills_by_pk ( id: $id ) {\n\t\t\tid title url description embed_url\n\t\t\tworkouts_drills {\n\t\t\t\tworkouts_version {\n\t\t\t\t\tworkout { title }\n\t\t\t\t\tversion_num\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n`;\n\nconst INSERT_DRILL = gql`\n\tmutation insertDrills ( $objects: [drills_insert_input!]! ) {\n\t\tinsert_drills ( objects: $objects ) {\n\t\t\treturning { id }\n\t\t}\n\t}\n`;\n\nconst UPDATE_DRILL = gql`\n\tmutation updateDrills ( $id: uuid!, $data: drills_set_input! ) {\n\t\tupdate_drills( where: { id: { _eq: $id }}, _set: $data ) {\n\t\t\treturning { id }\n\t\t}\n\t}\n`;\n\n\n// DAILY_CHALLENGES\nconst GET_ALL_CHALLENGES = gql`\n\tquery getAllChallenges {\n\t\tdaily_challenges ( order_by: { title: asc }) {\n\t\t\tid title description\n\t\t}\n\t}\n`;\n\nconst GET_CHALLENGE_BY_ID = gql`\n\tquery getChallenge ( $id: uuid! ) {\n\t\tdaily_challenges_by_pk ( id: $id ) {\n\t\t\tid title description\n            weeks { id }\n\t\t}\n\t}\n`;\n\nconst INSERT_CHALLENGE = gql`\n\tmutation insertChalleenge ( $objects: [daily_challenges_insert_input!]! ) {\n\t\tinsert_daily_challenges ( objects: $objects ) {\n\t\t\treturning { id }\n\t\t}\n\t}\n`;\n\nconst UPDATE_CHALLENGE = gql`\n\tmutation updateChallenge ( $id: uuid!, $data: daily_challenges_set_input! ) {\n\t\tupdate_daily_challenges ( where: { id: { _eq: $id }}, _set: $data ) {\n\t\t\treturning { id }\n\t\t}\n\t}\n`;\n\n\n// WORKOUTS\nconst GET_ALL_WORKOUTS = gql`\n\tquery getWorkouts {\n\t\tworkouts {\n\t\t\tid title type intensity\n            versions ( order_by: { version_num: asc } ){\n\t\t\t\tid body\n\t\t\t\tversion_num\n\t\t\t\towner {\n\t\t\t\t\tfirst_name\n\t\t\t\t}\n\t\t\t\tdrills {\n\t\t\t\t\tid\n\t\t\t\t\tdrill {\n\t\t\t\t\t\ttitle id\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tstats {\n\t\t\t\t\tid\n\t\t\t\t\trunning_minutes_beginner_short running_km_beginner_short\n\t\t\t\t\trunning_minutes_intermediate_short running_km_intermediate_short\n\t\t\t\t\trunning_minutes_advanced_short running_km_advanced_short\n\t\t\t\t\trunning_minutes_beginner_long running_km_beginner_long\n\t\t\t\t\trunning_minutes_intermediate_long running_km_intermediate_long\n\t\t\t\t\trunning_minutes_advanced_long running_km_advanced_long\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n`;\n\nconst GET_WORKOUT = gql`\n\tquery getWorkout ( $id: uuid! ) {\n\t\tworkouts_by_pk( id: $id ) {\n\t\t\tid title type\n            intensity\n\t\t\tversions ( order_by: { version_num: asc } ){\n\t\t\t\tid body\n\t\t\t\tversion_num\n\t\t\t\towner {\n\t\t\t\t\tfirst_name\n\t\t\t\t}\n\t\t\t\tdrills {\n\t\t\t\t\tid\n\t\t\t\t\tdrill {\n\t\t\t\t\t\ttitle id\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tstats {\n\t\t\t\t\tid\n\t\t\t\t\trunning_minutes_beginner_short running_km_beginner_short\n\t\t\t\t\trunning_minutes_intermediate_short running_km_intermediate_short\n\t\t\t\t\trunning_minutes_advanced_short running_km_advanced_short\n\t\t\t\t\trunning_minutes_beginner_long running_km_beginner_long\n\t\t\t\t\trunning_minutes_intermediate_long running_km_intermediate_long\n\t\t\t\t\trunning_minutes_advanced_long running_km_advanced_long\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n`;\n\nconst SUBSCRIBE_WORKOUT = gql`\n\tsubscription getWorkout ( $id: uuid! ) {\n\t\tworkouts_by_pk( id: $id ) {\n\t\t\tid title type\n            intensity\n\t\t\tversions ( order_by: { version_num: asc } ){\n\t\t\t\tid body\n\t\t\t\tversion_num\n\t\t\t\towner {\n\t\t\t\t\tfirst_name\n\t\t\t\t}\n\t\t\t\tdrills {\n\t\t\t\t\tid\n\t\t\t\t\tdrill {\n\t\t\t\t\t\ttitle id\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tstats {\n\t\t\t\t\tid\n\t\t\t\t\trunning_minutes_beginner_short running_km_beginner_short\n\t\t\t\t\trunning_minutes_intermediate_short running_km_intermediate_short\n\t\t\t\t\trunning_minutes_advanced_short running_km_advanced_short\n\t\t\t\t\trunning_minutes_beginner_long running_km_beginner_long\n\t\t\t\t\trunning_minutes_intermediate_long running_km_intermediate_long\n\t\t\t\t\trunning_minutes_advanced_long running_km_advanced_long\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n`;\n\nconst GET_WORKOUT_VERSION = gql`\n\tquery getWorkout ( $id: uuid! ) {\n\t\tworkouts_versions_by_pk ( id: $id ) {\n\t\t\tid body\n\t\t\tversion_num\n\t\t\towner {\n\t\t\t\tfirst_name\n\t\t\t}\n\t\t\tdrills {\n\t\t\t\tid\n\t\t\t\tdrill {\n\t\t\t\t\ttitle id\n\t\t\t\t}\n\t\t\t}\n\t\t\tstats {\n                id\n                running_minutes_beginner_short running_km_beginner_short\n                running_minutes_intermediate_short running_km_intermediate_short\n                running_minutes_advanced_short running_km_advanced_short\n                running_minutes_beginner_long running_km_beginner_long\n                running_minutes_intermediate_long running_km_intermediate_long\n                running_minutes_advanced_long running_km_advanced_long\n\t\t\t}\n\t\t\tworkout {\n\t\t\t\tid title type\n                intensity\n\t\t\t}\n\t\t}\n\t}\n`;\n\nconst INSERT_WORKOUT_VERSION = gql`\n\tmutation insertWorkoutVersion ( $objects: [workouts_versions_insert_input!]! ) {\n\t\tinsert_workouts_versions ( objects: $objects ) {\n\t\t\treturning { id workout { id } }\n\t\t}\n\t}\n`;\n\nconst UPDATE_WORKOUT_VERSION = gql`\n\tmutation updateWorkoutVersion ( $version_id: uuid!, $stats_id: uuid!, $workout_id: uuid!, $body: String!, $workout_data: workouts_set_input!, $stats_data: workouts_stats_set_input! ) {\n\t\tupdate_workouts_versions( where: { id: { _eq: $version_id }}, _set: { body: $body }) {\n\t\t\treturning { id }\n\t\t}\n\t\tupdate_workouts_stats( where: { id: { _eq: $stats_id }}, _set: $stats_data ) {\n\t\t\treturning { id }\n\t\t}\n\t\tupdate_workouts( where: { id: { _eq: $workout_id }}, _set: $workout_data ) {\n\t\t\treturning { id }\n\t\t}\n\t}\n`;\n\nconst INSERT_WORKOUTS_DRILL = gql`\n\tmutation insertWorkoutsDrills ( $objects: [workouts_drills_insert_input!]! ) {\n\t\tinsert_workouts_drills( objects: $objects ) {\n\t\t\treturning { id }\n\t\t}\n\t}\n`;\n\nconst DELETE_WORKOUTS_DRILL = gql`\n\tmutation deleteWorkoutsDrills ( $id: uuid! ) {\n\t\tdelete_workouts_drills( where: { id: { _eq: $id }}) {\n\t\t\treturning { id }\n\t\t}\n\t}\n`;\n\nconst DELETE_WORKOUT = gql`\n    mutation deleteWorkout ( $id: uuid! ) {\n        update_weeks_days( where: { workout: { _workout: {_eq: $id }}}, _set: { _workouts_version: null }) {\n            returning { id }\n        }\n        delete_workouts_drills( where: { workouts_version: { workout: { id: { _eq: $id }}}}) {\n            returning { id }\n        }\n        delete_workouts_versions( where: { workout: { id: { _eq: $id }}}) {\n            returning { id }\n        }\n        delete_workouts_stats( where: { workouts_version: { workout: { id: { _eq: $id }}}}) {\n            returning { id }\n        }\n        delete_workouts( where: { id: { _eq: $id }}) {\n            returning { id }\n        }\n    }\n`;\n\nconst DELETE_VERSION = gql`\n    mutation deleteWorkout ( $id: uuid! ) {\n        update_weeks_days( where: { _workouts_version: { _eq: $id }}, _set: { _workouts_version: null }) {\n            returning { id }\n        }\n        delete_workouts_drills( where: { workouts_version: { id: { _eq: $id }}}) {\n            returning { id }\n        }\n        delete_workouts_versions( where: { id: { _eq: $id }}) {\n            returning { id }\n        }\n        delete_workouts_stats( where: { workouts_version: { id: { _eq: $id }}}) {\n            returning { id }\n        }\n    }\n`;\n\n\n// WEEKS\nconst GET_ALL_WEEKS = gql`\n    query getAllWeeks {\n        weeks {\n            id title updated_at week_start _challenge\n            days ( order_by: { _day: asc }) {\n                id\n                day { id title uid }\n                workout {\n                    body id\n                    version_num\n                    drills {\n                        id\n                        drill {\n                            description\n                            id title url\n                        }\n                    }\n                    workout {\n                        id intensity\n                        title type\n                    }\n                    stats {\n                        id\n                        running_minutes_beginner_short running_km_beginner_short\n                        running_minutes_intermediate_short running_km_intermediate_short\n                        running_minutes_advanced_short running_km_advanced_short\n                        running_minutes_beginner_long running_km_beginner_long\n                        running_minutes_intermediate_long running_km_intermediate_long\n                        running_minutes_advanced_long running_km_advanced_long\n                    }\n                }\n            }\n        }\n    }\n`;\n\nconst SUBSCRIBE_ALL_WEEKS = gql`\n    subscription getAllWeeks {\n        weeks {\n            id title updated_at week_start\n            days ( order_by: { _day: asc }) {\n                id\n                day { id title uid }\n                workout {\n                    body id\n                    version_num\n                    drills {\n                        id\n                        drill {\n                            description\n                            id title url\n                        }\n                    }\n                    workout {\n                        id intensity\n                        title type\n                    }\n                    stats {\n                        id\n                        running_minutes_beginner_short running_km_beginner_short\n                        running_minutes_intermediate_short running_km_intermediate_short\n                        running_minutes_advanced_short running_km_advanced_short\n                        running_minutes_beginner_long running_km_beginner_long\n                        running_minutes_intermediate_long running_km_intermediate_long\n\t\t\t\t\t    running_minutes_advanced_long running_km_advanced_long\n                    }\n                }\n            }\n        }\n    }\n`;\n\nconst SUBSCRIBE_WEEK = gql`\n    subscription weekSubscription ( $id: uuid! ) {\n        weeks_by_pk( id: $id ) {\n            created_at id week_start\n            title updated_at\n            days ( order_by: { _day: asc }) {\n                id\n                day { id title uid }\n                workout {\n                    body id\n                    version_num\n                    drills {\n                        id\n                        drill {\n                            description\n                            id title url\n                        }\n                    }\n                    workout {\n                        id intensity\n                        title type\n                    }\n                    stats {\n                        id\n                        running_minutes_beginner_short running_km_beginner_short\n                        running_minutes_intermediate_short running_km_intermediate_short\n                        running_minutes_advanced_short running_km_advanced_short\n                        running_minutes_beginner_long running_km_beginner_long\n                        running_minutes_intermediate_long running_km_intermediate_long\n                        running_minutes_advanced_long running_km_advanced_long\n                    }\n                }\n            }\n            daily_challenge { id title description }\n        }\n    }\n`;\n\nconst UPDATE_WEEK = gql`\n    mutation updateWeek ( $id: uuid!, $data: weeks_set_input! ) {\n        update_weeks( where: { id: { _eq: $id }}, _set: $data ) {\n            returning { id }\n        }\n    }\n`;\n\nconst UPDATE_WEEK_DAY = gql`\n    mutation updateWeeksDays ( $id: uuid!, $data: weeks_days_set_input! ) {\n        update_weeks_days( where: { id: { _eq: $id }}, _set: $data ) {\n            returning { id }\n        }\n    }\n`;\n\nconst CREATE_WEEK = gql`\n    mutation updateWeeksDays ( $objects: [weeks_insert_input!]! ) {\n        insert_weeks( objects: $objects ) {\n            returning { id }\n        }\n    }\n`;\n\nconst GET_ALL_DAYS = gql`\n    query getAllDays {\n        days {\n            id title  uid\n        }\n    }\n`;\n\n\nexport default {\n\tauth: {\n\t\tgetUser: GET_USER,\n\t},\n\tdrills: {\n\t\tgetAll: GET_ALL_DRILLS,\n\t\tgetOne: GET_DRILL_BY_ID,\n\t\tadd: INSERT_DRILL,\n\t\tupdate: UPDATE_DRILL,\n\t},\n\tdailyChallenges: {\n\t\tgetAll: GET_ALL_CHALLENGES,\n\t\tgetOne: GET_CHALLENGE_BY_ID,\n\t\tadd: INSERT_CHALLENGE,\n\t\tupdate: UPDATE_CHALLENGE,\n\t},\n\tworkouts: {\n\t\tgetAll: GET_ALL_WORKOUTS,\n\t\tgetOne: GET_WORKOUT,\n\t\tsubscribe: SUBSCRIBE_WORKOUT,\n\t\tgetVersion: GET_WORKOUT_VERSION,\n\t\taddVersion: INSERT_WORKOUT_VERSION,\n\t\tupdateVersion: UPDATE_WORKOUT_VERSION,\n\t\taddDrill: INSERT_WORKOUTS_DRILL,\n\t\tremoveDrill: DELETE_WORKOUTS_DRILL,\n\t\tdeleteWorkout: DELETE_WORKOUT,\n\t\tdeleteVersion: DELETE_VERSION,\n\t},\n\tweeks: {\n\t\tgetAll: GET_ALL_WEEKS,\n\t\tsubscribe: SUBSCRIBE_WEEK,\n\t\tsubscribeAll: SUBSCRIBE_ALL_WEEKS,\n\t\tupdateWeek: UPDATE_WEEK,\n\t\tupdateWeekday: UPDATE_WEEK_DAY,\n\t\tadd: CREATE_WEEK,\n\t},\n\tdays: {\n\t\tgetAll: GET_ALL_DAYS,\n\t},\n};\n","\n// deps\nimport { createContext } from \"react\";\n\n//\n// Adultletics Admin / Views / App / Services\n//\n\n\nexport const Auth = createContext({\n\tauthUser: {},\n\ttoken: \"\",\n\tuid: \"\",\n\tisAuthenticating: false,\n\tisAuthenticated: false,\n\tupdateAuth: () => {},\n\tsignIn: () => {},\n\tsignOut: () => {},\n});\n\nexport const UI = createContext({\n\tpanel: {},\n\topenPanel: () => {},\n\tclosePanel: () => {},\n\tnotifications: [{}],\n\taddNotification: () => {},\n});\n\nexport default { \n\tAuth,\n\tUI,\n};","\n// deps\nimport React from \"react\";\n\n// app\nimport { Spinner } from \"evergreen-ui\";\n\n//\n// Adultletics Admin / Components / Loading / Loading\n//\n\n\nexport default function Loading () {\n\treturn (\n\t\t<div className=\"c-loading\" >\n\t\t\t<Spinner />\n\t\t</div>\n\t);\n}\n","\nconst intensityOptions = [\n\t{ label: \"Recovery\", value: \"1\" },\n\t{ label: \"Low\", value: \"2\" },\n\t{ label: \"Moderate\", value: \"3\" },\n\t{ label: \"High\", value: \"4\" },\n\t{ label: \"Very High\", value: \"5\" },\n];\n\nconst workoutTypes = [\n\t{ label: \"Long Aerobic\", value: \"long-aerobic\", system: \"2 aerobic\" },\n\t{ label: \"Short Aerobic\", value: \"short-aerobic\", system: \"2 aerobic\" },\n\t{ label: \"Recovery\", value: \"recovery\", system: \"1 recovery\" },\n\t{ label: \"Intervals\", value: \"intervals\", system: \"4 atp\" },\n\t{ label: \"Strength\", value: \"strength\", system: \"4 atp\" },\n\t{ label: \"Tempo Run\", value: \"tempo\", system: \"3 anaerobic\" },\n\t{ label: \"Speed Play\", value: \"speed-play\", system: \"3 anaerobic\" },\n\t{ label: \"Hills\", value: \"hills\", system: \"3 anaerobic\" },\n];\n\nexport default {\n\tintensityOptions,\n\tworkoutTypes,\n};\n","\n// deps\nimport React, { memo } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { useSubscription } from \"@apollo/react-hooks\";\nimport { ResponsiveBump } from \"@nivo/bump\";\nimport { ResponsiveStream } from \"@nivo/stream\";\nimport { parseISO } from \"date-fns\";\nimport _ from \"lodash\";\n\n// app\nimport { Pane, Heading } from \"evergreen-ui\";\nimport { Queries, constants } from \"../index\";\n\n//\n// Adultletics Admin / Views / Dashboard / Dashboard\n//\n\n\nexport default function Dashboard () {\n\tconst { data } = useSubscription( Queries.weeks.subscribeAll );    \n\tconst weeks = [ ..._.get( data, \"weeks\", []) ].sort(( a, b ) => parseISO( a.week_start ) - parseISO( b.week_start ));\n\n\treturn (\n\t\t<Pane className=\"v-dashboard\">\n\t\t\t<Pane display=\"flex\" marginBottom={ 48 }>\n\t\t\t\t<Heading size={ 800 } color=\"#1070CA\">Dashboard</Heading>\n\t\t\t</Pane>\n\t\t\t<Pane height={ 450 } elevation={ 1 } background=\"white\" padding={ 24 } marginBottom={ 24 }>\n\t\t\t\t<Heading size={ 300 }>{ _.upperCase( \"Workout popularity over time\" ) }</Heading>\n\t\t\t\t<WorkoutPopularityChart weeks={ weeks } />\n\t\t\t</Pane>\n\t\t\t<Pane height={ 300 } elevation={ 1 } background=\"white\" padding={ 24 } marginBottom={ 24 }>\n\t\t\t\t<Heading size={ 300 }>{ _.upperCase( \"Workout types over time\" ) }</Heading>\n\t\t\t\t<WorkoutTypeChart weeks={ weeks } />\n\t\t\t</Pane>\n\t\t\t<Pane height={ 300 } elevation={ 1 } background=\"white\" padding={ 24 } marginBottom={ 24 }>\n\t\t\t\t<Heading size={ 300 }>{ _.upperCase( \"Energy systems over time\" ) }</Heading>\n\t\t\t\t<EnergySystemsChart weeks={ weeks } />\n\t\t\t</Pane>\n\t\t</Pane>\n\t);\n}\n\n\n\nconst WorkoutTypeChart = memo( function WorkoutPopularityChart ( props ) {\n\tconst { weeks } = props;\n\tconst { workoutTypes } = constants;\n\tconst typeList = [];\n\n\tconst lastTenWeekWeightedCounts = _.compact( _.map( _.rangeRight( 0, 10 ), i => {\n\t\tconst end = _.size( weeks ) - i;\n\t\tif ( end < 0 ) return false;\n\n\t\tconst start = end - 10 < 0 ? 0 : end - 10;\n\t\tconst loopData = _.slice( weeks, start, end );\n\n\t\treturn _.reduce( loopData, ( total, curr, i ) => {\n\t\t\treturn _.reduce( _.get( curr, \"days\", []), ( total, curr ) => {\n\t\t\t\tconst type = _.get( _.find( workoutTypes, [ \"value\", _.get( curr, \"workout.workout.type\" ) ]), \"label\" );\n\t\t\t\tif ( !type ) return total;\n\t\t\t\tif ( !typeList.includes( type )) typeList.push( type );\n\t\t\t\tconst value = _.get( total, [ \"data\", type ], 0 ) + ( 1 - (( 10 - i ) / 11 ));\n\t\t\t\treturn { ...total, data: { ...total.data, [ type ]: value }};\n\t\t\t}, { ...total });\n\t\t}, { label: i, data: {}});\n\t}));\n    \n\tconst lastTenWeekRanks = _.map( lastTenWeekWeightedCounts, week => {\n\t\tconst weekAsSortedArrayPairs = _.toPairs( _.get( week, \"data\" )).sort(( a, b ) => b[ 1 ] - a[ 1 ]);\n\t\treturn { ...week, data: _.reduce( weekAsSortedArrayPairs, ( total, curr, i ) => ({ ...total, [ curr[ 0 ] ]: i + 1 }), {}) };\n\t});\n    \n\tconst graphData = _.map( typeList, type => ({\n\t\tid: type,\n\t\tdata: _.map( lastTenWeekRanks, week => ({ \"x\": _.get( week, \"label\" ), \"y\": _.get( week, [ \"data\", type ], _.size( typeList )) })),\n\t}));\n\n\tif ( _.isEmpty( graphData )) return null;\n\n\treturn (\n\t\t<ResponsiveBump\n\t\t\tdata={ graphData }\n\t\t\tmargin={{ top: 40, right: 150, bottom: 60, left: 60 }}\n\t\t\tcolors={{ scheme: \"category10\" }}\n\t\t\tlineWidth={ 2 }\n\t\t\tactiveLineWidth={ 4 }\n\t\t\tinactiveLineWidth={ 2 }\n\t\t\tinactiveOpacity={ 0.6 }\n\t\t\tpointSize={ 5 }\n\t\t\tactivePointSize={ 10 }\n\t\t\tinactivePointSize={ 0 }\n\t\t\tpointColor={{ theme: \"background\" }}\n\t\t\tpointBorderWidth={ 3 }\n\t\t\tactivePointBorderWidth={ 3 }\n\t\t\tpointBorderColor={{ from: \"serie.color\" }}\n\t\t\taxisTop={ null }\n\t\t\taxisRight={ null }\n\t\t\taxisBottom={{\n\t\t\t\ttickSize: 5,\n\t\t\t\ttickPadding: 5,\n\t\t\t\ttickRotation: 0,\n\t\t\t\tlegend: \"Weeks ago\",\n\t\t\t\tlegendPosition: \"middle\",\n\t\t\t\tlegendOffset: 32,\n\t\t\t}}\n\t\t\taxisLeft={{\n\t\t\t\ttickSize: 5,\n\t\t\t\ttickPadding: 5,\n\t\t\t\ttickRotation: 0,\n\t\t\t\tlegend: \"Rank\",\n\t\t\t\tlegendPosition: \"middle\",\n\t\t\t\tlegendOffset: -40,\n\t\t\t}}\n\t\t\tendLabelPadding={ 8 }\n\t\t/>\n\t);\n}, _.isEqual );\nWorkoutTypeChart.propTypes = {\n\tweeks: PropTypes.array,\n};\n\n\n\nconst WorkoutPopularityChart = memo( function WorkoutPopularityChart ( props ) {\n\tconst { weeks } = props;\n\tconst workoutList = [];\n\n\tconst lastTenWeekWeightedCounts = _.compact( _.map( _.rangeRight( 0, 10 ), i => {\n\t\tconst end = _.size( weeks ) - i;\n\t\tif ( end <= 0 ) return false;\n\n\t\tconst start = end - 10 < 0 ? 0 : end - 10;\n\t\tconst loopData = _.slice( weeks, start, end );\n\n\t\treturn _.reduce( loopData, ( total, curr, i ) => {\n\t\t\treturn _.reduce( _.get( curr, \"days\", []), ( total, curr ) => {\n\t\t\t\tconst title = _.get( curr, \"workout.workout.title\" );\n\t\t\t\tconst type = _.get( curr, \"workout.workout.type\" );\n\t\t\t\tif ( !title || type === \"recovery\" ) return total;\n\t\t\t\tif ( !workoutList.includes( title )) workoutList.push( title );\n\t\t\t\tconst value = _.get( total, [ \"data\", title ], 0 ) + ( 1 - (( 10 - i ) / 11 ));\n\t\t\t\treturn { ...total, data: { ...total.data, [ title ]: value }};\n\t\t\t}, { ...total });\n\t\t}, { label: i, data: {}});\n\t}));\n    \n\tconst lastTenWeekRanks = _.map( lastTenWeekWeightedCounts, week => {\n\t\tconst weekAsSortedArrayPairs = _.toPairs( _.get( week, \"data\" )).sort(( a, b ) => b[ 1 ] - a[ 1 ]);\n\t\treturn { ...week, data: _.reduce( weekAsSortedArrayPairs, ( total, curr, i ) => ({ ...total, [ curr[ 0 ] ]: i + 1 }), {}) };\n\t});\n    \n\tconst graphData = _.filter( _.map( workoutList, workout => ({\n\t\tid: workout,\n\t\tdata: _.map( lastTenWeekRanks, week => ({ \"x\": _.get( week, \"label\" ), \"y\": _.get( week, [ \"data\", workout ], _.size( workoutList )) })),\n\t})), ({ data }) => _.get( _.last( data ), \"x\" ) <= 12 );\n\n\tif ( _.isEmpty( graphData )) return null;\n\n\treturn (\n\t\t<ResponsiveBump\n\t\t\tdata={ graphData }\n\t\t\tmargin={{ top: 40, right: 150, bottom: 60, left: 60 }}\n\t\t\tcolors={{ scheme: \"category10\" }}\n\t\t\tlineWidth={ 2 }\n\t\t\tactiveLineWidth={ 4 }\n\t\t\tinactiveLineWidth={ 2 }\n\t\t\tinactiveOpacity={ 0.6 }\n\t\t\tpointSize={ 5 }\n\t\t\tactivePointSize={ 10 }\n\t\t\tinactivePointSize={ 0 }\n\t\t\tpointColor={{ theme: \"background\" }}\n\t\t\tpointBorderWidth={ 3 }\n\t\t\tactivePointBorderWidth={ 3 }\n\t\t\tpointBorderColor={{ from: \"serie.color\" }}\n\t\t\taxisTop={ null }\n\t\t\taxisRight={ null }\n\t\t\taxisBottom={{\n\t\t\t\ttickSize: 5,\n\t\t\t\ttickPadding: 5,\n\t\t\t\ttickRotation: 0,\n\t\t\t\tlegend: \"Weeks ago\",\n\t\t\t\tlegendPosition: \"middle\",\n\t\t\t\tlegendOffset: 32,\n\t\t\t}}\n\t\t\taxisLeft={{\n\t\t\t\ttickSize: 5,\n\t\t\t\ttickPadding: 5,\n\t\t\t\ttickRotation: 0,\n\t\t\t\tlegend: \"Rank\",\n\t\t\t\tlegendPosition: \"middle\",\n\t\t\t\tlegendOffset: -40,\n\t\t\t}}\n\t\t\tendLabelPadding={ 8 }\n\t\t/>\n\t);\n}, _.isEqual );\nWorkoutPopularityChart.propTypes = {\n\tweeks: PropTypes.array,\n};\n\n\n\nconst EnergySystemsChart = memo( function EnergySystemsChart ( props ) {\n\tconst { weeks } = props;\n\tconst { workoutTypes } = constants;\n    \n\tconst keys = _.uniq( _.map( workoutTypes, \"system\" )).sort();\n\tconst keysObject = _.reduce( keys, ( total, curr ) => ({ ...total, [ curr ]: 0 }), {});\n\n\tconst graphData = _.map( weeks, ({ days }) => {\n\t\treturn _.reduce( days, ( total, curr ) => {\n\t\t\tconst type = _.get( curr, \"workout.workout.type\" );\n\t\t\tif ( !type ) return total;\n\n\t\t\tconst workoutTypesObject = _.find( workoutTypes, [ \"value\", type ]);\n\t\t\tconst system = _.get( workoutTypesObject, \"system\", \"missing\" );\n\t\t\treturn { ...total, [ system ]: total[ system ] ? total[ system ] + 1 : 1 };\n\t\t}, { ...keysObject });\n\t});\n    \n\treturn <ResponsiveStream\n\t\tdata={ graphData }\n\t\tkeys={ keys }\n\t\tmargin={{ top: 50, right: 110, bottom: 50, left: 60 }}\n\t\taxisTop={ null }\n\t\taxisRight={ null }\n\t\taxisBottom={ null }\n\t\taxisLeft={ null }\n\t\toffsetType=\"none\"\n\t\torder=\"none\"\n\t\t// curve=\"natural\"\n\t\tcolors={{ scheme: \"category10\" }}\n\t\tfillOpacity={ 0.85 }\n\t\tlegends={[\n\t\t\t{\n\t\t\t\tanchor: \"bottom-right\",\n\t\t\t\tdirection: \"column\",\n\t\t\t\ttranslateX: 100,\n\t\t\t\titemWidth: 80,\n\t\t\t\titemHeight: 20,\n\t\t\t\titemTextColor: \"#999999\",\n\t\t\t\tsymbolSize: 12,\n\t\t\t\tsymbolShape: \"circle\",\n\t\t\t\teffects: [\n\t\t\t\t\t{\n\t\t\t\t\t\ton: \"hover\",\n\t\t\t\t\t\tstyle: {\n\t\t\t\t\t\t\titemTextColor: \"#000000\",\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t],\n\t\t\t},\n\t\t]}\n\t/>;\n}, _.isEqual );\nEnergySystemsChart.propTypes = {\n\tweeks: PropTypes.array,\n};\n","\n// deps\nimport React, { useContext, useState, useEffect, memo } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { useSubscription, useMutation } from \"@apollo/react-hooks\";\nimport _ from \"lodash\";\nimport { Link, useHistory } from \"react-router-dom\";\nimport { ResponsiveBar } from \"@nivo/bar\";\n\n// app\nimport { Pane, Badge, Button, Heading, Text, Paragraph, Tablist, Tab } from \"evergreen-ui\";\nimport { Services, Queries, Loading, constants } from \"../index\";\n\n//\n// Adultletics Admin / Views / Workout / Workout\n//\n\n\nexport default function Workout ( props ) {\n\tconst { id } = props;\n\tconst { data, loading } = useSubscription( Queries.workouts.subscribe, { variables: { id }});\n\tconst [ removeWorkout ] = useMutation( Queries.workouts.deleteWorkout, { refetchQueries: [{ query: Queries.workouts.getAll }], awaitRefetchQueries: true });\n\tconst [ removeVersion ] = useMutation( Queries.workouts.deleteVersion, { refetchQueries: [{ query: Queries.workouts.getOne, variables: { id }}], awaitRefetchQueries: true });\n\tconst { openPanel } = useContext( Services.UI );\n\tconst [ selectedVersion, setSelectedVersion ] = useState();\n\tconst { intensityOptions, workoutTypes } = constants;\n\tconst history = useHistory();\n\n\tconst title = _.get( data, \"workouts_by_pk.title\" );\n\tconst typesValue = _.get( data, \"workouts_by_pk.type\" );\n\tconst intensityValue = _.get( data, \"workouts_by_pk.intensity\" );\n\tconst versions = _.get( data, \"workouts_by_pk.versions\" );\n    \n\t// eslint-disable-next-line\n\tuseEffect(() => { if ( !selectedVersion ) setSelectedVersion( _.get( _.last( versions ), \"version_num\" ));}, [ versions ]);\n\n\tif ( loading ) return <Loading />;\n\n\tconst version = _.find( versions, [ \"version_num\", selectedVersion ]);\n\tconst body = _.get( version, \"body\", \"\" );\n\tconst stats = _.get( version, \"stats\", {});\n\tconst drills = _.map( _.get( version, \"drills\", []), \"drill\" );\n\n\tconst intensity = _.get( _.find( intensityOptions, [ \"value\", intensityValue ]), \"label\", \"\" );\n\tconst type = _.get( _.find( workoutTypes, [ \"value\", typesValue ]), \"label\", \"\" );\n\n\tconst _handleWorkoutDelete = async () => {\n\t\tawait removeWorkout({ variables: { id }});\n\t\thistory.push( \"/workouts\" );\n\t};\n    \n\tconst _handleVersionDelete = async () => {\n\t\tawait removeVersion({ variables: { id:  _.get( version, \"id\" ) }});\n\t\tsetSelectedVersion( _.get( _.last( versions ), \"version_num\" ));\n\t};\n    \n\tconst _handleVersionAdd = id => setSelectedVersion( _.get( _.find( versions, [ \"id\", id ]), \"version_num\" ));\n\n\treturn (\n\t\t<>\n\t\t\t<Pane display=\"flex\" justifyContent=\"flex-end\">\n\t\t\t\t<Button marginLeft={ 8 } iconBefore=\"plus\" onClick={ () => openPanel({ panel: \"workouts/add-version\", props: { id: version.id, workoutId: id, emit: _handleVersionAdd }, size: \"wide\" })}>Add Version</Button>\n\t\t\t\t<Button marginLeft={ 8 } iconBefore=\"edit\" onClick={ () => openPanel({ panel: \"workouts/edit\", props: { id: version.id }, size: \"wide\" })}>Edit</Button>\n\t\t\t</Pane>\n\t\t\t<Pane marginBottom={ 32 } display=\"flex\" flexDirection=\"row\" alignItems=\"center\">\n\t\t\t\t<Pane marginRight={ 16 }>\n\t\t\t\t\t<Heading>{ title }</Heading>\n\t\t\t\t</Pane>\n\t\t\t\t<Pane flex={ 1 }>\n\t\t\t\t\t<Badge marginRight={ 8 } color=\"blue\">{ type }</Badge>\n\t\t\t\t\t<Badge color=\"blue\">{ intensity }</Badge>\n\t\t\t\t</Pane>\n\t\t\t</Pane>\n\t\t\t<Pane display=\"flex\" flexDirection=\"row\" alignItems=\"center\" marginBottom={ 24 }>\n\t\t\t\t<Text>Versions:</Text>\n\t\t\t\t<Pane flex={ 1 } marginLeft={ 16 }>\n\t\t\t\t\t<Tablist alignItems=\"center\">\n\t\t\t\t\t\t{ versions && _.map( versions, ({ version_num }) => (\n\t\t\t\t\t\t\t<Tab\n\t\t\t\t\t\t\t\tkey={ version_num }\n\t\t\t\t\t\t\t\tid={ version_num }\n\t\t\t\t\t\t\t\tonSelect={ () => setSelectedVersion( version_num ) }\n\t\t\t\t\t\t\t\tisSelected={ selectedVersion === version_num }\n\t\t\t\t\t\t\t\taria-controls={ `panel-${ version_num }` }\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{ version_num }\n\t\t\t\t\t\t\t</Tab>\n\t\t\t\t\t\t))}\n\t\t\t\t\t</Tablist>\n\t\t\t\t</Pane>\n\t\t\t</Pane>\n\t\t\t<Pane background=\"white\" padding={ 32 } marginBottom={ 32 } elevation={ 1 }>\n\t\t\t\t<Heading marginBottom={ 16 } size={ 200 }>Description:</Heading>\n\t\t\t\t{ body && _.map( body.split( \"\\n\" ), ( line, i ) => line ? <Paragraph key={ i }>{ line }</Paragraph> : <br key={ i } /> )}\n\t\t\t</Pane>\n\t\t\t<Pane marginBottom={ 32 }>\n\t\t\t\t<Heading size={ 200 } marginBottom={ 16 }>Drills:</Heading>\n\t\t\t\t{ !_.isEmpty( drills ) ? _.map( drills, drill => {\n\t\t\t\t\tconst { id, title } = drill;\n\t\t\t\t\treturn ( \n\t\t\t\t\t\t<Link to={ `/drills/${ id }` } key={ id } style={{ marginBottom: \"24px\" }}>\n\t\t\t\t\t\t\t<Pane display=\"flex\" elevation={ 1 } height={ 48 } alignItems=\"center\" background=\"white\" marginBottom={ 16 }>\n\t\t\t\t\t\t\t\t<Text marginLeft={ 24 }>{ title }</Text> \n\t\t\t\t\t\t\t</Pane> \n\t\t\t\t\t\t</Link>\n\t\t\t\t\t);\n\t\t\t\t}) : <Paragraph>No attached drills</Paragraph> }\n\t\t\t</Pane>\n\t\t\t<Pane background=\"white\" padding={ 32 } elevation={ 1 } marginBottom={ 24 }>\n\t\t\t\t<Heading size={ 200 }>Workout Minutes:</Heading>\n\t\t\t\t<Pane height={ 225 }>\n\t\t\t\t\t<WorkoutMinutesSplit stats={ stats } />\n\t\t\t\t</Pane>\n\t\t\t</Pane>\n\t\t\t<Pane display=\"flex\" justifyContent=\"flex-end\" marginBottom={ 32 }>\n\t\t\t\t<Button intent=\"danger\" appearance=\"minimal\" onClick={ _handleVersionDelete } marginRight={ 24 }>Delete This Version</Button>\n\t\t\t\t<Button intent=\"danger\" appearance=\"minimal\" onClick={ _handleWorkoutDelete }>Delete This Workout</Button>\n\t\t\t</Pane>\n\t\t</>\n\t);\n}\nWorkout.propTypes = {\n\tid: PropTypes.string,\n};\n\n\nconst WorkoutMinutesSplit = memo( function WorkoutMinutesSplit ({ stats }) {\n\tconst graphData = _.map([ \"short\", \"long\" ], id => ({\n\t\tid: id === \"short\" ? \"5/10km\" : \"half/ultra\",\n\t\tbeginner: _.get( stats, `running_minutes_beginner_${ id }` ),\n\t\tintermediate: _.get( stats, `running_minutes_intermediate_${ id }` ),\n\t\tadvanced: _.get( stats, `running_minutes_advanced_${ id }` ),\n\t}));\n    \n\treturn (\n\t\t<ResponsiveBar\n\t\t\tdata={ graphData }\n\t\t\tmargin={{ top: 16, right: 16, bottom: 32, left: 64 }}\n\t\t\tinnerPadding={ 2 }\n\t\t\tkeys={[ \"beginner\", \"intermediate\", \"advanced\" ]}\n\t\t\tlayout=\"horizontal\"\n\t\t\tgroupMode=\"grouped\"\n\t\t\tcolors={{ scheme: \"category10\" }}\n\t\t\tjustify={ true }\n\t\t\taxisTop={ null }\n\t\t\taxisRight={ null }\n\t\t\taxisBottom={ null }\n\t\t\taxisLeft={{\n\t\t\t\ttickSize: 5,\n\t\t\t\ttickPadding: 5,\n\t\t\t\ttickRotation: 0,\n\t\t\t\tlegendPosition: \"middle\",\n\t\t\t\tlegendOffset: -40,\n\t\t\t}}\n\t\t\tisInteractive={ false }\n\t\t\tenableGridY={ false }\n\t\t\tlegends={[\n\t\t\t\t{\n\t\t\t\t\tdataFrom: \"keys\",\n\t\t\t\t\tanchor: \"bottom\",\n\t\t\t\t\tdirection: \"row\",\n\t\t\t\t\ttranslateX: 0,\n\t\t\t\t\ttranslateY: 32,\n\t\t\t\t\titemWidth: 128,\n\t\t\t\t\titemHeight: 16,\n\t\t\t\t\titemDirection: \"left-to-right\",\n\t\t\t\t\tsymbolSize: 16,\n\t\t\t\t},\n\t\t\t]}\n\t\t/>\n\t);\n}, _.isEqual );\nWorkoutMinutesSplit.propTypes = {\n\tstats: PropTypes.object,\n};\n","\n// deps\nimport React, { useContext } from \"react\";\nimport { useQuery } from \"@apollo/react-hooks\";\nimport { Link } from \"react-router-dom\";\nimport _ from \"lodash\";\n\n// app\nimport { Badge, Pane, Text, Heading, Button } from \"evergreen-ui\";\nimport { Services, Queries, Loading, constants } from \"../index\";\n\n//\n// Adultletics Admin / Views / Workouts / Workouts\n//\n\n\nexport default function Workouts () {\n\tconst { openPanel } = useContext( Services.UI );\n\tconst { data, loading } = useQuery( Queries.workouts.getAll );\n\tconst workouts = _.get( data, \"workouts\" );\n\tconst { intensityOptions, workoutTypes } = constants;\n\n\tif ( loading ) return <Loading />;\n\n\treturn (\n\t\t<>\n\t\t\t<Pane display=\"flex\" justifyContent=\"flex-end\">\n\t\t\t\t<Button iconBefore=\"plus\" onClick={ () => openPanel({ panel: \"workouts/add\", size: \"wide\" })}>Add</Button>\n\t\t\t</Pane>\n\t\t\t<Pane marginBottom={ 16 }>\n\t\t\t\t<Heading>All Workouts:</Heading>\n\t\t\t</Pane>\n\t\t\t<Pane marginBottom={ 40 }>\n\t\t\t\t{ workouts && _.map( workouts, workout => {\n\t\t\t\t\tconst { id, title, intensity, type } = workout;\n\t\t\t\t\tconst intensityLabel = _.get( _.find( intensityOptions, [ \"value\", intensity ]), \"label\", \"\" );\n\t\t\t\t\tconst typeLabel = _.get( _.find( workoutTypes, [ \"value\", type ]), \"label\", \"\" );\n\t\t\t\t\treturn ( \n\t\t\t\t\t\t<Link to={ `/workouts/${ id }` } key={ id } style={{ marginBottom: \"24px\", width: \"100%\" }}>\n\t\t\t\t\t\t\t<Pane className=\"c-row-hover\" display=\"flex\" elevation={ 1 } height={ 48 } alignItems=\"center\" background=\"white\" marginBottom={ 16 } >\n\t\t\t\t\t\t\t\t<Pane flex={ 1 } >\n\t\t\t\t\t\t\t\t\t<Text marginLeft={ 24 } marginRight={ 8 }>{ title }</Text> \n\t\t\t\t\t\t\t\t\t<Badge marginRight={ 8 } color=\"blue\">{ typeLabel }</Badge>\n\t\t\t\t\t\t\t\t\t<Badge color=\"blue\">{ intensityLabel }</Badge>\n\t\t\t\t\t\t\t\t</Pane> \n\t\t\t\t\t\t\t</Pane>\n\t\t\t\t\t\t</Link>\n\n\t\t\t\t\t);\n\t\t\t\t})}\n\t\t\t</Pane>\n\t\t</>\n\t);\n}\n","\n// deps\nimport React from \"react\";\nimport { useParams } from \"react-router-dom\";\n\n// app\nimport { Pane, Heading } from \"evergreen-ui\";\nimport Workout from \"./workout\";\nimport Workouts from \"./workouts\";\n\n//\n// Adultletics Admin / Views / Workouts / Index\n//\n\n\nexport default function WorkoutsIndex () {\n\tconst { id } = useParams();\n\tconst _workoutView = Boolean( id );\n    \n\treturn (\n\t\t<>\n\t\t\t<Pane>\n\t\t\t\t<Heading size={ 800 } color=\"#1070CA\" marginBottom={ 48 }>Workouts</Heading>\n\t\t\t</Pane>\n\t\t\t<Pane>\n\t\t\t\t{ _workoutView ? <Workout id={ id } /> : <Workouts /> }\n\t\t\t</Pane>\n\t\t</>\n\t);\n}\n","\n// deps\nimport React, { useContext, memo } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { useSubscription, useMutation, useQuery } from \"@apollo/react-hooks\";\nimport _ from \"lodash\";\nimport { format, parseISO } from \"date-fns\";\nimport { Document, Paragraph as DocXParagraph, HeadingLevel, Packer } from \"docx\";\nimport { save } from \"save-file\";\nimport { Formik } from \"formik\";\nimport { ResponsiveBar } from \"@nivo/bar\";\n\n// app\nimport { SelectField, Pane, Text, Paragraph, Heading, Badge, IconButton, Button } from \"evergreen-ui\";\nimport { Queries, Loading, Services, constants } from \"../index\";\n\n//\n// Adultletics Admin / Views / Week / Week\n//\n\n\nexport default function Week ( props ) {\n\tconst { id } = props;\n\tconst { workoutTypes } = constants;\n\tconst { data, loading } = useSubscription( Queries.weeks.subscribe, { variables: { id }});\n\tconst { data: challengesData, loading: challengesLoading } = useQuery( Queries.dailyChallenges.getAll );\n\tconst [ updateWeek ] = useMutation( Queries.weeks.updateWeek );\n\tconst { openPanel } = useContext( Services.UI );\n\n\tif ( loading || challengesLoading ) return <Loading />;\n    \n\tconst week = _.get( data, \"weeks_by_pk\" );\n\tconst { title, updated_at, days } = week;\n    \n\tconst workouts = _.compact( _.map( days, \"workout\" ));    \n\tconst stats = _.compact( _.map( days, \"workout.stats\" ));\n\n\tconst challenge = _.get( week, \"daily_challenges.id\", \"\" );\n\tconst challenges = _.get( challengesData, \"daily_challenges\", []);\n\tconst challengeSelectOptions = _.map( challenges, ({ id, title }) => ({ value: id, label: title }));\n\n\treturn (\n\t\t<>\n\t\t\t<Pane display=\"flex\" justifyContent=\"flex-end\">\n\t\t\t\t<Button marginLeft={ 8 } iconBefore=\"arrow-down\" onClick={ e => _handleDownload( week, e ) }>Download DOCX</Button>\n\t\t\t</Pane>\n\t\t\t<Pane marginBottom={ 32 } display=\"flex\" flexDirection=\"row\" alignItems=\"center\">\n\t\t\t\t<Pane marginRight={ 16 }>\n\t\t\t\t\t<Heading>{ title }</Heading>\n\t\t\t\t</Pane>\n\t\t\t\t<Pane flex={ 1 }>\n\t\t\t\t\t<Text>Last updated: <Badge color=\"blue\">{ format( parseISO( updated_at ), \"dd MMM yyyy @ h:mm a\" ).replace( \"@\", \"at\" ) }</Badge></Text>\n\t\t\t\t</Pane>\n\t\t\t</Pane>\n\t\t\t<Pane marginBottom={ 32 } >\n\t\t\t\t<Formik\n\t\t\t\t\tinitialValues={{ challenge: _.isNull( challenge ) ? \"\" : challenge }}\n\t\t\t\t\tonSubmit={ async ({ challenge }) => {\n\t\t\t\t\t\tconsole.log( challenge );\n\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\tawait updateWeek({ variables: { id, data: { _challenge: challenge }}});\n\t\t\t\t\t\t} catch ( error ) {\n\t\t\t\t\t\t\tconsole.error( error );\n\t\t\t\t\t\t}\n\t\t\t\t\t}}\n\t\t\t\t\tenableReinitialize={ true }\n\t\t\t\t>{\n\t\t\t\t\t\t({ values, handleSubmit, handleChange }) => {\n\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t\t<form>\n\t\t\t\t\t\t\t\t\t\t<Pane display=\"flex\" width=\"50%\" flexDirection=\"row\" alignItems=\"center\">\n\t\t\t\t\t\t\t\t\t\t\t<SelectField flex={ 1 } label=\"Add a challenge\" name=\"challenge\" value={ values.challenge } onChange={ e => {\n\t\t\t\t\t\t\t\t\t\t\t\thandleChange( e );\n\t\t\t\t\t\t\t\t\t\t\t\thandleSubmit();\n\t\t\t\t\t\t\t\t\t\t\t}} height={ 40 }>\n\t\t\t\t\t\t\t\t\t\t\t\t<option key=\"empty\" value=\"\">Please select one...</option>\n\t\t\t\t\t\t\t\t\t\t\t\t{ challengeSelectOptions && _.map( challengeSelectOptions, ({ value, label }) => ( \n\t\t\t\t\t\t\t\t\t\t\t\t\t<option key={ value } value={ value }>{ label }</option> \n\t\t\t\t\t\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t\t\t\t\t\t</SelectField>\n\t\t\t\t\t\t\t\t\t\t</Pane>\n\t\t\t\t\t\t\t\t\t</form> \n\t\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t}}\n\t\t\t\t</Formik>\n\t\t\t</Pane>\n\t\t\t<Pane display=\"flex\" justifyContent=\"space-between\" marginBottom={ 32 }>\n\t\t\t\t{ days && _.map( days, day => {\n\t\t\t\t\tconst { id, day: { title }, workout } = day;\n\t\t\t\t\tconst workoutTitle = _.get( workout, \"workout.title\" );\n\t\t\t\t\tconst workoutVersion = _.get( workout, \"version_num\" );\n\t\t\t\t\tconst type = _.get( workout, \"workout.type\" );\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<Pane key={ id } elevation={ 1 } width=\"12%\" background=\"white\" paddingLeft={ 16 } paddingBottom={ 16 }>\n\t\t\t\t\t\t\t<Pane display=\"flex\" justifyContent=\"space-between\" alignItems=\"flex-end\" marginBottom={ 8 }>\n\t\t\t\t\t\t\t\t<Heading size={ 200 }>{ title }</Heading>\n\t\t\t\t\t\t\t\t<IconButton icon=\"small-plus\" appearance=\"minimal\" onClick={ () => openPanel({ panel: \"weeks/update-workout\", props: { id, title }, size:\"wide\" })} />\n\t\t\t\t\t\t\t</Pane>\n\t\t\t\t\t\t\t<Pane paddingRight={ 16 }>\n\t\t\t\t\t\t\t\t{ _.isEmpty( workout ) ? \n\t\t\t\t\t\t\t\t\t<Text color='red'>No workout chosen</Text> : <>\n\t\t\t\t\t\t\t\t\t\t<Paragraph marginBottom={ 8 }>{ workoutTitle } - v{ workoutVersion }</Paragraph>\n\t\t\t\t\t\t\t\t\t\t<Badge color=\"blue\">{ _.get( _.find( workoutTypes, [ \"value\", type ]), \"label\" ) }</Badge>\n\t\t\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t</Pane>\n\t\t\t\t\t\t</Pane>\n\t\t\t\t\t);\n\t\t\t\t})}\n\t\t\t</Pane>\n\t\t\t<Pane marginBottom={ 40 }>\n\t\t\t\t<Heading marginBottom={ 8 }>Stats:</Heading>\n\t\t\t\t<Pane display=\"flex\" justifyContent=\"space-between\">\n\t\t\t\t\t<Pane background=\"white\" padding={ 32 } elevation={ 1 } marginBottom={ 24 } width=\"45%\">\n\t\t\t\t\t\t<Heading size={ 200 }>Workout Minutes:</Heading>\n\t\t\t\t\t\t<Pane height={ 250 }>\n\t\t\t\t\t\t\t<WeeksMinutesSplit stats={ stats } />\n\t\t\t\t\t\t</Pane>\n\t\t\t\t\t</Pane>\n\t\t\t\t\t<Pane background=\"white\" padding={ 32 } elevation={ 1 } marginBottom={ 24 } width=\"45%\">\n\t\t\t\t\t\t<Heading size={ 200 }>Energy Systems:</Heading>\n\t\t\t\t\t\t<Pane height={ 250 }>\n\t\t\t\t\t\t\t<EnergySystemSplit workouts={ workouts } />\n\t\t\t\t\t\t</Pane>\n\t\t\t\t\t</Pane>\n\t\t\t\t</Pane>\n\t\t\t</Pane>\n\t\t</>\n\t);\n}\nWeek.propTypes = {\n\tid: PropTypes.string,\n};\n\nconst _handleDownload = ( week, e ) => {\n\te.preventDefault();\n\n\tconst { title, days, daily_challenge } = week;    \n\tconst doc = new Document();\n\n\tconst children = [ new DocXParagraph({ text: title, heading: HeadingLevel.HEADING_1 }) ];\n\n\tif ( daily_challenge && !_.isEmpty( daily_challenge )) {\n\t\t//add challenge to word doc\n\t}\n\n\t_.forEach( days, day => {\n\t\tconst title = _.get( day, \"day.title\", \"\" );\n\t\tconst workout = _.get( day, \"workout\", []);\n\t\tconst drills = _.compact( _.get( day, \"workout.drills\", []));\n    \n\t\tchildren.push( new DocXParagraph({ text: title, heading: HeadingLevel.HEADING_3, spacing: { before: 300 }}));\n    \n\t\tif ( _.isEmpty( workout )) { \n\t\t\tchildren.push( new DocXParagraph({ text: \"Nothing assigned today, rest day!\" }));\n\t\t} else {\n\t\t\tif ( !_.isEmpty( drills )) {\n\t\t\t\tconst drillsText = _.map( drills, ({ drill: { title, url }}) => new DocXParagraph({ text: `${ title }: ${ url }`, bullet: { level: 0 }}));\n\t\t\t\tchildren.push( new DocXParagraph({ text: \"Please perform the following drills:\", heading: HeadingLevel.HEADING_4 }));\n\t\t\t\tchildren.push( ...drillsText );\n\t\t\t}\n\t\t\tchildren.push( new DocXParagraph({ text: workout.body }));\n\t\t}\n\t});\n    \n\tdoc.addSection({ children });\n\tPacker.toBlob( doc ).then( blob => save( blob, `${ title }.docx` ));\n};\n\nconst EnergySystemSplit = memo( function EnergySystemSplit ({ workouts }) {\n\tconst { workoutTypes } = constants;\n\tconst allEnergySystems =  _.uniq( _.map( workoutTypes, \"system\" )).sort();\n\tconst workoutsEnergySystemMap = _.map( workouts, workout => _.get( _.find( workoutTypes, [ \"value\", _.get( workout, \"workout.type\" ) ]), \"system\" ));\n\tconst graphData = _.map( allEnergySystems, system => ({ id: _.capitalize( _.nth( system.split( \" \" ), 1 )), value: _.size( _.filter( workoutsEnergySystemMap, el => el === system )) }));\n\n\treturn (\n\t\t<ResponsiveBar\n\t\t\tdata={ graphData }\n\t\t\tmargin={{ top: 16, right: 16, bottom: 16, left: 72 }}\n\t\t\tlayout=\"horizontal\"\n\t\t\tcolors={{ scheme: \"category10\" }}\n\t\t\tcolorBy=\"index\"\n\t\t\tjustify={ true }\n\t\t\taxisTop={ null }\n\t\t\taxisRight={ null }\n\t\t\taxisBottom={ null }\n\t\t\taxisLeft={{\n\t\t\t\ttickSize: 5,\n\t\t\t\ttickPadding: 5,\n\t\t\t\ttickRotation: 0,\n\t\t\t\tlegendPosition: \"middle\",\n\t\t\t\tlegendOffset: -40,\n\t\t\t}}\n\t\t\tisInteractive={ false }\n\t\t\tenableGridY={ false }\n\t\t/>\n\t);\n}, _.isEqual );\nEnergySystemSplit.propTypes = {\n\tworkouts: PropTypes.array,\n};\n\nconst WeeksMinutesSplit = memo( function WeeksMinutesSplit ({ stats }) {\n\n\tconst graphData = _.map([ \"short\", \"long\" ], id => ({\n\t\tid: id === \"short\" ? \"5/10km\" : \"half/ultra\",\n\t\tbeginner: _.reduce( stats, ( total, curr ) => _.isNull( _.get( curr, `running_minutes_beginner_${ id }`, 0 )) ? total : total + _.get( curr, `running_minutes_beginner_${ id }`, 0 ), 0 ),\n\t\tintermediate: _.reduce( stats, ( total, curr ) => _.isNull( _.get( curr, `running_minutes_intermediate_${ id }`, 0 )) ? total : total + _.get( curr, `running_minutes_intermediate_${ id }`, 0 ), 0 ),\n\t\tadvanced: _.reduce( stats, ( total, curr ) => _.isNull( _.get( curr, `running_minutes_advanced_${ id }`, 0 )) ? total : total + _.get( curr, `running_minutes_advanced_${ id }`, 0 ), 0 ),\n\t}));\n    \n\treturn (\n\t\t<ResponsiveBar\n\t\t\tdata={ graphData }\n\t\t\tmargin={{ top: 16, right: 16, bottom: 32, left: 64 }}\n\t\t\tinnerPadding={ 2 }\n\t\t\tkeys={[ \"beginner\", \"intermediate\", \"advanced\" ]}\n\t\t\tlayout=\"horizontal\"\n\t\t\tgroupMode=\"grouped\"\n\t\t\tcolors={{ scheme: \"category10\" }}\n\t\t\tjustify={ true }\n\t\t\taxisTop={ null }\n\t\t\taxisRight={ null }\n\t\t\taxisBottom={ null }\n\t\t\taxisLeft={{\n\t\t\t\ttickSize: 5,\n\t\t\t\ttickPadding: 5,\n\t\t\t\ttickRotation: 0,\n\t\t\t\tlegendPosition: \"middle\",\n\t\t\t\tlegendOffset: -40,\n\t\t\t}}\n\t\t\tisInteractive={ false }\n\t\t\tenableGridY={ false }\n\t\t\tlegends={[\n\t\t\t\t{\n\t\t\t\t\tdataFrom: \"keys\",\n\t\t\t\t\tanchor: \"bottom\",\n\t\t\t\t\tdirection: \"row\",\n\t\t\t\t\ttranslateX: 0,\n\t\t\t\t\ttranslateY: 32,\n\t\t\t\t\titemWidth: 128,\n\t\t\t\t\titemHeight: 16,\n\t\t\t\t\titemDirection: \"left-to-right\",\n\t\t\t\t\tsymbolSize: 16,\n\t\t\t\t},\n\t\t\t]}\n\t\t/>\n\t);\n}, _.isEqual );\nWeeksMinutesSplit.propTypes = {\n\tstats: PropTypes.array,\n};\n","\n// deps\nimport React, { useContext } from \"react\";\nimport { useQuery } from \"@apollo/react-hooks\";\nimport { Link } from \"react-router-dom\";\nimport _ from \"lodash\";\nimport { differenceInCalendarDays, parseISO } from \"date-fns\";\n\n// app\nimport { Pane, Text, Heading, Button, Badge } from \"evergreen-ui\";\nimport { Services, Queries, Loading } from \"../index\";\n\n//\n// Adultletics Admin / Views / Weeks / Weeks\n//\n\n\nconst now = new Date();\n\nexport default function Weeks () {\n\tconst { openPanel } = useContext( Services.UI );\n\tconst { data, loading } = useQuery( Queries.weeks.getAll );\n\tconst weeks = [ ..._.get( data, \"weeks\", []) ].sort(( a, b ) => parseISO( b.week_start ) - parseISO( a.week_start ));\n\n\tif ( loading ) return <Loading />;\n\n\treturn (\n\t\t<>\n\t\t\t<Pane display=\"flex\" justifyContent=\"flex-end\">\n\t\t\t\t<Button iconBefore=\"plus\" onClick={ () => openPanel({ panel: \"weeks/add\" })}>Add</Button>\n\t\t\t</Pane>\n\t\t\t<Pane marginBottom={ 16 }>\n\t\t\t\t<Heading>All Weeks:</Heading>\n\t\t\t</Pane>\n\t\t\t<Pane marginBottom={ 40 }>\n\t\t\t\t{ weeks && _.map( weeks, workout => {\n\t\t\t\t\tconst { id, title, week_start } = workout;\n\t\t\t\t\tconst age = differenceInCalendarDays( now, parseISO( week_start ));\n\t\t\t\t\tconst background = age >= 7 ? \"#FEF6F6\" : \"white\";\n\t\t\t\t\treturn ( \n\t\t\t\t\t\t<Link to={ `/weeks/${ id }` } key={ id } style={{ marginBottom: \"24px\" }}>\n\t\t\t\t\t\t\t<Pane className=\"c-row-hover\" display=\"flex\" elevation={ 1 } height={ 48 } alignItems=\"center\" background={ background } marginBottom={ 16 }>\n\t\t\t\t\t\t\t\t<Text marginLeft={ 24 } marginRight={ 16 }>{ title }</Text> \n\t\t\t\t\t\t\t\t{ ( age >= 0 && age < 7 ) && <Badge color=\"green\">Current</Badge> }\n\t\t\t\t\t\t\t</Pane> \n\t\t\t\t\t\t</Link>\n\t\t\t\t\t);\n\t\t\t\t})}\n\t\t\t</Pane>\n\t\t</>\n\t);\n}\n","\n// deps\nimport React from \"react\";\nimport { useParams } from \"react-router-dom\";\n\n// app\nimport { Pane, Heading } from \"evergreen-ui\";\nimport Week from \"./week\";\nimport Weeks from \"./weeks\";\n\n//\n// Adultletics Admin / Views / Weeks / Index\n//\n\n\nexport default function WeeksIndex () {\n\tconst { id } = useParams();\n\tconst _weekView = Boolean( id );\n    \n\treturn (\n\t\t<>\n\t\t\t<Pane>\n\t\t\t\t<Heading size={ 800 } color=\"#1070CA\" marginBottom={ 48 }>Weeks</Heading>\n\t\t\t</Pane>\n\t\t\t<Pane>\n\t\t\t\t{ _weekView ? <Week id={ id } /> : <Weeks /> }\n\t\t\t</Pane>\n\t\t</>\n\t);\n}\n","\n// deps\nimport React, { useContext } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { useQuery } from \"@apollo/react-hooks\";\nimport _ from \"lodash\";\n\n// app\nimport { Button, Pane, Heading, Text, Paragraph, Link } from \"evergreen-ui\";\nimport { Services, Queries, Loading } from \"../index\";\n\n//\n// Adultletics Admin / Views / Drills / Drill\n//\n\n\nexport default function Drill ( props ) {\n\tconst { openPanel } = useContext( Services.UI );\n\tconst { id } = props;\n\tconst { data, loading } = useQuery( Queries.drills.getOne, { variables: { id }});\n\n\tif ( loading ) return <Loading />;\n\n\tconst drill = _.get( data, \"drills_by_pk\", {});\n\tconst title = _.get( drill, \"title\" );\n\tconst description = _.get( drill, \"description\" );\n\tconst url = _.get( drill, \"url\" );\n\tconst embed_url = _.get( drill, \"embed_url\" );\n\tconst workouts = _.get( drill, \"workouts_drills\", []);\n\tconst workoutsCount = _.size( workouts );\n\n\treturn (\n\t\t<>\n\t\t\t<Pane display=\"flex\" justifyContent=\"flex-end\">\n\t\t\t\t<Button iconBefore=\"edit\" onClick={ () => openPanel({ panel: \"drills/edit\", props: { id }})}>Edit</Button>\n\t\t\t</Pane>\n\t\t\t<Pane marginBottom={ 32 } display=\"flex\">\n\t\t\t\t<Heading marginRight={ 16 }>{ title }</Heading>\n\t\t\t\t{ url && <Link href={ url } target=\"_blank\" rel=\"noreferrer noopener\">{ url }</Link> }\n\t\t\t</Pane>\n\t\t\t<Pane display=\"flex\">\n\t\t\t\t<Pane flex={ 1 } marginRight={ 32 } >\n\t\t\t\t\t{ description && \n\t\t\t\t\t\t<Pane background=\"white\" padding={ 32 }  marginBottom={ 32 } elevation={ 1 }>\n\t\t\t\t\t\t\t<Paragraph>{ description }</Paragraph>\n\t\t\t\t\t\t</Pane> \n\t\t\t\t\t}\n\t\t\t\t\t<Pane background=\"white\" padding={ 32 }  marginBottom={ 32 } elevation={ 1 }>\n\t\t\t\t\t\t<Text>Appears in <strong>{ workoutsCount }</strong> workouts</Text>\n\t\t\t\t\t</Pane>\n\t\t\t\t</Pane>\n\t\t\t\t{ embed_url && <Pane elevation={ 1 } height={ 315 } width={ 560 }>\n\t\t\t\t\t<iframe width=\"560\" height=\"315\" src={ embed_url } title={ title } frameBorder=\"0\" allow=\"accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture\" allowFullScreen></iframe>\n\t\t\t\t</Pane> }\n\t\t\t</Pane>\n\t\t</>\n\t);\n}\nDrill.propTypes = {\n\tid: PropTypes.string,\n};\n","\n// deps\nimport React, { useContext } from \"react\";\nimport { useQuery } from \"@apollo/react-hooks\";\nimport _ from \"lodash\";\nimport { Link } from \"react-router-dom\";\n\n// app\nimport { Pane, Heading, Text, Button } from \"evergreen-ui\";\nimport { Services, Queries, Loading } from \"../index\";\n\n//\n// Adultletics Admin / Views / Drills / Drills\n//\n\n\nexport default function Drills () {\n\tconst { openPanel } = useContext( Services.UI );\n\tconst { data, loading } = useQuery( Queries.drills.getAll );\n\tconst drills = _.get( data, \"drills\" );\n\n\tif ( loading ) return <Loading />;\n\n\treturn (\n\t\t<>\n\t\t\t<Pane display=\"flex\" justifyContent=\"flex-end\">\n\t\t\t\t<Button iconBefore=\"plus\" onClick={ () => openPanel({ panel: \"drills/add\" })}>Add</Button>\n\t\t\t</Pane>\n\t\t\t<Pane marginBottom={ 16 }>\n\t\t\t\t<Heading>All Drills:</Heading>\n\t\t\t</Pane>\n\t\t\t<Pane>\n\t\t\t\t{ drills && _.map( drills, drill => {\n\t\t\t\t\tconst { id, title } = drill;\n\t\t\t\t\treturn ( \n\t\t\t\t\t\t<Link to={ `/drills/${ id }` } key={ id } style={{ marginBottom: \"24px\" }}>\n\t\t\t\t\t\t\t<Pane className=\"c-row-hover\" display=\"flex\" elevation={ 1 } height={ 48 } alignItems=\"center\" background=\"white\" marginBottom={ 16 }>\n\t\t\t\t\t\t\t\t<Text marginLeft={ 24 }>{ title }</Text> \n\t\t\t\t\t\t\t</Pane> \n\t\t\t\t\t\t</Link>\n\t\t\t\t\t);\n\t\t\t\t})}\n\t\t\t</Pane>\n\t\t</>\n\t);\n}\n","\n// deps\nimport React from \"react\";\nimport { useParams } from \"react-router-dom\";\n\n// app\nimport { Pane, Heading } from \"evergreen-ui\";\nimport Drill from \"./drill\";\nimport Drills from \"./drills\";\n\n//\n// Adultletics Admin / Views / Weeks / Index\n//\n\n\nexport default function DrillsIndex () {\n\tconst { id } = useParams();\n\tconst _drillView = Boolean( id );\n    \n\treturn (\n\t\t<>\n\t\t\t<Pane>\n\t\t\t\t<Heading size={ 800 } color=\"#1070CA\" marginBottom={ 48 }>Drills</Heading>\n\t\t\t</Pane>\n\t\t\t<Pane>\n\t\t\t\t{ _drillView ? <Drill id={ id } /> : <Drills /> }\n\t\t\t</Pane>\n\t\t</>\n\t);\n}\n","\n// deps\nimport React, { useContext } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { useQuery } from \"@apollo/react-hooks\";\nimport _ from \"lodash\";\n\n// app\nimport { Button, Pane, Heading, Text, Paragraph } from \"evergreen-ui\";\nimport { Services, Queries, Loading } from \"../index\";\n\n//\n// Adultletics Admin / Views / Challenges / Challenge\n//\n\n\nexport default function Challenge ( props ) {\n\tconst { openPanel } = useContext( Services.UI );\n\tconst { id } = props;\n\tconst { data, loading } = useQuery( Queries.dailyChallenges.getOne, { variables: { id }});\n\n\tif ( loading ) return <Loading />;\n\n\tconst challenge = _.get( data, \"daily_challenges_by_pk\", {});\n\tconst title = _.get( challenge, \"title\" );\n\tconst description = _.get( challenge, \"description\" );\n\tconst weeks = _.get( challenge, \"workouts_drills\", []);\n\tconst weeksCount = _.size( weeks );\n\n\treturn (\n\t\t<>\n\t\t\t<Pane display=\"flex\" justifyContent=\"flex-end\">\n\t\t\t\t<Button iconBefore=\"edit\" onClick={ () => openPanel({ panel: \"daily-challenges/edit\", props: { id }})}>Edit</Button>\n\t\t\t</Pane>\n\t\t\t<Pane marginBottom={ 32 } display=\"flex\">\n\t\t\t\t<Heading marginRight={ 16 }>{ title }</Heading>\n\t\t\t</Pane>\n\t\t\t<Pane display=\"flex\">\n\t\t\t\t<Pane flex={ 1 } marginRight={ 32 } >\n\t\t\t\t\t{ description && \n\t\t\t\t\t\t<Pane background=\"white\" padding={ 32 }  marginBottom={ 32 } elevation={ 1 }>\n\t\t\t\t\t\t\t<Paragraph>{ description }</Paragraph>\n\t\t\t\t\t\t</Pane> \n\t\t\t\t\t}\n\t\t\t\t\t<Pane background=\"white\" padding={ 32 }  marginBottom={ 32 } elevation={ 1 }>\n\t\t\t\t\t\t<Text>Appears in <strong>{ weeksCount }</strong> weeks</Text>\n\t\t\t\t\t</Pane>\n\t\t\t\t</Pane>\n\t\t\t</Pane>\n\t\t</>\n\t);\n}\nChallenge.propTypes = {\n\tid: PropTypes.string,\n};\n","\n// deps\nimport React, { useContext } from \"react\";\nimport { useQuery } from \"@apollo/react-hooks\";\nimport _ from \"lodash\";\nimport { Link } from \"react-router-dom\";\n\n// app\nimport { Pane, Heading, Text, Button } from \"evergreen-ui\";\nimport { Services, Queries, Loading } from \"../index\";\n\n//\n// Adultletics Admin / Views / Challenges / Challenges\n//\n\n\nexport default function Challenges () {\n\tconst { openPanel } = useContext( Services.UI );\n\tconst { data, loading } = useQuery( Queries.dailyChallenges.getAll );\n\tconst daily_challenges = _.get( data, \"daily_challenges\" );\n\n\tif ( loading ) return <Loading />;\n\n\treturn (\n\t\t<>\n\t\t\t<Pane display=\"flex\" justifyContent=\"flex-end\">\n\t\t\t\t<Button iconBefore=\"plus\" onClick={ () => openPanel({ panel: \"daily-challenges/add\" })}>Add</Button>\n\t\t\t</Pane>\n\t\t\t<Pane marginBottom={ 16 }>\n\t\t\t\t<Heading>All Daily Challenges:</Heading>\n\t\t\t</Pane>\n\t\t\t<Pane>\n\t\t\t\t{ daily_challenges && _.map( daily_challenges, drill => {\n\t\t\t\t\tconst { id, title } = drill;\n\t\t\t\t\treturn ( \n\t\t\t\t\t\t<Link to={ `/challenges/${ id }` } key={ id } style={{ marginBottom: \"24px\" }}>\n\t\t\t\t\t\t\t<Pane className=\"c-row-hover\" display=\"flex\" elevation={ 1 } height={ 48 } alignItems=\"center\" background=\"white\" marginBottom={ 16 }>\n\t\t\t\t\t\t\t\t<Text marginLeft={ 24 }>{ title }</Text> \n\t\t\t\t\t\t\t</Pane> \n\t\t\t\t\t\t</Link>\n\t\t\t\t\t);\n\t\t\t\t})}\n\t\t\t</Pane>\n\t\t</>\n\t);\n}\n","\n// deps\nimport React from \"react\";\nimport { useParams } from \"react-router-dom\";\n\n// app\nimport { Pane, Heading } from \"evergreen-ui\";\nimport Challenge from \"./challenge\";\nimport Challenges from \"./challenges\";\n\n//\n// Adultletics Admin / Views / Challenges / Index\n//\n\n\nexport default function DrillsIndex () {\n\tconst { id } = useParams();\n\tconst _drillView = Boolean( id );\n    \n\treturn (\n\t\t<>\n\t\t\t<Pane>\n\t\t\t\t<Heading size={ 800 } color=\"#1070CA\" marginBottom={ 48 }>Daily Challenges</Heading>\n\t\t\t</Pane>\n\t\t\t<Pane>\n\t\t\t\t{ _drillView ? <Challenge id={ id } /> : <Challenges /> }\n\t\t\t</Pane>\n\t\t</>\n\t);\n}\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from \"react\";\nimport { hydrate, render } from \"react-dom\";\nimport { App } from \"./views\";\nimport * as serviceWorker from \"./serviceWorker\";\n\nconst rootElement = document.getElementById( \"root\" );\nif ( rootElement.hasChildNodes()) {\n\thydrate( <App />, rootElement );\n} else {\n\trender( <App />, rootElement );\n}\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}