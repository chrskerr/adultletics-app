(this["webpackJsonpadultletics-admin"]=this["webpackJsonpadultletics-admin"]||[]).push([[0],{371:function(e,t,n){e.exports=n(612)},376:function(e,t,n){},612:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),i=n(97),l=(n(376),n(34)),o=n(20),u=n(23),c=n.n(u),s=n(32),m=n(1),d=n.n(m),g=n(139),b=n.n(g),p=(n(382),n(4)),_=n.n(p),f=n(19);function h(e){var t=e.children,n=Object(f.a)(),i=Object(a.useContext)(ct.Auth),l=i.updateAuth,o=i.authUser,u=i.uid,m=i.isAuthenticated;return Object(a.useEffect)((function(){u&&u!==_.a.get(o,"uid","")&&Object(s.a)(c.a.mark((function e(){var t,a;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.query({query:ut.auth.getUser,variables:{uid:u}});case 2:t=e.sent,a=_.a.get(t,"data.users_by_pk"),l({authUser:a});case 5:case"end":return e.stop()}}),e)})))()}),[u]),Object(a.useEffect)((function(){l({signIn:function(){var e=Object(s.a)(c.a.mark((function e(t,n){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.a.auth().signInWithEmailAndPassword(t,n);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),signOut:function(){return b.a.auth().signOut()}}),b.a.auth().onAuthStateChanged(function(){var e=Object(s.a)(c.a.mark((function e(t){var n,a;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(l({isAuthenticating:!0}),!t){e.next=12;break}return e.next=4,t.getIdToken();case 4:return n=e.sent,e.next=7,t.getIdTokenResult();case 7:a=e.sent,a.claims["https://hasura.io/jwt/claims"]&&l({token:n,uid:t.uid}),e.next=13;break;case 12:l({authUser:{},token:null,uid:""});case 13:l({isAuthenticating:!1});case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}),[]),Object(a.useEffect)((function(){_.a.isEmpty(o)&&!1!==m&&l({isAuthenticated:!1}),_.a.isEmpty(o)||!0===m||l({isAuthenticated:!0})}),[o]),r.a.createElement(r.a.Fragment,null,t&&t)}b.a.initializeApp({apiKey:"AIzaSyD9LoUcLzcnKOSqUKvqb1rTwM1gJU5D_tc",authDomain:"adultletics-admin.firebaseapp.com",databaseURL:"https://adultletics-admin.firebaseio.com",projectId:"adultletics-admin"}),h.propTypes={children:d.a.node};var E=n(45),k=n(99),v=n(664),y=n(666),w=function(){var e=window.innerWidth;return e<=640?"small":e<=1008?"medium":"large"};function j(){var e=ct.UI,t=ct.Auth,n=Object(a.useState)({panel:{},openPanel:function(e){return c((function(t){return Object(l.a)({},t,{panel:e})}))},closePanel:function(){return c((function(e){return Object(l.a)({},e,{panel:{}})}))},breakpoint:w(),setBreakpoint:function(e){return c((function(t){return Object(l.a)({},t,{breakpoint:e})}))}}),i=Object(o.a)(n,2),u=i[0],c=i[1],s=Object(a.useContext)(t).isAuthenticated,m=u.breakpoint,d=u.setBreakpoint;return Object(a.useEffect)((function(){return window.addEventListener("resize",(function(){return d(w())}))}),[d]),Object(a.useEffect)((function(){"large"!==m&&v.a.warning("This page is designed for a larger browswer",{duration:30})}),[m]),r.a.createElement(r.a.Fragment,null,r.a.createElement(e.Provider,{value:u},r.a.createElement(E.a,null,r.a.createElement(oe,null),r.a.createElement(y.a,{background:"tint1",minHeight:"100vh"},r.a.createElement(me,null),r.a.createElement("div",{className:"v-router"},s?r.a.createElement(k.c,null,r.a.createElement(k.a,{path:"/drills/:id?"},r.a.createElement(Rt,null)),r.a.createElement(k.a,{path:"/workouts/:id?"},r.a.createElement(wt,null)),r.a.createElement(k.a,{path:"/weeks/:id?"},r.a.createElement(Dt,null)),r.a.createElement(k.a,{path:"/challenges/:id?"},r.a.createElement(qt,null)),r.a.createElement(k.a,{path:"/"},r.a.createElement(pt,null))):r.a.createElement(mt,null))))))}var O=n(58),x=n(100),C=n(317),B=n(333),S=n(61),A=n(9),z=n(332);function P(e){var t=e.children,n=Object(a.useContext)(ct.Auth).token,i=new B.a({uri:"https://adultletics-hasura.herokuapp.com/v1/graphql",headers:n?{Authorization:"Bearer ".concat(n)}:{}}),l=new C.a({uri:"wss://adultletics-hasura.herokuapp.com/v1/graphql",options:{reconnect:!0,timeout:3e4,connectionParams:n?{headers:{Authorization:"Bearer ".concat(n)}}:{}}}),o=Object(S.d)((function(e){var t=e.query,n=Object(A.l)(t),a=n.kind,r=n.operation;return"OperationDefinition"===a&&"subscription"===r}),l,i),u=new x.c({link:o,cache:new z.a});return r.a.createElement(O.a,{client:u},t)}function D(){var e=ct.Auth,t=Object(a.useState)({authUser:{},token:"",uid:"",isAuthenticating:!0,isAuthenticated:!1,updateAuth:function(e){return u((function(t){return Object(l.a)({},t,{},e)}))},signIn:function(){},signOut:function(){}}),n=Object(o.a)(t,2),i=n[0],u=n[1];return r.a.createElement("div",{className:"App"},r.a.createElement(e.Provider,{value:i},r.a.createElement(P,null,r.a.createElement(h,null,r.a.createElement(j,null)))))}var I=n(663),W=n(642),$=n(315),R=n(44);var L=n(639),F=n(180),q=n(643),U=n(53);var T=n(81),V=n(644),N=n(227),Q=n(641),M=n(640);var H=n(75);var Y=n(649),G=n(645),Z=n(646),X=n(647),J=n(648),K=n(662),ee=new Date;var te=n(650);var ne=function(e,t){var n=t.title,a=t.type,r=_.a.map(e,(function(e){return _.a.lowerCase(e)}));return _.a.reduce(r,(function(e,t){return _.a.lowerCase(n).includes(t)||_.a.lowerCase(a).includes(t)?e+1:e}),0)},ae=function(e){var t,n=e.workout,i=e.matchSize,l=e.onSelect,u=e.selected,c=Object(a.useState)(function(e){var t=_.a.get(e,"versions"),n=_.a.map(t,(function(e){var t=e.version_num;return{label:"v".concat(t),value:t}}));return _.a.reduce(n,(function(e,t){return t.value>e?t.value:e}),0)}(n)),s=Object(o.a)(c,2),m=s[0],d=s[1],g=Object(a.useState)(!0),b=Object(o.a)(g,2),p=b[0],f=b[1],h=_.a.get(n,"title"),E=_.a.get(n,"versions"),k=_.a.get(n,"match"),v=_.a.map(E,(function(e){var t=e.version_num;return{label:"v".concat(t),value:t}})),w=_.a.find(E,["version_num",m]),j=_.a.get(w,"id"),O=p?_.a.truncate(_.a.get(w,"body"),{lenght:100}):_.a.get(w,"body");Object(a.useEffect)((function(){u&&l(j)}),[j]),t=u?{color:"white",background:"#B7D4EF"}:k===i?{background:"white"}:{background:"#66788A"};return r.a.createElement(y.a,{display:"flex",flexDirection:"row",minHeight:32,marginBottom:16},r.a.createElement(y.a,{display:"flex"},r.a.createElement(N.a,{onChange:function(e){return d(Number(e.target.value))},defaultValue:m},v&&_.a.map(v,(function(e){var t=e.value,n=e.label;return r.a.createElement("option",{key:t,value:t},n)}))),r.a.createElement(Q.a,{icon:p?"expand-all":"collapse-all",iconSize:10,appearance:"minimal",onClick:function(e){e.preventDefault(),f(!p)}})),r.a.createElement(y.a,Object.assign({},t,{elevation:1,display:"flex",flex:1,onClick:function(){l(u?"":j)},paddingLeft:16,paddingRight:16,paddingBottom:p?0:16,paddingTop:p?0:16}),r.a.createElement(y.a,{display:"flex",alignItems:"center"},r.a.createElement(L.a,{size:300,marginRight:16},h)),r.a.createElement(y.a,{flex:1,display:"flex",flexDirection:"column",justifyContent:"center"},O&&_.a.map(O.split("\n"),(function(e,t){return e?r.a.createElement(U.a,{key:t},e):r.a.createElement("br",{key:t})})))))},re=n(669);var ie={"auth/sign-in":function(){var e=Object(a.useContext)(ct.Auth),t=e.isAuthenticating,n=e.signIn,i=Object(a.useContext)(ct.UI).closePanel,l=Object(a.useState)(null),u=Object(o.a)(l,2),m=u[0],d=u[1];return r.a.createElement(R.a,{initialValues:{},onSubmit:function(){var e=Object(s.a)(c.a.mark((function e(t){var a,r;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.email,r=t.password,d(null),e.prev=2,e.next=5,n(a,r);case 5:i(),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(2),console.error(e.t0),d(e.t0.message);case 12:case"end":return e.stop()}}),e,null,[[2,8]])})));return function(t){return e.apply(this,arguments)}}()},(function(e){var n=e.values,a=e.handleChange,i=e.handleSubmit,l=e.isSubmitting;return r.a.createElement("form",null,r.a.createElement(W.a,{label:"Email",type:"email",name:"email",onChange:a,autoFocus:!0}),r.a.createElement(W.a,{label:"Password",type:"password",name:"password",onChange:a}),r.a.createElement($.a,{isLoading:t||l,disabled:!n.email||!n.password,onClick:i},"Log In"),m&&r.a.createElement("p",null,m))}))},"drills/add":function(){var e=Object(f.b)(ut.drills.add,{refetchQueries:[{query:ut.drills.getAll}],awaitRefetchQueries:!0}),t=Object(o.a)(e,1)[0],n=Object(a.useContext)(ct.UI).closePanel,i=Object(a.useState)(null),l=Object(o.a)(i,2),u=l[0],m=l[1];return r.a.createElement(r.a.Fragment,null,r.a.createElement(y.a,{marginBottom:56},r.a.createElement(L.a,{size:600},"Adding a new drill")),r.a.createElement(R.a,{initialValues:{description:""},onSubmit:function(){var e=Object(s.a)(c.a.mark((function e(a){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return m(null),e.prev=1,e.next=4,t({variables:{objects:[a]}});case 4:n(),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(1),console.error(e.t0),m(e.t0.message);case 11:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(t){return e.apply(this,arguments)}}()},(function(e){var t=e.values,n=e.dirty,a=e.handleChange,i=e.handleSubmit,l=e.isSubmitting;return r.a.createElement(r.a.Fragment,null,r.a.createElement("form",null,r.a.createElement(W.a,{label:"Title",name:"title",onChange:a,autoFocus:!0}),r.a.createElement(W.a,{label:"Url to include on weekly workout download",name:"url",value:t.url,placeholder:"https://youtu.be/nPMB8PZE9F8",onChange:a}),r.a.createElement(W.a,{label:"Url to include the video in this Admin Portal (see below on how-to find)",name:"embed_url",value:t.embed_url,placeholder:"https://www.youtube-nocookie.com/embed/nPMB8PZE9F8",onChange:a}),r.a.createElement(F.a,{label:"Workout Description",marginBottom:16},r.a.createElement(q.a,{name:"description",onChange:a})),r.a.createElement($.a,{iconBefore:l?"":"tick",isLoading:l,disabled:!n||!t.title||!t.url,onClick:i},"Add"),u&&r.a.createElement("p",null,u)),r.a.createElement(y.a,{marginTop:24},r.a.createElement(U.a,null,'To find embed URL: go to the YouTube page, click on Share just below the video display, click on Embed in the pop-up, then select "Enable privacy-enhanced mode" and finally copy the quoted part of the text following "src=" in the text to the right, should look something like "https://www.youtube-nocookie.com/embed/nPMB8PZE9F8"')))})))},"drills/edit":function(e){var t=e.props.id,n=Object(f.c)(ut.drills.getOne,{variables:{id:t}}),i=n.data,l=n.loading,u=Object(f.b)(ut.drills.update,{refetchQueries:[{query:ut.drills.getOne,variables:{id:t}}],awaitRefetchQueries:!0}),m=Object(o.a)(u,1)[0],d=Object(a.useContext)(ct.UI).closePanel,g=Object(a.useState)(null),b=Object(o.a)(g,2),p=b[0],h=b[1];if(l)return null;var E=_.a.get(i,"drills_by_pk"),k=_.a.get(E,"title"),v=_.a.get(E,"url"),w=_.a.get(E,"embed_url"),j=_.a.get(E,"description");return r.a.createElement(r.a.Fragment,null,r.a.createElement(y.a,{marginBottom:56},r.a.createElement(L.a,{size:600},"Editing challenge: ",k)),r.a.createElement(R.a,{initialValues:{title:k,url:v,embed_url:w,description:_.a.isNull(j)?"":j},onSubmit:function(){var e=Object(s.a)(c.a.mark((function e(n){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return h(null),e.prev=1,e.next=4,m({variables:{id:t,data:n}});case 4:d(),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(1),console.error(e.t0),h(e.t0.message);case 11:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(t){return e.apply(this,arguments)}}(),enableReinitialize:!0},(function(e){var t=e.values,n=e.dirty,a=e.handleChange,i=e.handleSubmit,l=e.isSubmitting;return r.a.createElement(r.a.Fragment,null,r.a.createElement("form",null,r.a.createElement(W.a,{label:"Title",name:"title",value:t.title,onChange:a,autoFocus:!0}),r.a.createElement(W.a,{label:"Url to include on weekly workout download",name:"url",value:t.url,placeholder:"https://youtu.be/nPMB8PZE9F8",onChange:a}),r.a.createElement(W.a,{label:"Url to include on this page (see below on how-to find)",name:"embed_url",value:t.embed_url,placeholder:"https://www.youtube-nocookie.com/embed/nPMB8PZE9F8",onChange:a}),r.a.createElement(F.a,{label:"Workout Description",marginBottom:16},r.a.createElement(q.a,{name:"description",onChange:a,value:t.description})),r.a.createElement($.a,{iconBefore:l?"":"tick",isLoading:l,disabled:!n||!t.title||!t.url,onClick:i},"Update"),p&&r.a.createElement("p",null,p)),r.a.createElement(y.a,{marginTop:24},r.a.createElement(U.a,null,'To find embed URL: go to the YouTube page, click on Share just below the video display, click on Embed in the pop-up, then select "Enable privacy-enhanced mode" and finally copy the quoted part of the text following "src=" in the text to the right, should look something like "https://www.youtube-nocookie.com/embed/nPMB8PZE9F8"')))})))},"daily-challenges/add":function(){var e=Object(f.b)(ut.dailyChallenges.add,{refetchQueries:[{query:ut.dailyChallenges.getAll}],awaitRefetchQueries:!0}),t=Object(o.a)(e,1)[0],n=Object(a.useContext)(ct.UI).closePanel,i=Object(a.useState)(null),l=Object(o.a)(i,2),u=l[0],m=l[1];return r.a.createElement(r.a.Fragment,null,r.a.createElement(y.a,{marginBottom:56},r.a.createElement(L.a,{size:600},"Adding a new daily challenge")),r.a.createElement(R.a,{initialValues:{description:""},onSubmit:function(){var e=Object(s.a)(c.a.mark((function e(a){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return m(null),e.prev=1,e.next=4,t({variables:{objects:[a]}});case 4:n(),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(1),console.error(e.t0),m(e.t0.message);case 11:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(t){return e.apply(this,arguments)}}()},(function(e){var t=e.values,n=e.dirty,a=e.handleChange,i=e.handleSubmit,l=e.isSubmitting;return r.a.createElement(r.a.Fragment,null,r.a.createElement("form",null,r.a.createElement(W.a,{label:"Title",name:"title",onChange:a,autoFocus:!0}),r.a.createElement(F.a,{label:"Description",marginBottom:16},r.a.createElement(q.a,{name:"description",onChange:a})),r.a.createElement($.a,{iconBefore:l?"":"tick",isLoading:l,disabled:!n||!t.title||!t.description,onClick:i},"Add"),u&&r.a.createElement("p",null,u)))})))},"daily-challenges/edit":function(e){var t=e.props.id,n=Object(f.c)(ut.dailyChallenges.getOne,{variables:{id:t}}),i=n.data,l=n.loading,u=Object(f.b)(ut.dailyChallenges.update,{refetchQueries:[{query:ut.dailyChallenges.getOne,variables:{id:t}}],awaitRefetchQueries:!0}),m=Object(o.a)(u,1)[0],d=Object(a.useContext)(ct.UI).closePanel,g=Object(a.useState)(null),b=Object(o.a)(g,2),p=b[0],h=b[1];if(l)return null;var E=_.a.get(i,"daily_challenges_by_pk"),k=_.a.get(E,"title"),v=_.a.get(E,"description","");return r.a.createElement(r.a.Fragment,null,r.a.createElement(y.a,{marginBottom:56},r.a.createElement(L.a,{size:600},"Editing challenge: ",k)),r.a.createElement(R.a,{initialValues:{title:k,description:_.a.isNull(v)?"":v},onSubmit:function(){var e=Object(s.a)(c.a.mark((function e(n){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return h(null),e.prev=1,e.next=4,m({variables:{id:t,data:n}});case 4:d(),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(1),console.error(e.t0),h(e.t0.message);case 11:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(t){return e.apply(this,arguments)}}(),enableReinitialize:!0},(function(e){var t=e.values,n=e.dirty,a=e.handleChange,i=e.handleSubmit,l=e.isSubmitting;return r.a.createElement(r.a.Fragment,null,r.a.createElement("form",null,r.a.createElement(W.a,{label:"Title",name:"title",value:t.title,onChange:a,autoFocus:!0}),r.a.createElement(F.a,{label:"Description",marginBottom:16},r.a.createElement(q.a,{name:"description",onChange:a,value:t.description})),r.a.createElement($.a,{iconBefore:l?"":"tick",isLoading:l,disabled:!n||!t.title||!t.description,onClick:i},"Update"),p&&r.a.createElement("p",null,p)))})))},"workouts/add":function(e){var t=e.props.emit,n=Object(f.c)(ut.drills.getAll),i=n.data,l=n.loading,u=Object(f.b)(ut.workouts.addVersion,{refetchQueries:[{query:ut.workouts.getAll}],awaitRefetchQueries:!0}),m=Object(o.a)(u,1)[0],d=Object(a.useContext)(ct.Auth).authUser,g=Object(a.useContext)(ct.UI).closePanel,b=Object(a.useState)(null),p=Object(o.a)(b,2),h=p[0],E=p[1],v=Object(a.useState)([]),w=Object(o.a)(v,2),j=w[0],O=w[1],x=dt.intensityOptions,C=dt.workoutTypes,B=Object(k.f)(),S=_.a.get(i,"drills"),A=_.a.filter(S,(function(e){return!_.a.some(j,["id",e.id])}));return l?r.a.createElement(mt,null):r.a.createElement(r.a.Fragment,null,r.a.createElement(y.a,{marginBottom:56},r.a.createElement(L.a,{size:600},"Adding a new workout")),r.a.createElement(R.a,{initialValues:{running_km:0,running_minutes:0,intensity:"3"},onSubmit:function(){var e=Object(s.a)(c.a.mark((function e(n){var a,r,i,l,o,u,s,b,p;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.title,r=n.body,i=n.stats,l=n.intensity,o=n.type,E(null),console.log(i),e.prev=3,u=_.a.map(j,(function(e){return{_drill:e.id}})),e.next=7,m({variables:{objects:[{version_num:1,_owner:d.id,body:r,workout:{data:{title:a,type:o,intensity:l}},stats:{data:i||{}},drills:{data:u}}]}});case 7:s=e.sent,g(),b=_.a.get(s,"data.insert_workouts_versions.returning[0].id"),p=_.a.get(s,"data.insert_workouts_versions.returning[0].workout.id"),t&&t(b),t||B.push("/workouts/".concat(p)),e.next=19;break;case 15:e.prev=15,e.t0=e.catch(3),console.error(e.t0),E(e.t0.message);case 19:case"end":return e.stop()}}),e,null,[[3,15]])})));return function(t){return e.apply(this,arguments)}}()},(function(e){var t=e.values,n=e.dirty,a=e.handleChange,i=e.handleSubmit,l=e.isSubmitting,o=e.setFieldValue;return r.a.createElement(r.a.Fragment,null,r.a.createElement("form",null,r.a.createElement(W.a,{label:"Workout Title",name:"title",onChange:a,autoFocus:!0}),r.a.createElement(F.a,{label:"Workout Intensity",onChange:function(e){return o("intensity",e.target.value)},marginBottom:16},r.a.createElement(y.a,{display:"flex",flexDirection:"row",justifyContent:"space-between"},_.a.map(x,(function(e){var n=e.label,a=e.value;return r.a.createElement(V.a,{key:a,name:"intensity",value:a,label:n,checked:a===t.intensity})})))),r.a.createElement(F.a,{label:"Workout Type",marginBottom:16},r.a.createElement(N.a,{name:"type",value:t.type,onChange:a,height:32},r.a.createElement("option",{key:"empty",value:""},"Please select an option..."),C&&_.a.map(C,(function(e){var t=e.value,n=e.label;return r.a.createElement("option",{key:t,value:t},n)})))),r.a.createElement(F.a,{label:"Add Drills to Workout",marginBottom:16},r.a.createElement(y.a,{marginBottom:8,display:"flex",justifyContent:"space-between"},r.a.createElement(N.a,{name:"drill",value:t.drill,onChange:a,height:32},r.a.createElement("option",{key:"empty",value:""},"Please select an option..."),A&&_.a.map(A,(function(e){var t=e.id,n=e.title;return r.a.createElement("option",{key:t,value:t},n)}))),r.a.createElement($.a,{iconBefore:"tick",disabled:!t.drill,onClick:function(e){e.preventDefault(),O([].concat(Object(T.a)(j),[_.a.find(S,["id",t.drill])]))},marginRight:8,marginLeft:8},"Attach drill")),r.a.createElement(y.a,null,h&&r.a.createElement("p",null,h))),r.a.createElement(F.a,{label:"Selected Drills",marginBottom:16},r.a.createElement(y.a,null,_.a.isEmpty(j)?r.a.createElement(M.a,{marginBottom:16},"No drills selected"):_.a.map(j,(function(e){var t=e.id,n=e.title;return r.a.createElement(y.a,{display:"flex",flexDirection:"row",elevation:1,height:32,alignItems:"center",background:"white",marginBottom:16,key:t,paddingLeft:16,paddingRight:8},r.a.createElement(U.a,{flex:1},n),r.a.createElement(Q.a,{icon:"small-cross",intent:"danger",appearance:"minimal",onClick:function(e){e.preventDefault(),O(_.a.filter(j,(function(e){return e.id!==t})))}}))})))),r.a.createElement(F.a,{label:"Workout Description",marginBottom:16},r.a.createElement(q.a,{name:"body",onChange:a,rows:24})),r.a.createElement(F.a,{label:"Stats",marginBottom:16},r.a.createElement("table",{className:"stats-input-table"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null),r.a.createElement("th",{colSpan:2},r.a.createElement(L.a,{size:200},"5/10km")),r.a.createElement("th",{colSpan:2},r.a.createElement(L.a,{size:200},"half/ultra")))),r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("td",null,r.a.createElement(L.a,{size:200},"Beginner")),r.a.createElement("td",null,r.a.createElement(W.a,{label:"km",name:"stats.running_km_beginner_short",type:"number",onChange:a})),r.a.createElement("td",null,r.a.createElement(W.a,{label:"mins",name:"stats.running_minutes_beginner_short",type:"number",onChange:a})),r.a.createElement("td",null,r.a.createElement(W.a,{label:"km",name:"stats.running_km_beginner_long",type:"number",onChange:a})),r.a.createElement("td",null,r.a.createElement(W.a,{label:"mins",name:"stats.running_minutes_beginner_long",type:"number",onChange:a}))),r.a.createElement("tr",null,r.a.createElement("td",null,r.a.createElement(L.a,{size:200},"Intermediate")),r.a.createElement("td",null,r.a.createElement(W.a,{label:"km",name:"stats.running_km_intermediate_short",type:"number",onChange:a})),r.a.createElement("td",null,r.a.createElement(W.a,{label:"mins",name:"stats.running_minutes_intermediate_short",type:"number",onChange:a})),r.a.createElement("td",null,r.a.createElement(W.a,{label:"km",name:"stats.running_km_intermediate_long",type:"number",onChange:a})),r.a.createElement("td",null,r.a.createElement(W.a,{label:"mins",name:"stats.running_minutes_intermediate_long",type:"number",onChange:a}))),r.a.createElement("tr",null,r.a.createElement("td",null,r.a.createElement(L.a,{size:200},"Advanced")),r.a.createElement("td",null,r.a.createElement(W.a,{label:"km",name:"stats.running_km_advanced_short",type:"number",onChange:a})),r.a.createElement("td",null,r.a.createElement(W.a,{label:"mins",name:"stats.running_minutes_advanced_short",type:"number",onChange:a})),r.a.createElement("td",null,r.a.createElement(W.a,{label:"km",name:"stats.running_km_advanced_long",type:"number",onChange:a})),r.a.createElement("td",null,r.a.createElement(W.a,{label:"mins",name:"stats.running_minutes_advanced_long",type:"number",onChange:a})))))),r.a.createElement($.a,{iconBefore:l?"":"tick",isLoading:l,disabled:!n||!t.title,onClick:i},"Add"),h&&r.a.createElement("p",null,h)))})))},"workouts/add-version":function(e){var t=e.props,n=t.id,i=t.workoutId,u=t.emit,m=Object(f.c)(ut.workouts.getOne,{variables:{id:i}}),d=m.data,g=m.loading,b=Object(f.c)(ut.drills.getAll),p=b.data,h=b.loading,E=Object(f.c)(ut.workouts.getVersion,{variables:{id:n}}),k=E.data,v=E.loading,w=Object(f.b)(ut.workouts.addVersion),j=Object(o.a)(w,1)[0],O=Object(a.useState)([]),x=Object(o.a)(O,2),C=x[0],B=x[1],S=Object(a.useContext)(ct.UI).closePanel,A=Object(a.useContext)(ct.Auth).authUser,z=Object(a.useState)(null),P=Object(o.a)(z,2),D=P[0],I=P[1],V=_.a.get(k,"workouts_versions_by_pk");if(Object(a.useEffect)((function(){return B(_.a.map(_.a.get(V,"drills",[]),"drill"))}),[V]),v||g||h)return r.a.createElement(mt,null);var H=_.a.reduce(_.a.get(d,"workouts_by_pk.versions"),(function(e,t){return t.version_num>e?t.version_num:e}),0)+1,Y={body:_.a.get(V,"body"),running_km:_.a.get(V,"stats.running_km",0),running_minutes:_.a.get(V,"stats.running_minutes",0)},G=_.a.get(p,"drills"),Z=_.a.filter(G,(function(e){return!_.a.some(C,["id",e.id])}));return r.a.createElement(r.a.Fragment,null,r.a.createElement(y.a,{marginBottom:56},r.a.createElement(L.a,{size:600},"Adding a new version of workout: ",_.a.get(V,"workout.title",""))),r.a.createElement(R.a,{initialValues:Object(l.a)({},Y),onSubmit:function(){var e=Object(s.a)(c.a.mark((function e(t){var n,a,r,l,o;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.body,a=t.stats,I(null),e.prev=2,r=_.a.map(C,(function(e){return{_drill:e.id}})),e.next=6,j({variables:{objects:[{body:n,version_num:H,_workout:i,_owner:A.id,stats:{data:a||{}},drills:{data:r}}]}});case 6:l=e.sent,S(),o=_.a.get(l,"data.insert_workouts_versions.returning[0].id"),u&&u(o),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(2),console.error(e.t0),I(e.t0.message);case 16:case"end":return e.stop()}}),e,null,[[2,12]])})));return function(t){return e.apply(this,arguments)}}()},(function(e){var t=e.values,n=e.dirty,a=e.handleChange,i=e.handleSubmit,l=e.isSubmitting;return r.a.createElement(r.a.Fragment,null,r.a.createElement("form",null,r.a.createElement(F.a,{label:"Workout Description",marginBottom:8},r.a.createElement(q.a,{name:"body",value:t.body,onChange:a,rows:24})),r.a.createElement(F.a,{label:"Add Drills",marginBottom:16},r.a.createElement(y.a,{marginBottom:8,display:"flex",justifyContent:"space-between"},r.a.createElement(N.a,{name:"drill",value:t.drill,onChange:a,height:32},r.a.createElement("option",{key:"empty",value:""},"Please select an option..."),Z&&_.a.map(Z,(function(e){var t=e.id,n=e.title;return r.a.createElement("option",{key:t,value:t},n)}))),r.a.createElement($.a,{iconBefore:"tick",disabled:!t.drill,onClick:function(e){e.preventDefault(),B([].concat(Object(T.a)(C),[_.a.find(G,["id",t.drill])]))},marginRight:8,marginLeft:8},"Attach drill")),r.a.createElement(y.a,null,D&&r.a.createElement("p",null,D))),r.a.createElement(F.a,{label:"Selected drills",marginBottom:16},r.a.createElement(y.a,null,_.a.isEmpty(C)?r.a.createElement(M.a,{marginBottom:16},"No drills selected"):_.a.map(C,(function(e){var t=e.id,n=e.title;return r.a.createElement(y.a,{display:"flex",flexDirection:"row",elevation:1,height:32,alignItems:"center",background:"white",marginBottom:16,key:t,paddingLeft:16,paddingRight:8},r.a.createElement(U.a,{flex:1},n),r.a.createElement(Q.a,{icon:"small-cross",intent:"danger",appearance:"minimal",onClick:function(e){e.preventDefault(),B(_.a.filter(C,(function(e){return e.id!==t})))}}))})))),r.a.createElement(F.a,{label:"Stats",marginBottom:16},r.a.createElement("table",{className:"stats-input-table"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null),r.a.createElement("th",{colSpan:2},r.a.createElement(L.a,{size:200},"5/10km")),r.a.createElement("th",{colSpan:2},r.a.createElement(L.a,{size:200},"half/ultra")))),r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("td",null,r.a.createElement(L.a,{size:200},"Beginner")),r.a.createElement("td",null,r.a.createElement(W.a,{label:"km",name:"stats.running_km_beginner_short",type:"number",onChange:a})),r.a.createElement("td",null,r.a.createElement(W.a,{label:"mins",name:"stats.running_minutes_beginner_short",type:"number",onChange:a})),r.a.createElement("td",null,r.a.createElement(W.a,{label:"km",name:"stats.running_km_beginner_long",type:"number",onChange:a})),r.a.createElement("td",null,r.a.createElement(W.a,{label:"mins",name:"stats.running_minutes_beginner_long",type:"number",onChange:a}))),r.a.createElement("tr",null,r.a.createElement("td",null,r.a.createElement(L.a,{size:200},"Intermediate")),r.a.createElement("td",null,r.a.createElement(W.a,{label:"km",name:"stats.running_km_intermediate_short",type:"number",onChange:a})),r.a.createElement("td",null,r.a.createElement(W.a,{label:"mins",name:"stats.running_minutes_intermediate_short",type:"number",onChange:a})),r.a.createElement("td",null,r.a.createElement(W.a,{label:"km",name:"stats.running_km_intermediate_long",type:"number",onChange:a})),r.a.createElement("td",null,r.a.createElement(W.a,{label:"mins",name:"stats.running_minutes_intermediate_long",type:"number",onChange:a}))),r.a.createElement("tr",null,r.a.createElement("td",null,r.a.createElement(L.a,{size:200},"Advanced")),r.a.createElement("td",null,r.a.createElement(W.a,{label:"km",name:"stats.running_km_advanced_short",type:"number",onChange:a})),r.a.createElement("td",null,r.a.createElement(W.a,{label:"mins",name:"stats.running_minutes_advanced_short",type:"number",onChange:a})),r.a.createElement("td",null,r.a.createElement(W.a,{label:"km",name:"stats.running_km_advanced_long",type:"number",onChange:a})),r.a.createElement("td",null,r.a.createElement(W.a,{label:"mins",name:"stats.running_minutes_advanced_long",type:"number",onChange:a})))))),r.a.createElement($.a,{iconBefore:l?"":"tick",isLoading:l,disabled:!n,onClick:i},"Add"),D&&r.a.createElement("p",null,D)))})))},"workouts/edit":function(e){var t=e.props.id,n=Object(f.c)(ut.workouts.getVersion,{variables:{id:t}}),i=n.data,u=n.loading,m=Object(f.c)(ut.drills.getAll),d=m.data,g=m.loading,b=Object(f.b)(ut.workouts.updateVersion,{refetchQueries:[{query:ut.workouts.getVersion,variables:{id:t}}],awaitRefetchQueries:!0}),p=Object(o.a)(b,1)[0],h=Object(f.b)(ut.workouts.addDrill,{refetchQueries:[{query:ut.workouts.getVersion,variables:{id:t}}],awaitRefetchQueries:!0}),E=Object(o.a)(h,2),k=E[0],v=E[1].addDrillsLoading,w=Object(f.b)(ut.workouts.removeDrill,{refetchQueries:[{query:ut.workouts.getVersion,variables:{id:t}}],awaitRefetchQueries:!0}),j=Object(o.a)(w,1)[0],O=Object(a.useContext)(ct.UI).closePanel,x=Object(a.useState)(null),C=Object(o.a)(x,2),B=C[0],S=C[1],A=dt.intensityOptions,z=dt.workoutTypes;if(u||g)return r.a.createElement(mt,null);var P=_.a.get(i,"workouts_versions_by_pk"),D={body:_.a.get(P,"body"),title:_.a.get(P,"workout.title",""),stats:_.a.reduce(_.a.get(P,"stats",{}),(function(e,t,n){return Object(l.a)({},e,Object(H.a)({},n,_.a.isNull(t)?"":t))}),{}),intensity:_.a.get(P,"workout.intensity","3"),type:_.a.get(P,"workout.type","")},I=_.a.get(P,"drills",[]),T=_.a.map(I,(function(e){return Object(l.a)({workoutsDrillId:e.id},e.drill)})),Y=_.a.get(d,"drills"),G=_.a.filter(Y,(function(e){return!_.a.some(T,["id",e.id])}));return r.a.createElement(r.a.Fragment,null,r.a.createElement(y.a,{marginBottom:56},r.a.createElement(L.a,{size:600},"Editing version ",_.a.get(P,"version_num")," of workout: ",_.a.get(P,"workout.title",""))),r.a.createElement(R.a,{initialValues:Object(l.a)({},D),onSubmit:function(){var e=Object(s.a)(c.a.mark((function e(n){var a,r,i,o,u,s;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.title,r=n.body,i=n.stats,o=n.type,u=n.intensity,S(null),e.prev=2,s=_.a.reduce(i,(function(e,t,n){return"id"===n||"__typename"===n?e:Object(l.a)({},e,Object(H.a)({},n,""===t?null:t))}),{}),e.next=6,p({variables:{version_id:t,workout_id:_.a.get(P,"workout.id"),stats_id:_.a.get(P,"stats.id"),body:r,workout_data:{title:a,type:o,intensity:u},stats_data:s}});case 6:O(),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(2),console.error(e.t0),S(e.t0.message);case 13:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(t){return e.apply(this,arguments)}}()},(function(e){var t=e.values,n=e.dirty,a=e.handleChange,i=e.handleSubmit,l=e.isSubmitting,o=e.setFieldValue;return r.a.createElement(r.a.Fragment,null,r.a.createElement("form",null,r.a.createElement(W.a,{label:"Workout Title (effects all versions)",name:"title",value:t.title,onChange:a,autoFocus:!0}),r.a.createElement(F.a,{label:"Workout Intensity (effects all versions)",onChange:function(e){return o("intensity",e.target.value)},marginBottom:16},r.a.createElement(y.a,{display:"flex",flexDirection:"row",justifyContent:"space-between"},_.a.map(A,(function(e){var n=e.label,a=e.value;return r.a.createElement(V.a,{key:a,name:"intensity",value:a,label:n,checked:a===t.intensity})})))),r.a.createElement(F.a,{label:"Workout Type (effects all versions)",marginBottom:16},r.a.createElement(N.a,{name:"type",value:t.type,onChange:a,height:32},r.a.createElement("option",{key:"empty",value:""},"Please select an option..."),z&&_.a.map(z,(function(e){var t=e.value,n=e.label;return r.a.createElement("option",{key:t,value:t},n)})))),r.a.createElement(F.a,{label:"Add Drills",marginBottom:16},r.a.createElement(y.a,{marginBottom:8,display:"flex",justifyContent:"space-between"},r.a.createElement(N.a,{name:"drill",value:t.drill,onChange:a,height:32},r.a.createElement("option",{key:"empty",value:""},"Please select an option..."),G&&_.a.map(G,(function(e){var t=e.id,n=e.title;return r.a.createElement("option",{key:t,value:t},n)}))),r.a.createElement($.a,{iconBefore:v?"":"tick",isLoading:v,disabled:!t.drill,onClick:function(e){e.preventDefault(),k({variables:{objects:[{_drill:t.drill,_workouts_version:_.a.get(P,"id")}]}})},marginRight:8,marginLeft:8},"Attach drill")),r.a.createElement(y.a,null,B&&r.a.createElement("p",null,B))),r.a.createElement(F.a,{label:"Selected drills",marginBottom:16},r.a.createElement(y.a,null,_.a.isEmpty(T)?r.a.createElement(M.a,{marginBottom:16},"No drills selected"):_.a.map(T,(function(e){var t=e.id,n=e.title,a=e.workoutsDrillId;return r.a.createElement(y.a,{display:"flex",flexDirection:"row",elevation:1,height:32,alignItems:"center",background:"white",marginBottom:16,key:t,paddingLeft:16,paddingRight:8},r.a.createElement(U.a,{flex:1},n),r.a.createElement(Q.a,{icon:"small-cross",intent:"danger",appearance:"minimal",onClick:function(e){e.preventDefault(),j({variables:{id:a}})}}))})))),r.a.createElement(F.a,{label:"Workout Description",marginBottom:16},r.a.createElement(q.a,{name:"body",value:t.body,onChange:a,rows:24})),r.a.createElement(F.a,{label:"Stats",marginBottom:16},r.a.createElement("table",{className:"stats-input-table"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null),r.a.createElement("th",{colSpan:2},r.a.createElement(L.a,{size:200},"5/10km")),r.a.createElement("th",{colSpan:2},r.a.createElement(L.a,{size:200},"half/ultra")))),r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("td",null,r.a.createElement(L.a,{size:200},"Beginner")),r.a.createElement("td",null,r.a.createElement(W.a,{label:"km",name:"stats.running_km_beginner_short",value:t.stats.running_km_beginner_short,type:"number",onChange:a})),r.a.createElement("td",null,r.a.createElement(W.a,{label:"mins",name:"stats.running_minutes_beginner_short",value:t.stats.running_minutes_beginner_short,type:"number",onChange:a})),r.a.createElement("td",null,r.a.createElement(W.a,{label:"km",name:"stats.running_km_beginner_long",value:t.stats.running_km_beginner_long,type:"number",onChange:a})),r.a.createElement("td",null,r.a.createElement(W.a,{label:"mins",name:"stats.running_minutes_beginner_long",value:t.stats.running_minutes_beginner_long,type:"number",onChange:a}))),r.a.createElement("tr",null,r.a.createElement("td",null,r.a.createElement(L.a,{size:200},"Intermediate")),r.a.createElement("td",null,r.a.createElement(W.a,{label:"km",name:"stats.running_km_intermediate_short",value:t.stats.running_km_intermediate_short,type:"number",onChange:a})),r.a.createElement("td",null,r.a.createElement(W.a,{label:"mins",name:"stats.running_minutes_intermediate_short",value:t.stats.running_minutes_intermediate_short,type:"number",onChange:a})),r.a.createElement("td",null,r.a.createElement(W.a,{label:"km",name:"stats.running_km_intermediate_long",value:t.stats.running_km_intermediate_long,type:"number",onChange:a})),r.a.createElement("td",null,r.a.createElement(W.a,{label:"mins",name:"stats.running_minutes_intermediate_long",value:t.stats.running_minutes_intermediate_long,type:"number",onChange:a}))),r.a.createElement("tr",null,r.a.createElement("td",null,r.a.createElement(L.a,{size:200},"Advanced")),r.a.createElement("td",null,r.a.createElement(W.a,{label:"km",name:"stats.running_km_advanced_short",value:t.stats.running_km_advanced_short,type:"number",onChange:a})),r.a.createElement("td",null,r.a.createElement(W.a,{label:"mins",name:"stats.running_minutes_advanced_short",value:t.stats.running_minutes_advanced_short,type:"number",onChange:a})),r.a.createElement("td",null,r.a.createElement(W.a,{label:"km",name:"stats.running_km_advanced_long",value:t.stats.running_km_advanced_long,type:"number",onChange:a})),r.a.createElement("td",null,r.a.createElement(W.a,{label:"mins",name:"stats.running_minutes_advanced_long",value:t.stats.running_minutes_advanced_long,type:"number",onChange:a})))))),r.a.createElement($.a,{iconBefore:l?"":"tick",isLoading:l,disabled:!n,onClick:i},"Update"),B&&r.a.createElement("p",null,B)))})))},"weeks/add":function(){var e=Object(f.c)(ut.days.getAll),t=e.data,n=e.loading,i=Object(f.c)(ut.weeks.getAll),l=i.data,u=i.loading,m=Object(f.b)(ut.weeks.add,{refetchQueries:[{query:ut.weeks.getAll}],awaitRefetchQueries:!0}),d=Object(o.a)(m,1)[0],g=Object(a.useContext)(ct.Auth).authUser,b=Object(a.useContext)(ct.UI).closePanel,p=Object(a.useState)(null),h=Object(o.a)(p,2),E=h[0],v=h[1],w=Object(k.f)();if(n||u)return null;var j=_.a.map(_.a.get(l,"weeks"),(function(e){var t=e.week_start;return Object(G.a)(Object(Z.a)(t))})),O=_.a.map(_.a.range(7,29,7),(function(e){var t=Object(X.a)(Object(J.a)(ee,{weekStartsOn:1}),e);return{value:Object(G.a)(t),label:"Week starting: ".concat(Object(K.a)(t,"do MMMM")),disabled:j.includes(Object(G.a)(t))}}));return r.a.createElement(r.a.Fragment,null,r.a.createElement(y.a,{marginBottom:56},r.a.createElement(L.a,{size:600},"Adding a new week")),r.a.createElement(R.a,{initialValues:{},onSubmit:function(){var e=Object(s.a)(c.a.mark((function e(n){var a,r,i;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.week_start,v(null),e.prev=2,e.next=5,d({variables:{objects:[{_owner:g.id,title:_.a.get(_.a.find(O,["value",a]),"label"),week_start:a,days:{data:_.a.map(_.a.get(t,"days"),(function(e){return{_day:e.id}}))}}]}});case 5:r=e.sent,b(),i=_.a.get(r,"data.insert_weeks.returning[0].id"),w.push("/weeks/".concat(i)),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(2),console.error(e.t0),v(e.t0.message);case 15:case"end":return e.stop()}}),e,null,[[2,11]])})));return function(t){return e.apply(this,arguments)}}()},(function(e){var t=e.values,n=e.dirty,a=e.handleChange,i=e.handleSubmit,l=e.isSubmitting;return r.a.createElement(r.a.Fragment,null,r.a.createElement("form",null,r.a.createElement(Y.a,{label:"Please choose which upcoming week to create",name:"week_start",value:t.type,onChange:a,height:40},r.a.createElement("option",{key:"empty",value:""},"Please select an option..."),O&&_.a.map(O,(function(e){var t=e.value,n=e.label,a=e.disabled;return r.a.createElement("option",{key:t,value:t,disabled:a},n)}))),r.a.createElement($.a,{iconBefore:l?"":"tick",isLoading:l,disabled:!n||!t.week_start,onClick:i},"Add"),E&&r.a.createElement("p",null,E)))})))},"weeks/update-workout":function(e){var t=e.props,n=t.id,i=t.title,u=Object(f.c)(ut.workouts.getAll),m=u.data,d=u.loading,g=Object(f.b)(ut.weeks.updateWeekday),b=Object(o.a)(g,1)[0],p=Object(a.useContext)(ct.UI),h=p.closePanel,E=p.openPanel,k=Object(a.useState)(null),v=Object(o.a)(k,2),w=v[0],j=v[1],O=Object(a.useState)(""),x=Object(o.a)(O,2),C=x[0],B=x[1],S=Object(a.useState)(""),A=Object(o.a)(S,2),z=A[0],P=A[1],D=Object(a.useState)(""),I=Object(o.a)(D,2),W=I[0],F=I[1],q=_.a.get(m,"workouts"),U=_.a.find(q,(function(e){var t=e.versions;return _.a.some(t,["id",W])})),T=_.a.get(U,"id");Object(a.useEffect)((function(){return P(_.a.orderBy(_.a.map(q,(function(e){return Object(l.a)({},e,{match:ne(C,e)})}))),["match","desc"])}),[C,q]);var V=function(){var e=Object(s.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),j(null),e.prev=2,e.next=5,b({variables:{id:n,data:{_workouts_version:null}}});case 5:h(),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(2),console.error(e.t0),j(e.t0.message);case 12:case"end":return e.stop()}}),e,null,[[2,8]])})));return function(t){return e.apply(this,arguments)}}();return d?r.a.createElement(mt,null):r.a.createElement(r.a.Fragment,null,r.a.createElement(y.a,{marginBottom:56,display:"flex",justifyContent:"space-between"},r.a.createElement(L.a,{size:600},"Updating Workout for ",i),r.a.createElement($.a,{marginLeft:8,iconBefore:"plus",onClick:function(){h(),setTimeout((function(){return E({panel:"workouts/add",size:"wide",props:{emit:function(){var e=Object(s.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,b({variables:{id:n,data:{_workouts_version:t}}});case 3:h(),e.next=10;break;case 6:e.prev=6,e.t0=e.catch(0),console.error(e.t0),j(e.t0.message);case 10:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}()}})}),200)}},"Create workout")),r.a.createElement(R.a,{initialValues:{},onSubmit:Object(s.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return j(null),e.prev=1,e.next=4,b({variables:{id:n,data:{_workouts_version:W}}});case 4:h(),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(1),console.error(e.t0),j(e.t0.message);case 11:case"end":return e.stop()}}),e,null,[[1,7]])})))},(function(e){var t=e.handleSubmit,n=e.isSubmitting;return r.a.createElement(r.a.Fragment,null,r.a.createElement("form",null,r.a.createElement(y.a,{marginBottom:48},r.a.createElement(te.a,{placeholder:"Filter available workouts on title and type",width:"100%",onChange:function(e){return B(e.target.value.split(" "))}})),r.a.createElement(y.a,{marginBottom:32},!_.a.isEmpty(z)&&_.a.map(z,(function(e){return r.a.createElement(ae,{key:e.id,workout:e,matchSize:_.a.size(C),onSelect:F,selected:e.id===T})}))),r.a.createElement(y.a,{display:"flex",justifyContent:"space-between"},r.a.createElement($.a,{type:"submit",iconBefore:n?"":"tick",isLoading:n,disabled:!W,onClick:t},"Add / Update Workout"),r.a.createElement($.a,{iconBefore:n?"":"cross",intent:"danger",isLoading:n,onClick:V},"Clear Day"),w&&r.a.createElement("p",null,w))))})))},"weeks/view-workout-version":function(e){var t=e.props.id,n=dt.intensityOptions,a=dt.workoutTypes,i=Object(f.c)(ut.workouts.getVersion,{variables:{id:t}}),l=i.data;if(i.loading)return r.a.createElement(mt,null);var o=_.a.get(l,"workouts_versions_by_pk"),u=_.a.get(o,"version_num"),c=_.a.get(o,"body"),s=_.a.map(_.a.get(o,"drills",[]),"drill"),m=_.a.get(o,"workout"),d=_.a.get(m,"title"),g=_.a.get(m,"type"),b=_.a.get(m,"intensity"),p=_.a.get(_.a.find(n,["value",b]),"label",""),h=_.a.get(_.a.find(a,["value",g]),"label","");return r.a.createElement(r.a.Fragment,null,r.a.createElement(y.a,{marginBottom:32,display:"flex",flexDirection:"row",alignItems:"center"},r.a.createElement(y.a,{marginRight:16},r.a.createElement(L.a,{size:600},d," - version ",u)),r.a.createElement(y.a,{flex:1},r.a.createElement(re.a,{marginRight:8,color:"blue"},h),r.a.createElement(re.a,{color:"blue"},p))),r.a.createElement(y.a,{background:"white",padding:32,marginBottom:32,elevation:1},r.a.createElement(L.a,{marginBottom:16,size:200},"Description:"),c&&_.a.map(c.split("\n"),(function(e,t){return e?r.a.createElement(M.a,{key:t},e):r.a.createElement("br",{key:t})}))),r.a.createElement(y.a,{marginBottom:32},r.a.createElement(L.a,{size:200,marginBottom:16},"Drills:"),_.a.isEmpty(s)?r.a.createElement(M.a,null,"No attached drills"):_.a.map(s,(function(e){var t=e.id,n=e.title;return r.a.createElement(E.b,{to:"/drills/".concat(t),key:t,style:{marginBottom:"24px"}},r.a.createElement(y.a,{display:"flex",elevation:1,height:48,alignItems:"center",background:"white",marginBottom:16},r.a.createElement(U.a,{marginLeft:24},n)))}))))}},le={wide:930,normal:620};function oe(){var e=Object(a.useContext)(ct.UI),t=e.panel,n=e.closePanel,i=!_.a.isEmpty(t),l=ie[_.a.get(t,"panel",!1)],o=_.a.get(t,"props",{}),u=le[_.a.get(t,"size","normal")];return r.a.createElement(r.a.Fragment,null,r.a.createElement(I.a,{isShown:i,onCloseComplete:n,preventBodyScrolling:!0,width:u},r.a.createElement("div",{className:"v-panel"},i&&l&&r.a.createElement(l,{props:o}))))}var ue=n(651),ce=n(652),se=n(667);function me(){var e=Object(k.f)(),t=Object(k.g)().pathname,n=Object(a.useContext)(ct.UI).openPanel,i=Object(a.useContext)(ct.Auth),l=i.isAuthenticated,o=i.authUser,u=i.signOut;return r.a.createElement("div",{className:"c-top-nav"},r.a.createElement(y.a,{display:"flex",height:78,alignItems:"center"},r.a.createElement(y.a,{alignItems:"center",justifyContent:"center",marginLeft:24},r.a.createElement(L.a,{size:200},"Adultletics Admin Panel")),r.a.createElement(y.a,{display:"flex",flex:1,justifyContent:"space-between",paddingLeft:16},r.a.createElement(y.a,{alignItems:"center"},r.a.createElement(ue.a,{alignItems:"center"},_.a.map([{name:"Home",route:"/"},{name:"Workouts",route:"/workouts"},{name:"Weeks",route:"/weeks"},{name:"Drills",route:"/drills"},{name:"Daily Challenges",route:"/challenges"}],(function(n){var a=n.name,i=n.route;return r.a.createElement(ce.a,{key:i,id:i,onSelect:function(){return e.push(i)},isSelected:"/"===i?t===i:t.startsWith(i),"aria-controls":"panel-".concat(a),height:40},a)})))),r.a.createElement(y.a,{display:"flex",alignItems:"center",paddingRight:16},l?r.a.createElement($.a,{isLoading:_.a.isEmpty(o),marginRight:16,onClick:u},"Log Out"):r.a.createElement($.a,{marginRight:16,onClick:function(){return n({panel:"auth/sign-in"})}},"Log In"),r.a.createElement(se.a,{name:o.first_name,size:40})))))}var de=n(40),ge=n(41),be=n.n(ge);function pe(){var e=Object(de.a)(["\n    query getAllDays {\n        days {\n            id title  uid\n        }\n    }\n"]);return pe=function(){return e},e}function _e(){var e=Object(de.a)(["\n    mutation updateWeeksDays ( $objects: [weeks_insert_input!]! ) {\n        insert_weeks( objects: $objects ) {\n            returning { id }\n        }\n    }\n"]);return _e=function(){return e},e}function fe(){var e=Object(de.a)(["\n    mutation updateWeeksDays ( $id: uuid!, $data: weeks_days_set_input! ) {\n        update_weeks_days( where: { id: { _eq: $id }}, _set: $data ) {\n            returning { id }\n        }\n    }\n"]);return fe=function(){return e},e}function he(){var e=Object(de.a)(["\n    mutation updateWeek ( $id: uuid!, $data: weeks_set_input! ) {\n        update_weeks( where: { id: { _eq: $id }}, _set: $data ) {\n            returning { id }\n        }\n    }\n"]);return he=function(){return e},e}function Ee(){var e=Object(de.a)(["\n    subscription weekSubscription ( $id: uuid! ) {\n        weeks_by_pk( id: $id ) {\n            created_at id week_start\n            title updated_at\n            days ( order_by: { _day: asc }) {\n                id\n                day { id title uid }\n                workout {\n                    body id\n                    version_num\n                    drills {\n                        id\n                        drill {\n                            description\n                            id title url\n                        }\n                    }\n                    workout {\n                        id intensity\n                        title type\n                    }\n                    stats {\n                        id\n                        running_minutes_beginner_short running_km_beginner_short\n                        running_minutes_intermediate_short running_km_intermediate_short\n                        running_minutes_advanced_short running_km_advanced_short\n                        running_minutes_beginner_long running_km_beginner_long\n                        running_minutes_intermediate_long running_km_intermediate_long\n                        running_minutes_advanced_long running_km_advanced_long\n                    }\n                }\n            }\n            daily_challenge { id title description }\n        }\n    }\n"]);return Ee=function(){return e},e}function ke(){var e=Object(de.a)(["\n    subscription getAllWeeks {\n        weeks {\n            id title updated_at week_start\n            days ( order_by: { _day: asc }) {\n                id\n                day { id title uid }\n                workout {\n                    body id\n                    version_num\n                    drills {\n                        id\n                        drill {\n                            description\n                            id title url\n                        }\n                    }\n                    workout {\n                        id intensity\n                        title type\n                    }\n                    stats {\n                        id\n                        running_minutes_beginner_short running_km_beginner_short\n                        running_minutes_intermediate_short running_km_intermediate_short\n                        running_minutes_advanced_short running_km_advanced_short\n                        running_minutes_beginner_long running_km_beginner_long\n                        running_minutes_intermediate_long running_km_intermediate_long\n\t\t\t\t\t    running_minutes_advanced_long running_km_advanced_long\n                    }\n                }\n            }\n        }\n    }\n"]);return ke=function(){return e},e}function ve(){var e=Object(de.a)(["\n    query getAllWeeks {\n        weeks {\n            id title updated_at week_start _challenge\n            days ( order_by: { _day: asc }) {\n                id\n                day { id title uid }\n                workout {\n                    body id\n                    version_num\n                    drills {\n                        id\n                        drill {\n                            description\n                            id title url\n                        }\n                    }\n                    workout {\n                        id intensity\n                        title type\n                    }\n                    stats {\n                        id\n                        running_minutes_beginner_short running_km_beginner_short\n                        running_minutes_intermediate_short running_km_intermediate_short\n                        running_minutes_advanced_short running_km_advanced_short\n                        running_minutes_beginner_long running_km_beginner_long\n                        running_minutes_intermediate_long running_km_intermediate_long\n                        running_minutes_advanced_long running_km_advanced_long\n                    }\n                }\n            }\n        }\n    }\n"]);return ve=function(){return e},e}function ye(){var e=Object(de.a)(["\n    mutation deleteWorkout ( $id: uuid! ) {\n        update_weeks_days( where: { _workouts_version: { _eq: $id }}, _set: { _workouts_version: null }) {\n            returning { id }\n        }\n        delete_workouts_drills( where: { workouts_version: { id: { _eq: $id }}}) {\n            returning { id }\n        }\n        delete_workouts_versions( where: { id: { _eq: $id }}) {\n            returning { id }\n        }\n        delete_workouts_stats( where: { workouts_version: { id: { _eq: $id }}}) {\n            returning { id }\n        }\n    }\n"]);return ye=function(){return e},e}function we(){var e=Object(de.a)(["\n    mutation deleteWorkout ( $id: uuid! ) {\n        update_weeks_days( where: { workout: { _workout: {_eq: $id }}}, _set: { _workouts_version: null }) {\n            returning { id }\n        }\n        delete_workouts_drills( where: { workouts_version: { workout: { id: { _eq: $id }}}}) {\n            returning { id }\n        }\n        delete_workouts_versions( where: { workout: { id: { _eq: $id }}}) {\n            returning { id }\n        }\n        delete_workouts_stats( where: { workouts_version: { workout: { id: { _eq: $id }}}}) {\n            returning { id }\n        }\n        delete_workouts( where: { id: { _eq: $id }}) {\n            returning { id }\n        }\n    }\n"]);return we=function(){return e},e}function je(){var e=Object(de.a)(["\n\tmutation deleteWorkoutsDrills ( $id: uuid! ) {\n\t\tdelete_workouts_drills( where: { id: { _eq: $id }}) {\n\t\t\treturning { id }\n\t\t}\n\t}\n"]);return je=function(){return e},e}function Oe(){var e=Object(de.a)(["\n\tmutation insertWorkoutsDrills ( $objects: [workouts_drills_insert_input!]! ) {\n\t\tinsert_workouts_drills( objects: $objects ) {\n\t\t\treturning { id }\n\t\t}\n\t}\n"]);return Oe=function(){return e},e}function xe(){var e=Object(de.a)(["\n\tmutation updateWorkoutVersion ( $version_id: uuid!, $stats_id: uuid!, $workout_id: uuid!, $body: String!, $workout_data: workouts_set_input!, $stats_data: workouts_stats_set_input! ) {\n\t\tupdate_workouts_versions( where: { id: { _eq: $version_id }}, _set: { body: $body }) {\n\t\t\treturning { id }\n\t\t}\n\t\tupdate_workouts_stats( where: { id: { _eq: $stats_id }}, _set: $stats_data ) {\n\t\t\treturning { id }\n\t\t}\n\t\tupdate_workouts( where: { id: { _eq: $workout_id }}, _set: $workout_data ) {\n\t\t\treturning { id }\n\t\t}\n\t}\n"]);return xe=function(){return e},e}function Ce(){var e=Object(de.a)(["\n\tmutation insertWorkoutVersion ( $objects: [workouts_versions_insert_input!]! ) {\n\t\tinsert_workouts_versions ( objects: $objects ) {\n\t\t\treturning { id workout { id } }\n\t\t}\n\t}\n"]);return Ce=function(){return e},e}function Be(){var e=Object(de.a)(["\n\tquery getWorkout ( $id: uuid! ) {\n\t\tworkouts_versions_by_pk ( id: $id ) {\n\t\t\tid body\n\t\t\tversion_num\n\t\t\towner {\n\t\t\t\tfirst_name\n\t\t\t}\n\t\t\tdrills {\n\t\t\t\tid\n\t\t\t\tdrill {\n\t\t\t\t\ttitle id\n\t\t\t\t}\n\t\t\t}\n\t\t\tstats {\n                id\n                running_minutes_beginner_short running_km_beginner_short\n                running_minutes_intermediate_short running_km_intermediate_short\n                running_minutes_advanced_short running_km_advanced_short\n                running_minutes_beginner_long running_km_beginner_long\n                running_minutes_intermediate_long running_km_intermediate_long\n                running_minutes_advanced_long running_km_advanced_long\n\t\t\t}\n\t\t\tworkout {\n\t\t\t\tid title type\n                intensity\n\t\t\t}\n\t\t}\n\t}\n"]);return Be=function(){return e},e}function Se(){var e=Object(de.a)(["\n\tsubscription getWorkout ( $id: uuid! ) {\n\t\tworkouts_by_pk( id: $id ) {\n\t\t\tid title type\n            intensity\n\t\t\tversions ( order_by: { version_num: asc } ){\n\t\t\t\tid body\n\t\t\t\tversion_num\n\t\t\t\towner {\n\t\t\t\t\tfirst_name\n\t\t\t\t}\n\t\t\t\tdrills {\n\t\t\t\t\tid\n\t\t\t\t\tdrill {\n\t\t\t\t\t\ttitle id\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tstats {\n\t\t\t\t\tid\n\t\t\t\t\trunning_minutes_beginner_short running_km_beginner_short\n\t\t\t\t\trunning_minutes_intermediate_short running_km_intermediate_short\n\t\t\t\t\trunning_minutes_advanced_short running_km_advanced_short\n\t\t\t\t\trunning_minutes_beginner_long running_km_beginner_long\n\t\t\t\t\trunning_minutes_intermediate_long running_km_intermediate_long\n\t\t\t\t\trunning_minutes_advanced_long running_km_advanced_long\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n"]);return Se=function(){return e},e}function Ae(){var e=Object(de.a)(["\n\tquery getWorkout ( $id: uuid! ) {\n\t\tworkouts_by_pk( id: $id ) {\n\t\t\tid title type\n            intensity\n\t\t\tversions ( order_by: { version_num: asc } ){\n\t\t\t\tid body\n\t\t\t\tversion_num\n\t\t\t\towner {\n\t\t\t\t\tfirst_name\n\t\t\t\t}\n\t\t\t\tdrills {\n\t\t\t\t\tid\n\t\t\t\t\tdrill {\n\t\t\t\t\t\ttitle id\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tstats {\n\t\t\t\t\tid\n\t\t\t\t\trunning_minutes_beginner_short running_km_beginner_short\n\t\t\t\t\trunning_minutes_intermediate_short running_km_intermediate_short\n\t\t\t\t\trunning_minutes_advanced_short running_km_advanced_short\n\t\t\t\t\trunning_minutes_beginner_long running_km_beginner_long\n\t\t\t\t\trunning_minutes_intermediate_long running_km_intermediate_long\n\t\t\t\t\trunning_minutes_advanced_long running_km_advanced_long\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n"]);return Ae=function(){return e},e}function ze(){var e=Object(de.a)(["\n\tquery getWorkouts {\n\t\tworkouts {\n\t\t\tid title type intensity\n            versions ( order_by: { version_num: asc } ){\n\t\t\t\tid body\n\t\t\t\tversion_num\n\t\t\t\towner {\n\t\t\t\t\tfirst_name\n\t\t\t\t}\n\t\t\t\tdrills {\n\t\t\t\t\tid\n\t\t\t\t\tdrill {\n\t\t\t\t\t\ttitle id\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tstats {\n\t\t\t\t\tid\n\t\t\t\t\trunning_minutes_beginner_short running_km_beginner_short\n\t\t\t\t\trunning_minutes_intermediate_short running_km_intermediate_short\n\t\t\t\t\trunning_minutes_advanced_short running_km_advanced_short\n\t\t\t\t\trunning_minutes_beginner_long running_km_beginner_long\n\t\t\t\t\trunning_minutes_intermediate_long running_km_intermediate_long\n\t\t\t\t\trunning_minutes_advanced_long running_km_advanced_long\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n"]);return ze=function(){return e},e}function Pe(){var e=Object(de.a)(["\n\tmutation updateChallenge ( $id: uuid!, $data: daily_challenges_set_input! ) {\n\t\tupdate_daily_challenges ( where: { id: { _eq: $id }}, _set: $data ) {\n\t\t\treturning { id }\n\t\t}\n\t}\n"]);return Pe=function(){return e},e}function De(){var e=Object(de.a)(["\n\tmutation insertChalleenge ( $objects: [daily_challenges_insert_input!]! ) {\n\t\tinsert_daily_challenges ( objects: $objects ) {\n\t\t\treturning { id }\n\t\t}\n\t}\n"]);return De=function(){return e},e}function Ie(){var e=Object(de.a)(["\n\tquery getChallenge ( $id: uuid! ) {\n\t\tdaily_challenges_by_pk ( id: $id ) {\n\t\t\tid title description\n            weeks { id }\n\t\t}\n\t}\n"]);return Ie=function(){return e},e}function We(){var e=Object(de.a)(["\n\tquery getAllChallenges {\n\t\tdaily_challenges ( order_by: { title: asc }) {\n\t\t\tid title description\n\t\t}\n\t}\n"]);return We=function(){return e},e}function $e(){var e=Object(de.a)(["\n\tmutation updateDrills ( $id: uuid!, $data: drills_set_input! ) {\n\t\tupdate_drills( where: { id: { _eq: $id }}, _set: $data ) {\n\t\t\treturning { id }\n\t\t}\n\t}\n"]);return $e=function(){return e},e}function Re(){var e=Object(de.a)(["\n\tmutation insertDrills ( $objects: [drills_insert_input!]! ) {\n\t\tinsert_drills ( objects: $objects ) {\n\t\t\treturning { id }\n\t\t}\n\t}\n"]);return Re=function(){return e},e}function Le(){var e=Object(de.a)(["\n\tquery getAllDrills ( $id: uuid! ) {\n\t\tdrills_by_pk ( id: $id ) {\n\t\t\tid title url description embed_url\n\t\t\tworkouts_drills {\n\t\t\t\tworkouts_version {\n\t\t\t\t\tworkout { title }\n\t\t\t\t\tversion_num\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n"]);return Le=function(){return e},e}function Fe(){var e=Object(de.a)(["\n\tquery getAllDrills {\n\t\tdrills ( order_by: { title: asc }) {\n\t\t\tid title url description embed_url\n\t\t}\n\t}\n"]);return Fe=function(){return e},e}function qe(){var e=Object(de.a)(["\n\tquery getUser ( $uid: String! ) {\n\t\tusers_by_pk( uid: $uid ) {\n\t\t\temail first_name id\n\t\t}\n\t}\n"]);return qe=function(){return e},e}var Ue=be()(qe()),Te=be()(Fe()),Ve=be()(Le()),Ne=be()(Re()),Qe=be()($e()),Me=be()(We()),He=be()(Ie()),Ye=be()(De()),Ge=be()(Pe()),Ze=be()(ze()),Xe=be()(Ae()),Je=be()(Se()),Ke=be()(Be()),et=be()(Ce()),tt=be()(xe()),nt=be()(Oe()),at=be()(je()),rt=be()(we()),it=be()(ye()),lt=be()(ve()),ot=be()(ke()),ut={auth:{getUser:Ue},drills:{getAll:Te,getOne:Ve,add:Ne,update:Qe},dailyChallenges:{getAll:Me,getOne:He,add:Ye,update:Ge},workouts:{getAll:Ze,getOne:Xe,subscribe:Je,getVersion:Ke,addVersion:et,updateVersion:tt,addDrill:nt,removeDrill:at,deleteWorkout:rt,deleteVersion:it},weeks:{getAll:lt,subscribe:be()(Ee()),subscribeAll:ot,updateWeek:be()(he()),updateWeekday:be()(fe()),add:be()(_e())},days:{getAll:be()(pe())}},ct={Auth:Object(a.createContext)({authUser:{},token:"",uid:"",isAuthenticating:!1,isAuthenticated:!1,updateAuth:function(){},signIn:function(){},signOut:function(){}}),UI:Object(a.createContext)({panel:{},openPanel:function(){},closePanel:function(){},breakpoint:"",setBreakpoint:function(){}})},st=n(616);function mt(){return r.a.createElement("div",{className:"c-loading"},r.a.createElement(st.a,null))}var dt={intensityOptions:[{label:"Recovery",value:"1"},{label:"Low",value:"2"},{label:"Moderate",value:"3"},{label:"High",value:"4"},{label:"Very High",value:"5"}],workoutTypes:[{label:"Long Aerobic",value:"long-aerobic",system:"2 aerobic"},{label:"Short Aerobic",value:"short-aerobic",system:"2 aerobic"},{label:"Recovery",value:"recovery",system:"1 recovery"},{label:"Intervals",value:"intervals",system:"4 atp"},{label:"Strength",value:"strength",system:"4 atp"},{label:"Tempo Run",value:"tempo",system:"3 anaerobic"},{label:"Speed Play",value:"speed-play",system:"3 anaerobic"},{label:"Hills",value:"hills",system:"3 anaerobic"}]},gt=n(229),bt=n(326);function pt(){var e=Object(f.d)(ut.weeks.subscribeAll).data,t=Object(T.a)(_.a.get(e,"weeks",[])).sort((function(e,t){return Object(Z.a)(e.week_start)-Object(Z.a)(t.week_start)}));return r.a.createElement(y.a,{className:"v-dashboard"},r.a.createElement(y.a,{display:"flex",marginBottom:48},r.a.createElement(L.a,{size:800,color:"#1070CA"},"Dashboard")),r.a.createElement(y.a,{height:450,elevation:1,background:"white",padding:24,marginBottom:24},r.a.createElement(L.a,{size:300},_.a.upperCase("Workout popularity over time")),r.a.createElement(ft,{weeks:t})),r.a.createElement(y.a,{height:300,elevation:1,background:"white",padding:24,marginBottom:24},r.a.createElement(L.a,{size:300},_.a.upperCase("Workout types over time")),r.a.createElement(_t,{weeks:t})),r.a.createElement(y.a,{height:300,elevation:1,background:"white",padding:24,marginBottom:24},r.a.createElement(L.a,{size:300},_.a.upperCase("Energy systems over time")),r.a.createElement(ht,{weeks:t})))}var _t=Object(a.memo)((function(e){var t=e.weeks,n=dt.workoutTypes,a=[],i=_.a.compact(_.a.map(_.a.rangeRight(0,10),(function(e){var r=_.a.size(t)-e;if(r<0)return!1;var i=r-10<0?0:r-10,o=_.a.slice(t,i,r);return _.a.reduce(o,(function(e,t,r){return _.a.reduce(_.a.get(t,"days",[]),(function(e,t){var i=_.a.get(_.a.find(n,["value",_.a.get(t,"workout.workout.type")]),"label");if(!i)return e;a.includes(i)||a.push(i);var o=_.a.get(e,["data",i],0)+(1-(10-r)/11);return Object(l.a)({},e,{data:Object(l.a)({},e.data,Object(H.a)({},i,o))})}),Object(l.a)({},e))}),{label:e,data:{}})}))),o=_.a.map(i,(function(e){var t=_.a.toPairs(_.a.get(e,"data")).sort((function(e,t){return t[1]-e[1]}));return Object(l.a)({},e,{data:_.a.reduce(t,(function(e,t,n){return Object(l.a)({},e,Object(H.a)({},t[0],n+1))}),{})})})),u=_.a.map(a,(function(e){return{id:e,data:_.a.map(o,(function(t){return{x:_.a.get(t,"label"),y:_.a.get(t,["data",e],_.a.size(a))}}))}}));return _.a.isEmpty(u)?null:r.a.createElement(gt.a,{data:u,margin:{top:40,right:150,bottom:60,left:60},colors:{scheme:"category10"},lineWidth:2,activeLineWidth:4,inactiveLineWidth:2,inactiveOpacity:.6,pointSize:5,activePointSize:10,inactivePointSize:0,pointColor:{theme:"background"},pointBorderWidth:3,activePointBorderWidth:3,pointBorderColor:{from:"serie.color"},axisTop:null,axisRight:null,axisBottom:{tickSize:5,tickPadding:5,tickRotation:0,legend:"Weeks ago",legendPosition:"middle",legendOffset:32},axisLeft:{tickSize:5,tickPadding:5,tickRotation:0,legend:"Rank",legendPosition:"middle",legendOffset:-40},endLabelPadding:8})}),_.a.isEqual),ft=Object(a.memo)((function(e){var t=e.weeks,n=[],a=_.a.compact(_.a.map(_.a.rangeRight(0,10),(function(e){var a=_.a.size(t)-e;if(a<=0)return!1;var r=a-10<0?0:a-10,i=_.a.slice(t,r,a);return _.a.reduce(i,(function(e,t,a){return _.a.reduce(_.a.get(t,"days",[]),(function(e,t){var r=_.a.get(t,"workout.workout.title"),i=_.a.get(t,"workout.workout.type");if(!r||"recovery"===i)return e;n.includes(r)||n.push(r);var o=_.a.get(e,["data",r],0)+(1-(10-a)/11);return Object(l.a)({},e,{data:Object(l.a)({},e.data,Object(H.a)({},r,o))})}),Object(l.a)({},e))}),{label:e,data:{}})}))),i=_.a.map(a,(function(e){var t=_.a.toPairs(_.a.get(e,"data")).sort((function(e,t){return t[1]-e[1]}));return Object(l.a)({},e,{data:_.a.reduce(t,(function(e,t,n){return Object(l.a)({},e,Object(H.a)({},t[0],n+1))}),{})})})),o=_.a.filter(_.a.map(n,(function(e){return{id:e,data:_.a.map(i,(function(t){return{x:_.a.get(t,"label"),y:_.a.get(t,["data",e],_.a.size(n))}}))}})),(function(e){var t=e.data;return _.a.get(_.a.last(t),"x")<=12}));return _.a.isEmpty(o)?null:r.a.createElement(gt.a,{data:o,margin:{top:40,right:150,bottom:60,left:60},colors:{scheme:"category10"},lineWidth:2,activeLineWidth:4,inactiveLineWidth:2,inactiveOpacity:.6,pointSize:5,activePointSize:10,inactivePointSize:0,pointColor:{theme:"background"},pointBorderWidth:3,activePointBorderWidth:3,pointBorderColor:{from:"serie.color"},axisTop:null,axisRight:null,axisBottom:{tickSize:5,tickPadding:5,tickRotation:0,legend:"Weeks ago",legendPosition:"middle",legendOffset:32},axisLeft:{tickSize:5,tickPadding:5,tickRotation:0,legend:"Rank",legendPosition:"middle",legendOffset:-40},endLabelPadding:8})}),_.a.isEqual),ht=Object(a.memo)((function(e){var t=e.weeks,n=dt.workoutTypes,a=_.a.uniq(_.a.map(n,"system")).sort(),i=_.a.reduce(a,(function(e,t){return Object(l.a)({},e,Object(H.a)({},t,0))}),{}),o=_.a.map(t,(function(e){var t=e.days;return _.a.reduce(t,(function(e,t){var a=_.a.get(t,"workout.workout.type");if(!a)return e;var r=_.a.find(n,["value",a]),i=_.a.get(r,"system","missing");return Object(l.a)({},e,Object(H.a)({},i,e[i]?e[i]+1:1))}),Object(l.a)({},i))}));return r.a.createElement(bt.a,{data:o,keys:a,margin:{top:50,right:110,bottom:50,left:60},axisTop:null,axisRight:null,axisBottom:null,axisLeft:null,offsetType:"none",order:"none",colors:{scheme:"category10"},fillOpacity:.85,legends:[{anchor:"bottom-right",direction:"column",translateX:100,itemWidth:80,itemHeight:20,itemTextColor:"#999999",symbolSize:12,symbolShape:"circle",effects:[{on:"hover",style:{itemTextColor:"#000000"}}]}]})}),_.a.isEqual),Et=n(137);function kt(e){var t=e.id,n=Object(f.d)(ut.workouts.subscribe,{variables:{id:t}}),i=n.data,l=n.loading,u=Object(f.b)(ut.workouts.deleteWorkout,{refetchQueries:[{query:ut.workouts.getAll}],awaitRefetchQueries:!0}),m=Object(o.a)(u,1)[0],d=Object(f.b)(ut.workouts.deleteVersion,{refetchQueries:[{query:ut.workouts.getOne,variables:{id:t}}],awaitRefetchQueries:!0}),g=Object(o.a)(d,1)[0],b=Object(a.useContext)(ct.UI).openPanel,p=Object(a.useState)(),h=Object(o.a)(p,2),v=h[0],w=h[1],j=dt.intensityOptions,O=dt.workoutTypes,x=Object(k.f)(),C=_.a.get(i,"workouts_by_pk.title"),B=_.a.get(i,"workouts_by_pk.type"),S=_.a.get(i,"workouts_by_pk.intensity"),A=_.a.get(i,"workouts_by_pk.versions");if(Object(a.useEffect)((function(){v||w(_.a.get(_.a.last(A),"version_num"))}),[A]),l)return r.a.createElement(mt,null);var z=_.a.find(A,["version_num",v]),P=_.a.get(z,"body",""),D=_.a.get(z,"stats",{}),I=_.a.map(_.a.get(z,"drills",[]),"drill"),W=_.a.get(_.a.find(j,["value",S]),"label",""),R=_.a.get(_.a.find(O,["value",B]),"label",""),F=function(){var e=Object(s.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m({variables:{id:t}});case 2:x.push("/workouts");case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),q=function(){var e=Object(s.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g({variables:{id:_.a.get(z,"id")}});case 2:w(_.a.get(_.a.last(A),"version_num"));case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),T=function(e){return w(_.a.get(_.a.find(A,["id",e]),"version_num"))};return r.a.createElement(r.a.Fragment,null,r.a.createElement(y.a,{display:"flex",justifyContent:"flex-end"},r.a.createElement($.a,{marginLeft:8,iconBefore:"plus",onClick:function(){return b({panel:"workouts/add-version",props:{id:z.id,workoutId:t,emit:T},size:"wide"})}},"Add Version"),r.a.createElement($.a,{marginLeft:8,iconBefore:"edit",onClick:function(){return b({panel:"workouts/edit",props:{id:z.id},size:"wide"})}},"Edit")),r.a.createElement(y.a,{marginBottom:32,display:"flex",flexDirection:"row",alignItems:"center"},r.a.createElement(y.a,{marginRight:16},r.a.createElement(L.a,null,C)),r.a.createElement(y.a,{flex:1},r.a.createElement(re.a,{marginRight:8,color:"blue"},R),r.a.createElement(re.a,{color:"blue"},W))),r.a.createElement(y.a,{display:"flex",flexDirection:"row",alignItems:"center",marginBottom:24},r.a.createElement(U.a,null,"Versions:"),r.a.createElement(y.a,{flex:1,marginLeft:16},r.a.createElement(ue.a,{alignItems:"center"},A&&_.a.map(A,(function(e){var t=e.version_num;return r.a.createElement(ce.a,{key:t,id:t,onSelect:function(){return w(t)},isSelected:v===t,"aria-controls":"panel-".concat(t)},t)}))))),r.a.createElement(y.a,{background:"white",padding:32,marginBottom:32,elevation:1},r.a.createElement(L.a,{marginBottom:16,size:200},"Description:"),P&&_.a.map(P.split("\n"),(function(e,t){return e?r.a.createElement(M.a,{key:t},e):r.a.createElement("br",{key:t})}))),r.a.createElement(y.a,{marginBottom:32},r.a.createElement(L.a,{size:200,marginBottom:16},"Drills:"),_.a.isEmpty(I)?r.a.createElement(M.a,null,"No attached drills"):_.a.map(I,(function(e){var t=e.id,n=e.title;return r.a.createElement(E.b,{to:"/drills/".concat(t),key:t,style:{marginBottom:"24px"}},r.a.createElement(y.a,{display:"flex",elevation:1,height:48,alignItems:"center",background:"white",marginBottom:16},r.a.createElement(U.a,{marginLeft:24},n)))}))),r.a.createElement(y.a,{background:"white",padding:32,elevation:1,marginBottom:24},r.a.createElement(L.a,{size:200},"Workout Minutes:"),r.a.createElement(y.a,{height:225},r.a.createElement(vt,{stats:D}))),r.a.createElement(y.a,{display:"flex",justifyContent:"flex-end",marginBottom:32},r.a.createElement($.a,{intent:"danger",appearance:"minimal",onClick:q,marginRight:24},"Delete This Version"),r.a.createElement($.a,{intent:"danger",appearance:"minimal",onClick:F},"Delete This Workout")))}var vt=Object(a.memo)((function(e){var t=e.stats,n=_.a.map(["short","long"],(function(e){return{id:"short"===e?"5/10km":"half/ultra",beginner:_.a.get(t,"running_minutes_beginner_".concat(e)),intermediate:_.a.get(t,"running_minutes_intermediate_".concat(e)),advanced:_.a.get(t,"running_minutes_advanced_".concat(e))}}));return console.log(n),r.a.createElement(Et.a,{data:n,margin:{top:16,right:16,bottom:32,left:64},innerPadding:2,keys:["beginner","intermediate","advanced"],layout:"horizontal",groupMode:"grouped",colors:{scheme:"category10"},justify:!0,axisTop:null,axisRight:null,axisBottom:null,axisLeft:{tickSize:5,tickPadding:5,tickRotation:0,legendPosition:"middle",legendOffset:-40},isInteractive:!1,enableGridY:!1,legends:[{dataFrom:"keys",anchor:"bottom",direction:"row",translateX:0,translateY:32,itemWidth:128,itemHeight:16,itemDirection:"left-to-right",symbolSize:16}]})}),_.a.isEqual);function yt(){var e=Object(a.useContext)(ct.UI).openPanel,t=Object(f.c)(ut.workouts.getAll),n=t.data,i=t.loading,l=_.a.get(n,"workouts"),o=dt.intensityOptions,u=dt.workoutTypes;return i?r.a.createElement(mt,null):r.a.createElement(r.a.Fragment,null,r.a.createElement(y.a,{display:"flex",justifyContent:"flex-end"},r.a.createElement($.a,{iconBefore:"plus",onClick:function(){return e({panel:"workouts/add",size:"wide"})}},"Add")),r.a.createElement(y.a,{marginBottom:16},r.a.createElement(L.a,null,"All Workouts:")),r.a.createElement(y.a,{marginBottom:40},l&&_.a.map(l,(function(e){var t=e.id,n=e.title,a=e.intensity,i=e.type,l=_.a.get(_.a.find(o,["value",a]),"label",""),c=_.a.get(_.a.find(u,["value",i]),"label","");return r.a.createElement(E.b,{to:"/workouts/".concat(t),key:t,style:{marginBottom:"24px",width:"100%"}},r.a.createElement(y.a,{className:"c-row-hover",display:"flex",elevation:1,height:48,alignItems:"center",background:"white",marginBottom:16},r.a.createElement(y.a,{flex:1},r.a.createElement(U.a,{marginLeft:24,marginRight:8},n),r.a.createElement(re.a,{marginRight:8,color:"blue"},c),r.a.createElement(re.a,{color:"blue"},l))))}))))}function wt(){var e=Object(k.h)().id,t=Boolean(e);return r.a.createElement(r.a.Fragment,null,r.a.createElement(y.a,null,r.a.createElement(L.a,{size:800,color:"#1070CA",marginBottom:48},"Workouts")),r.a.createElement(y.a,null,t?r.a.createElement(kt,{id:e}):r.a.createElement(yt,null)))}var jt=n(79),Ot=n(331);function xt(e){var t=e.id,n=dt.workoutTypes,i=Object(f.d)(ut.weeks.subscribe,{variables:{id:t}}),l=i.data,u=i.loading,m=Object(f.c)(ut.dailyChallenges.getAll),d=m.data,g=m.loading,b=Object(f.b)(ut.weeks.updateWeek),p=Object(o.a)(b,1)[0],h=Object(a.useContext)(ct.UI).openPanel;if(u||g)return r.a.createElement(mt,null);var E=_.a.get(l,"weeks_by_pk"),k=E.title,v=E.updated_at,w=E.days,j=_.a.compact(_.a.map(w,"workout")),O=_.a.compact(_.a.map(w,"workout.stats")),x=_.a.get(E,"daily_challenges.id",""),C=_.a.get(d,"daily_challenges",[]),B=_.a.map(C,(function(e){return{value:e.id,label:e.title}}));return r.a.createElement(r.a.Fragment,null,r.a.createElement(y.a,{display:"flex",justifyContent:"flex-end"},r.a.createElement($.a,{marginLeft:8,iconBefore:"arrow-down",onClick:function(e){return Ct(E,e)}},"Download DOCX")),r.a.createElement(y.a,{marginBottom:32,display:"flex",flexDirection:"row",alignItems:"center"},r.a.createElement(y.a,{marginRight:16},r.a.createElement(L.a,null,k)),r.a.createElement(y.a,{flex:1},r.a.createElement(U.a,null,"Last updated: ",r.a.createElement(re.a,{color:"blue"},Object(K.a)(Object(Z.a)(v),"dd MMM yyyy @ h:mm a").replace("@","at"))))),r.a.createElement(y.a,{marginBottom:32},r.a.createElement(R.a,{initialValues:{challenge:_.a.isNull(x)?"":x},onSubmit:function(){var e=Object(s.a)(c.a.mark((function e(n){var a;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.challenge,console.log(a),e.prev=2,e.next=5,p({variables:{id:t,data:{_challenge:a}}});case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(2),console.error(e.t0);case 10:case"end":return e.stop()}}),e,null,[[2,7]])})));return function(t){return e.apply(this,arguments)}}(),enableReinitialize:!0},(function(e){var t=e.values,n=e.handleSubmit,a=e.handleChange;return r.a.createElement(r.a.Fragment,null,r.a.createElement("form",null,r.a.createElement(y.a,{display:"flex",width:"50%",flexDirection:"row",alignItems:"center"},r.a.createElement(Y.a,{flex:1,label:"Add a challenge",name:"challenge",value:t.challenge,onChange:function(e){a(e),n()},height:40},r.a.createElement("option",{key:"empty",value:""},"Please select one..."),B&&_.a.map(B,(function(e){var t=e.value,n=e.label;return r.a.createElement("option",{key:t,value:t},n)}))))))}))),r.a.createElement(y.a,{display:"flex",justifyContent:"space-between",marginBottom:32},w&&_.a.map(w,(function(e){var t=e.id,a=e.day.title,i=e.workout,l=_.a.get(i,"workout.title"),o=_.a.get(i,"version_num"),u=_.a.get(i,"id",""),c=_.a.get(i,"workout.type");return r.a.createElement(y.a,{key:t,elevation:1,width:"12%",background:"white",paddingLeft:16,paddingBottom:16},r.a.createElement(y.a,{display:"flex",justifyContent:"space-between",alignItems:"flex-end",marginBottom:8},r.a.createElement(L.a,{size:200},a),r.a.createElement(Q.a,{icon:"small-plus",appearance:"minimal",onClick:function(){return h({panel:"weeks/update-workout",props:{id:t,title:a},size:"wide"})}})),r.a.createElement(y.a,{paddingRight:16},_.a.isEmpty(i)?r.a.createElement(U.a,{color:"red"},"No workout chosen"):r.a.createElement("div",{onClick:function(){return h({panel:"weeks/view-workout-version",props:{id:u},size:"wide"})}},r.a.createElement(M.a,{marginBottom:8},l," - v",o),r.a.createElement(re.a,{color:"blue"},_.a.get(_.a.find(n,["value",c]),"label")))))}))),r.a.createElement(y.a,{marginBottom:40},r.a.createElement(L.a,{marginBottom:8},"Stats:"),r.a.createElement(y.a,{display:"flex",justifyContent:"space-between"},r.a.createElement(y.a,{background:"white",padding:32,elevation:1,marginBottom:24,width:"45%"},r.a.createElement(L.a,{size:200},"Workout Minutes:"),r.a.createElement(y.a,{height:250},r.a.createElement(St,{stats:O}))),r.a.createElement(y.a,{background:"white",padding:32,elevation:1,marginBottom:24,width:"45%"},r.a.createElement(L.a,{size:200},"Energy Systems:"),r.a.createElement(y.a,{height:250},r.a.createElement(Bt,{workouts:j}))))))}var Ct=function(e,t){t.preventDefault();var n=e.title,a=e.days,r=e.daily_challenge,i=new jt.Document,l=[new jt.Paragraph({text:n,heading:jt.HeadingLevel.HEADING_1})];r&&_.a.isEmpty(r),_.a.forEach(a,(function(e){var t=_.a.get(e,"day.title",""),n=_.a.get(e,"workout",[]),a=_.a.compact(_.a.get(e,"workout.drills",[]));if(l.push(new jt.Paragraph({text:t,heading:jt.HeadingLevel.HEADING_3,spacing:{before:300}})),_.a.isEmpty(n))l.push(new jt.Paragraph({text:"Nothing assigned today, rest day!"}));else{if(!_.a.isEmpty(a)){var r=_.a.map(a,(function(e){var t=e.drill,n=t.title,a=t.url;return new jt.Paragraph({text:"".concat(n,": ").concat(a),bullet:{level:0}})}));l.push(new jt.Paragraph({text:"Please perform the following drills:",heading:jt.HeadingLevel.HEADING_4})),l.push.apply(l,Object(T.a)(r))}l.push(new jt.Paragraph({text:n.body}))}})),i.addSection({children:l}),jt.Packer.toBlob(i).then((function(e){return Object(Ot.save)(e,"".concat(n,".docx"))}))},Bt=Object(a.memo)((function(e){var t=e.workouts,n=dt.workoutTypes,a=_.a.uniq(_.a.map(n,"system")).sort(),i=_.a.map(t,(function(e){return _.a.get(_.a.find(n,["value",_.a.get(e,"workout.type")]),"system")})),l=_.a.map(a,(function(e){return{id:_.a.capitalize(_.a.nth(e.split(" "),1)),value:_.a.size(_.a.filter(i,(function(t){return t===e})))}}));return r.a.createElement(Et.a,{data:l,margin:{top:16,right:16,bottom:16,left:72},layout:"horizontal",colors:{scheme:"category10"},colorBy:"index",justify:!0,axisTop:null,axisRight:null,axisBottom:null,axisLeft:{tickSize:5,tickPadding:5,tickRotation:0,legendPosition:"middle",legendOffset:-40},isInteractive:!1,enableGridY:!1})}),_.a.isEqual),St=Object(a.memo)((function(e){var t=e.stats,n=_.a.map(["short","long"],(function(e){return{id:"short"===e?"5/10km":"half/ultra",beginner:_.a.reduce(t,(function(t,n){return _.a.isNull(_.a.get(n,"running_minutes_beginner_".concat(e),0))?t:t+_.a.get(n,"running_minutes_beginner_".concat(e),0)}),0),intermediate:_.a.reduce(t,(function(t,n){return _.a.isNull(_.a.get(n,"running_minutes_intermediate_".concat(e),0))?t:t+_.a.get(n,"running_minutes_intermediate_".concat(e),0)}),0),advanced:_.a.reduce(t,(function(t,n){return _.a.isNull(_.a.get(n,"running_minutes_advanced_".concat(e),0))?t:t+_.a.get(n,"running_minutes_advanced_".concat(e),0)}),0)}}));return r.a.createElement(Et.a,{data:n,margin:{top:16,right:16,bottom:32,left:64},innerPadding:2,keys:["beginner","intermediate","advanced"],layout:"horizontal",groupMode:"grouped",colors:{scheme:"category10"},justify:!0,axisTop:null,axisRight:null,axisBottom:null,axisLeft:{tickSize:5,tickPadding:5,tickRotation:0,legendPosition:"middle",legendOffset:-40},isInteractive:!1,enableGridY:!1,legends:[{dataFrom:"keys",anchor:"bottom",direction:"row",translateX:0,translateY:32,itemWidth:128,itemHeight:16,itemDirection:"left-to-right",symbolSize:16}]})}),_.a.isEqual),At=n(670),zt=new Date;function Pt(){var e=Object(a.useContext)(ct.UI).openPanel,t=Object(f.c)(ut.weeks.getAll),n=t.data,i=t.loading,l=Object(T.a)(_.a.get(n,"weeks",[])).sort((function(e,t){return Object(Z.a)(t.week_start)-Object(Z.a)(e.week_start)}));return i?r.a.createElement(mt,null):r.a.createElement(r.a.Fragment,null,r.a.createElement(y.a,{display:"flex",justifyContent:"flex-end"},r.a.createElement($.a,{iconBefore:"plus",onClick:function(){return e({panel:"weeks/add"})}},"Add")),r.a.createElement(y.a,{marginBottom:16},r.a.createElement(L.a,null,"All Weeks:")),r.a.createElement(y.a,{marginBottom:40},l&&_.a.map(l,(function(e){var t=e.id,n=e.title,a=e.week_start,i=Object(At.a)(zt,Object(Z.a)(a)),l=i>=7?"#FEF6F6":"white";return r.a.createElement(E.b,{to:"/weeks/".concat(t),key:t,style:{marginBottom:"24px"}},r.a.createElement(y.a,{className:"c-row-hover",display:"flex",elevation:1,height:48,alignItems:"center",background:l,marginBottom:16},r.a.createElement(U.a,{marginLeft:24,marginRight:16},n),i>=0&&i<7&&r.a.createElement(re.a,{color:"green"},"Current")))}))))}function Dt(){var e=Object(k.h)().id,t=Boolean(e);return r.a.createElement(r.a.Fragment,null,r.a.createElement(y.a,null,r.a.createElement(L.a,{size:800,color:"#1070CA",marginBottom:48},"Weeks")),r.a.createElement(y.a,null,t?r.a.createElement(xt,{id:e}):r.a.createElement(Pt,null)))}var It=n(661);function Wt(e){var t=Object(a.useContext)(ct.UI).openPanel,n=e.id,i=Object(f.c)(ut.drills.getOne,{variables:{id:n}}),l=i.data;if(i.loading)return r.a.createElement(mt,null);var o=_.a.get(l,"drills_by_pk",{}),u=_.a.get(o,"title"),c=_.a.get(o,"description"),s=_.a.get(o,"url"),m=_.a.get(o,"embed_url"),d=_.a.get(o,"workouts_drills",[]),g=_.a.size(d);return r.a.createElement(r.a.Fragment,null,r.a.createElement(y.a,{display:"flex",justifyContent:"flex-end"},r.a.createElement($.a,{iconBefore:"edit",onClick:function(){return t({panel:"drills/edit",props:{id:n}})}},"Edit")),r.a.createElement(y.a,{marginBottom:32,display:"flex"},r.a.createElement(L.a,{marginRight:16},u),s&&r.a.createElement(It.a,{href:s,target:"_blank",rel:"noreferrer noopener"},s)),r.a.createElement(y.a,{display:"flex"},r.a.createElement(y.a,{flex:1,marginRight:32},c&&r.a.createElement(y.a,{background:"white",padding:32,marginBottom:32,elevation:1},r.a.createElement(M.a,null,c)),r.a.createElement(y.a,{background:"white",padding:32,marginBottom:32,elevation:1},r.a.createElement(U.a,null,"Appears in ",r.a.createElement("strong",null,g)," workouts"))),m&&r.a.createElement(y.a,{elevation:1,height:315,width:560},r.a.createElement("iframe",{width:"560",height:"315",src:m,title:u,frameBorder:"0",allow:"accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0}))))}function $t(){var e=Object(a.useContext)(ct.UI).openPanel,t=Object(f.c)(ut.drills.getAll),n=t.data,i=t.loading,l=_.a.get(n,"drills");return i?r.a.createElement(mt,null):r.a.createElement(r.a.Fragment,null,r.a.createElement(y.a,{display:"flex",justifyContent:"flex-end"},r.a.createElement($.a,{iconBefore:"plus",onClick:function(){return e({panel:"drills/add"})}},"Add")),r.a.createElement(y.a,{marginBottom:16},r.a.createElement(L.a,null,"All Drills:")),r.a.createElement(y.a,null,l&&_.a.map(l,(function(e){var t=e.id,n=e.title;return r.a.createElement(E.b,{to:"/drills/".concat(t),key:t,style:{marginBottom:"24px"}},r.a.createElement(y.a,{className:"c-row-hover",display:"flex",elevation:1,height:48,alignItems:"center",background:"white",marginBottom:16},r.a.createElement(U.a,{marginLeft:24},n)))}))))}function Rt(){var e=Object(k.h)().id,t=Boolean(e);return r.a.createElement(r.a.Fragment,null,r.a.createElement(y.a,null,r.a.createElement(L.a,{size:800,color:"#1070CA",marginBottom:48},"Drills")),r.a.createElement(y.a,null,t?r.a.createElement(Wt,{id:e}):r.a.createElement($t,null)))}function Lt(e){var t=Object(a.useContext)(ct.UI).openPanel,n=e.id,i=Object(f.c)(ut.dailyChallenges.getOne,{variables:{id:n}}),l=i.data;if(i.loading)return r.a.createElement(mt,null);var o=_.a.get(l,"daily_challenges_by_pk",{}),u=_.a.get(o,"title"),c=_.a.get(o,"description"),s=_.a.get(o,"workouts_drills",[]),m=_.a.size(s);return r.a.createElement(r.a.Fragment,null,r.a.createElement(y.a,{display:"flex",justifyContent:"flex-end"},r.a.createElement($.a,{iconBefore:"edit",onClick:function(){return t({panel:"daily-challenges/edit",props:{id:n}})}},"Edit")),r.a.createElement(y.a,{marginBottom:32,display:"flex"},r.a.createElement(L.a,{marginRight:16},u)),r.a.createElement(y.a,{display:"flex"},r.a.createElement(y.a,{flex:1,marginRight:32},c&&r.a.createElement(y.a,{background:"white",padding:32,marginBottom:32,elevation:1},r.a.createElement(M.a,null,c)),r.a.createElement(y.a,{background:"white",padding:32,marginBottom:32,elevation:1},r.a.createElement(U.a,null,"Appears in ",r.a.createElement("strong",null,m)," weeks")))))}function Ft(){var e=Object(a.useContext)(ct.UI).openPanel,t=Object(f.c)(ut.dailyChallenges.getAll),n=t.data,i=t.loading,l=_.a.get(n,"daily_challenges");return i?r.a.createElement(mt,null):r.a.createElement(r.a.Fragment,null,r.a.createElement(y.a,{display:"flex",justifyContent:"flex-end"},r.a.createElement($.a,{iconBefore:"plus",onClick:function(){return e({panel:"daily-challenges/add"})}},"Add")),r.a.createElement(y.a,{marginBottom:16},r.a.createElement(L.a,null,"All Daily Challenges:")),r.a.createElement(y.a,null,l&&_.a.map(l,(function(e){var t=e.id,n=e.title;return r.a.createElement(E.b,{to:"/challenges/".concat(t),key:t,style:{marginBottom:"24px"}},r.a.createElement(y.a,{className:"c-row-hover",display:"flex",elevation:1,height:48,alignItems:"center",background:"white",marginBottom:16},r.a.createElement(U.a,{marginLeft:24},n)))}))))}function qt(){var e=Object(k.h)().id,t=Boolean(e);return r.a.createElement(r.a.Fragment,null,r.a.createElement(y.a,null,r.a.createElement(L.a,{size:800,color:"#1070CA",marginBottom:48},"Daily Challenges")),r.a.createElement(y.a,null,t?r.a.createElement(Lt,{id:e}):r.a.createElement(Ft,null)))}Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var Ut=document.getElementById("root");Ut.hasChildNodes()?Object(i.hydrate)(r.a.createElement(D,null),Ut):Object(i.render)(r.a.createElement(D,null),Ut),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[371,1,2]]]);
//# sourceMappingURL=main.7e56db5a.chunk.js.map