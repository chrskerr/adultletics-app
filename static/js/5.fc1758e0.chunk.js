(this["webpackJsonpadultletics-admin"]=this["webpackJsonpadultletics-admin"]||[]).push([[5],{106:function(e,t,n){"use strict";var a=n(316),r=n(317),i=n.n(r);function l(){var e=Object(a.a)(["\n    query getAllDays {\n        days {\n            id title  uid\n        }\n    }\n"]);return l=function(){return e},e}function u(){var e=Object(a.a)(["\n    mutation updateWeeksDays ( $objects: [weeks_insert_input!]! ) {\n        insert_weeks( objects: $objects ) {\n            returning { id }\n        }\n    }\n"]);return u=function(){return e},e}function o(){var e=Object(a.a)(["\n    mutation updateWeeksDays ( $id: uuid!, $data: weeks_days_set_input! ) {\n        update_weeks_days( where: { id: { _eq: $id }}, _set: $data ) {\n            returning { id }\n        }\n    }\n"]);return o=function(){return e},e}function s(){var e=Object(a.a)(["\n    mutation updateWeek ( $id: uuid!, $data: weeks_set_input! ) {\n        update_weeks( where: { id: { _eq: $id }}, _set: $data ) {\n            returning { id }\n        }\n    }\n"]);return s=function(){return e},e}function c(){var e=Object(a.a)(["\n    subscription weekSubscription ( $id: uuid! ) {\n        weeks_by_pk( id: $id ) {\n            created_at id week_start\n            title updated_at\n            days ( order_by: { _day: asc }) {\n                id\n                day { id title uid }\n                workout {\n                    body id\n                    version_num\n                    drills {\n                        id\n                        drill {\n                            description\n                            id title url\n                        }\n                    }\n                    workout {\n                        id intensity\n                        title type\n                    }\n                    stats {\n                        id\n                        running_minutes_beginner_short running_km_beginner_short\n                        running_minutes_intermediate_short running_km_intermediate_short\n                        running_minutes_advanced_short running_km_advanced_short\n                        running_minutes_beginner_long running_km_beginner_long\n                        running_minutes_intermediate_long running_km_intermediate_long\n                        running_minutes_advanced_long running_km_advanced_long\n                    }\n                }\n            }\n            daily_challenge { id title description }\n        }\n    }\n"]);return c=function(){return e},e}function d(){var e=Object(a.a)(["\n    subscription getAllWeeks {\n        weeks {\n            id title updated_at week_start\n            days ( order_by: { _day: asc }) {\n                id\n                day { id title uid }\n                workout {\n                    body id\n                    version_num\n                    drills {\n                        id\n                        drill {\n                            description\n                            id title url\n                        }\n                    }\n                    workout {\n                        id intensity\n                        title type\n                    }\n                    stats {\n                        id\n                        running_minutes_beginner_short running_km_beginner_short\n                        running_minutes_intermediate_short running_km_intermediate_short\n                        running_minutes_advanced_short running_km_advanced_short\n                        running_minutes_beginner_long running_km_beginner_long\n                        running_minutes_intermediate_long running_km_intermediate_long\n\t\t\t\t\t    running_minutes_advanced_long running_km_advanced_long\n                    }\n                }\n            }\n        }\n    }\n"]);return d=function(){return e},e}function m(){var e=Object(a.a)(["\n    query getAllWeeks {\n        weeks {\n            id title updated_at week_start _challenge\n            days ( order_by: { _day: asc }) {\n                id\n                day { id title uid }\n                workout {\n                    body id\n                    version_num\n                    drills {\n                        id\n                        drill {\n                            description\n                            id title url\n                        }\n                    }\n                    workout {\n                        id intensity\n                        title type\n                    }\n                    stats {\n                        id\n                        running_minutes_beginner_short running_km_beginner_short\n                        running_minutes_intermediate_short running_km_intermediate_short\n                        running_minutes_advanced_short running_km_advanced_short\n                        running_minutes_beginner_long running_km_beginner_long\n                        running_minutes_intermediate_long running_km_intermediate_long\n                        running_minutes_advanced_long running_km_advanced_long\n                    }\n                }\n            }\n        }\n    }\n"]);return m=function(){return e},e}function g(){var e=Object(a.a)(["\n    mutation deleteWorkout ( $id: uuid! ) {\n        update_weeks_days( where: { _workouts_version: { _eq: $id }}, _set: { _workouts_version: null }) {\n            returning { id }\n        }\n        delete_workouts_drills( where: { workouts_version: { id: { _eq: $id }}}) {\n            returning { id }\n        }\n        delete_workouts_versions( where: { id: { _eq: $id }}) {\n            returning { id }\n        }\n        delete_workouts_stats( where: { workouts_version: { id: { _eq: $id }}}) {\n            returning { id }\n        }\n    }\n"]);return g=function(){return e},e}function b(){var e=Object(a.a)(["\n    mutation deleteWorkout ( $id: uuid! ) {\n        update_weeks_days( where: { workout: { _workout: {_eq: $id }}}, _set: { _workouts_version: null }) {\n            returning { id }\n        }\n        delete_workouts_drills( where: { workouts_version: { workout: { id: { _eq: $id }}}}) {\n            returning { id }\n        }\n        delete_workouts_versions( where: { workout: { id: { _eq: $id }}}) {\n            returning { id }\n        }\n        delete_workouts_stats( where: { workouts_version: { workout: { id: { _eq: $id }}}}) {\n            returning { id }\n        }\n        delete_workouts( where: { id: { _eq: $id }}) {\n            returning { id }\n        }\n    }\n"]);return b=function(){return e},e}function _(){var e=Object(a.a)(["\n\tmutation deleteWorkoutsDrills ( $id: uuid! ) {\n\t\tdelete_workouts_drills( where: { id: { _eq: $id }}) {\n\t\t\treturning { id }\n\t\t}\n\t}\n"]);return _=function(){return e},e}function p(){var e=Object(a.a)(["\n\tmutation insertWorkoutsDrills ( $objects: [workouts_drills_insert_input!]! ) {\n\t\tinsert_workouts_drills( objects: $objects ) {\n\t\t\treturning { id }\n\t\t}\n\t}\n"]);return p=function(){return e},e}function h(){var e=Object(a.a)(["\n\tmutation updateWorkoutVersion ( $version_id: uuid!, $stats_id: uuid!, $workout_id: uuid!, $body: String!, $workout_data: workouts_set_input!, $stats_data: workouts_stats_set_input! ) {\n\t\tupdate_workouts_versions( where: { id: { _eq: $version_id }}, _set: { body: $body }) {\n\t\t\treturning { id }\n\t\t}\n\t\tupdate_workouts_stats( where: { id: { _eq: $stats_id }}, _set: $stats_data ) {\n\t\t\treturning { id }\n\t\t}\n\t\tupdate_workouts( where: { id: { _eq: $workout_id }}, _set: $workout_data ) {\n\t\t\treturning { id }\n\t\t}\n\t}\n"]);return h=function(){return e},e}function v(){var e=Object(a.a)(["\n\tmutation insertWorkoutVersion ( $objects: [workouts_versions_insert_input!]! ) {\n\t\tinsert_workouts_versions ( objects: $objects ) {\n\t\t\treturning { id workout { id } }\n\t\t}\n\t}\n"]);return v=function(){return e},e}function k(){var e=Object(a.a)(["\n\tquery getWorkout ( $id: uuid! ) {\n\t\tworkouts_versions_by_pk ( id: $id ) {\n\t\t\tid body\n\t\t\tversion_num\n\t\t\towner {\n\t\t\t\tfirst_name\n\t\t\t}\n\t\t\tdrills {\n\t\t\t\tid\n\t\t\t\tdrill {\n\t\t\t\t\ttitle id\n\t\t\t\t}\n\t\t\t}\n\t\t\tstats {\n                id\n                running_minutes_beginner_short running_km_beginner_short\n                running_minutes_intermediate_short running_km_intermediate_short\n                running_minutes_advanced_short running_km_advanced_short\n                running_minutes_beginner_long running_km_beginner_long\n                running_minutes_intermediate_long running_km_intermediate_long\n                running_minutes_advanced_long running_km_advanced_long\n\t\t\t}\n\t\t\tworkout {\n\t\t\t\tid title type\n                intensity\n\t\t\t}\n\t\t}\n\t}\n"]);return k=function(){return e},e}function f(){var e=Object(a.a)(["\n\tsubscription getWorkout ( $id: uuid! ) {\n\t\tworkouts_by_pk( id: $id ) {\n\t\t\tid title type\n            intensity\n\t\t\tversions ( order_by: { version_num: asc } ){\n\t\t\t\tid body\n\t\t\t\tversion_num\n\t\t\t\towner {\n\t\t\t\t\tfirst_name\n\t\t\t\t}\n\t\t\t\tdrills {\n\t\t\t\t\tid\n\t\t\t\t\tdrill {\n\t\t\t\t\t\ttitle id\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tstats {\n\t\t\t\t\tid\n\t\t\t\t\trunning_minutes_beginner_short running_km_beginner_short\n\t\t\t\t\trunning_minutes_intermediate_short running_km_intermediate_short\n\t\t\t\t\trunning_minutes_advanced_short running_km_advanced_short\n\t\t\t\t\trunning_minutes_beginner_long running_km_beginner_long\n\t\t\t\t\trunning_minutes_intermediate_long running_km_intermediate_long\n\t\t\t\t\trunning_minutes_advanced_long running_km_advanced_long\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n"]);return f=function(){return e},e}function E(){var e=Object(a.a)(["\n\tquery getWorkout ( $id: uuid! ) {\n\t\tworkouts_by_pk( id: $id ) {\n\t\t\tid title type\n            intensity\n\t\t\tversions ( order_by: { version_num: asc } ){\n\t\t\t\tid body\n\t\t\t\tversion_num\n\t\t\t\towner {\n\t\t\t\t\tfirst_name\n\t\t\t\t}\n\t\t\t\tdrills {\n\t\t\t\t\tid\n\t\t\t\t\tdrill {\n\t\t\t\t\t\ttitle id\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tstats {\n\t\t\t\t\tid\n\t\t\t\t\trunning_minutes_beginner_short running_km_beginner_short\n\t\t\t\t\trunning_minutes_intermediate_short running_km_intermediate_short\n\t\t\t\t\trunning_minutes_advanced_short running_km_advanced_short\n\t\t\t\t\trunning_minutes_beginner_long running_km_beginner_long\n\t\t\t\t\trunning_minutes_intermediate_long running_km_intermediate_long\n\t\t\t\t\trunning_minutes_advanced_long running_km_advanced_long\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n"]);return E=function(){return e},e}function y(){var e=Object(a.a)(["\n\tquery getWorkouts {\n\t\tworkouts {\n\t\t\tid title type intensity\n            versions ( order_by: { version_num: asc } ){\n\t\t\t\tid body\n\t\t\t\tversion_num\n\t\t\t\towner {\n\t\t\t\t\tfirst_name\n\t\t\t\t}\n\t\t\t\tdrills {\n\t\t\t\t\tid\n\t\t\t\t\tdrill {\n\t\t\t\t\t\ttitle id\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tstats {\n\t\t\t\t\tid\n\t\t\t\t\trunning_minutes_beginner_short running_km_beginner_short\n\t\t\t\t\trunning_minutes_intermediate_short running_km_intermediate_short\n\t\t\t\t\trunning_minutes_advanced_short running_km_advanced_short\n\t\t\t\t\trunning_minutes_beginner_long running_km_beginner_long\n\t\t\t\t\trunning_minutes_intermediate_long running_km_intermediate_long\n\t\t\t\t\trunning_minutes_advanced_long running_km_advanced_long\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n"]);return y=function(){return e},e}function w(){var e=Object(a.a)(["\n\tmutation updateChallenge ( $id: uuid!, $data: daily_challenges_set_input! ) {\n\t\tupdate_daily_challenges ( where: { id: { _eq: $id }}, _set: $data ) {\n\t\t\treturning { id }\n\t\t}\n\t}\n"]);return w=function(){return e},e}function j(){var e=Object(a.a)(["\n\tmutation insertChalleenge ( $objects: [daily_challenges_insert_input!]! ) {\n\t\tinsert_daily_challenges ( objects: $objects ) {\n\t\t\treturning { id }\n\t\t}\n\t}\n"]);return j=function(){return e},e}function O(){var e=Object(a.a)(["\n\tquery getChallenge ( $id: uuid! ) {\n\t\tdaily_challenges_by_pk ( id: $id ) {\n\t\t\tid title description\n            weeks { id }\n\t\t}\n\t}\n"]);return O=function(){return e},e}function C(){var e=Object(a.a)(["\n\tquery getAllChallenges {\n\t\tdaily_challenges ( order_by: { title: asc }) {\n\t\t\tid title description\n\t\t}\n\t}\n"]);return C=function(){return e},e}function x(){var e=Object(a.a)(["\n\tmutation updateDrills ( $id: uuid!, $data: drills_set_input! ) {\n\t\tupdate_drills( where: { id: { _eq: $id }}, _set: $data ) {\n\t\t\treturning { id }\n\t\t}\n\t}\n"]);return x=function(){return e},e}function B(){var e=Object(a.a)(["\n\tmutation insertDrills ( $objects: [drills_insert_input!]! ) {\n\t\tinsert_drills ( objects: $objects ) {\n\t\t\treturning { id }\n\t\t}\n\t}\n"]);return B=function(){return e},e}function S(){var e=Object(a.a)(["\n\tquery getAllDrills ( $id: uuid! ) {\n\t\tdrills_by_pk ( id: $id ) {\n\t\t\tid title url description embed_url\n\t\t\tworkouts_drills {\n\t\t\t\tworkouts_version {\n\t\t\t\t\tworkout { title }\n\t\t\t\t\tversion_num\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n"]);return S=function(){return e},e}function A(){var e=Object(a.a)(["\n\tquery getAllDrills {\n\t\tdrills ( order_by: { title: asc }) {\n\t\t\tid title url description embed_url\n\t\t}\n\t}\n"]);return A=function(){return e},e}function $(){var e=Object(a.a)(["\n\tquery getUser ( $uid: String! ) {\n\t\tusers_by_pk( uid: $uid ) {\n\t\t\temail first_name id\n\t\t}\n\t}\n"]);return $=function(){return e},e}var D=i()($()),q=i()(A()),z=i()(S()),P=i()(B()),U=i()(x()),F=i()(C()),I=i()(O()),W=i()(j()),L=i()(w()),V=i()(y()),R=i()(E()),T=i()(f()),Q=i()(k()),N=i()(v()),M=i()(h()),Z=i()(p()),H=i()(_()),J=i()(b()),K=i()(g()),Y=i()(m()),G=i()(d()),X=i()(c()),ee=i()(s()),te=i()(o()),ne=i()(u()),ae=i()(l());t.a={auth:{getUser:D},drills:{getAll:q,getOne:z,add:P,update:U},dailyChallenges:{getAll:F,getOne:I,add:W,update:L},workouts:{getAll:V,getOne:R,subscribe:T,getVersion:Q,addVersion:N,updateVersion:M,addDrill:Z,removeDrill:H,deleteWorkout:J,deleteVersion:K},weeks:{getAll:Y,subscribe:X,subscribeAll:G,updateWeek:ee,updateWeekday:te,add:ne},days:{getAll:ae}}},107:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var a=n(0),r=n.n(a),i=n(603);function l(){return r.a.createElement("div",{className:"c-loading"},r.a.createElement(i.a,null))}},124:function(e,t,n){"use strict";t.a={intensityOptions:[{label:"Recovery",value:"1"},{label:"Low",value:"2"},{label:"Moderate",value:"3"},{label:"High",value:"4"},{label:"Very High",value:"5"}],workoutTypes:[{label:"Long Aerobic",value:"long-aerobic",system:"2 aerobic"},{label:"Short Aerobic",value:"short-aerobic",system:"2 aerobic"},{label:"Recovery",value:"recovery",system:"1 recovery"},{label:"Intervals",value:"intervals",system:"3 anaerobic"},{label:"Strength",value:"strength",system:"4 atp"},{label:"Tempo Run",value:"tempo",system:"3 anaerobic"},{label:"Speed Play",value:"speed-play",system:"3 anaerobic"},{label:"Hills",value:"hills",system:"3 anaerobic"}]}},332:function(e,t,n){},675:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return ue}));var a=n(105),r=n(9),i=n(0),l=n.n(i),u=n(7),o=n(15),s=n.n(o),c=n(17),d=n.n(c),m=n(25),g=n(1),b=n.n(g),_=n(311),p=n.n(_),h=(n(314),n(59)),v=n(83),k=n(106);function f(e){var t=e.children,n=Object(h.a)(),a=Object(i.useContext)(v.a.Auth),r=a.updateAuth,u=a.authUser,o=a.uid,c=a.isAuthenticated;return Object(i.useEffect)((function(){Object(m.a)(d.a.mark((function e(){var t,a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!o||o===s.a.get(u,"uid","")){e.next=6;break}return e.next=3,n.query({query:k.a.auth.getUser,variables:{uid:o}});case 3:t=e.sent,a=s.a.get(t,"data.users_by_pk"),r({authUser:a});case 6:r({isAuthenticating:!1});case 7:case"end":return e.stop()}}),e)})))()}),[o]),Object(i.useEffect)((function(){r({signIn:function(){var e=Object(m.a)(d.a.mark((function e(t,n){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.a.auth().signInWithEmailAndPassword(t,n);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),signOut:function(){return p.a.auth().signOut()}}),p.a.auth().onAuthStateChanged(function(){var e=Object(m.a)(d.a.mark((function e(t){var n,a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r({isAuthenticating:!0}),!t){e.next=12;break}return e.next=4,t.getIdToken();case 4:return n=e.sent,e.next=7,t.getIdTokenResult();case 7:a=e.sent,a.claims["https://hasura.io/jwt/claims"]&&r({token:n,uid:t.uid}),e.next=14;break;case 12:r({authUser:{},token:null,uid:""}),r({isAuthenticating:!1});case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}),[]),Object(i.useEffect)((function(){s.a.isEmpty(u)&&!1!==c&&r({isAuthenticated:!1}),s.a.isEmpty(u)||!0===c||r({isAuthenticated:!0})}),[u]),l.a.createElement(l.a.Fragment,null,t&&t)}p.a.initializeApp({apiKey:"AIzaSyD9LoUcLzcnKOSqUKvqb1rTwM1gJU5D_tc",authDomain:"adultletics-admin.firebaseapp.com",databaseURL:"https://adultletics-admin.firebaseio.com",projectId:"adultletics-admin"}),f.propTypes={children:b.a.node};var E=n(96),y=n(209),w=n(322),j=n(592),O=n(121),C=n(90),x=n(589);function B(e){var t=e.children,n=Object(i.useContext)(v.a.Auth).token,a=new j.a({uri:"https://adultletics-hasura.herokuapp.com/v1/graphql",headers:n?{Authorization:"Bearer ".concat(n)}:{}}),r=new w.a({uri:"wss://adultletics-hasura.herokuapp.com/v1/graphql",options:{reconnect:!0,timeout:3e4,connectionParams:n?{headers:{Authorization:"Bearer ".concat(n)}}:{}}}),u=Object(O.d)((function(e){var t=e.query,n=Object(C.l)(t),a=n.kind,r=n.operation;return"OperationDefinition"===a&&"subscription"===r}),r,a),o=new y.c({link:u,cache:new x.a});return l.a.createElement(E.a,{client:o},t)}var S=n(677),A=n(91),$=n(606),D=n(400),q=n(77);var z=n(682),P=n(609),U=n(680),F=n(610),I=n(158);var W=n(116),L=n(611),V=n(401),R=n(612),T=n(607);var Q=n(150);var N=n(617),M=n(613),Z=n(614),H=n(615),J=n(616),K=n(674),Y=new Date;var G=n(618);var X=function(e,t){var n=t.title,a=t.type,r=s.a.map(e,(function(e){return s.a.lowerCase(e)}));return s.a.reduce(r,(function(e,t){return s.a.lowerCase(n).includes(t)||s.a.lowerCase(a).includes(t)?e+1:e}),0)},ee=function(e){var t,n=e.workout,a=e.matchSize,u=e.onSelect,o=e.selected,c=Object(i.useState)(function(e){var t=s.a.get(e,"versions"),n=s.a.map(t,(function(e){var t=e.version_num;return{label:"v".concat(t),value:t}}));return s.a.reduce(n,(function(e,t){return t.value>e?t.value:e}),0)}(n)),d=Object(r.a)(c,2),m=d[0],g=d[1],b=Object(i.useState)(!0),_=Object(r.a)(b,2),p=_[0],h=_[1],v=s.a.get(n,"title"),k=s.a.get(n,"versions"),f=s.a.get(n,"match"),E=s.a.map(k,(function(e){var t=e.version_num;return{label:"v".concat(t),value:t}})),y=s.a.find(k,["version_num",m]),w=s.a.get(y,"id"),j=p?s.a.truncate(s.a.get(y,"body"),{lenght:100}):s.a.get(y,"body");Object(i.useEffect)((function(){o&&u(w)}),[w]),t=o?{color:"white",background:"#B7D4EF"}:f===a?{background:"white"}:{background:"#66788A"};return l.a.createElement(z.a,{display:"flex",flexDirection:"row",minHeight:32,marginBottom:16},l.a.createElement(z.a,{display:"flex"},l.a.createElement(V.a,{onChange:function(e){return g(Number(e.target.value))},defaultValue:m},E&&s.a.map(E,(function(e){var t=e.value,n=e.label;return l.a.createElement("option",{key:t,value:t},n)}))),l.a.createElement(R.a,{icon:p?"expand-all":"collapse-all",iconSize:10,appearance:"minimal",onClick:function(e){e.preventDefault(),h(!p)}})),l.a.createElement(z.a,Object.assign({},t,{elevation:1,display:"flex",flex:1,onClick:function(){u(o?"":w)},paddingLeft:16,paddingRight:16,paddingBottom:p?0:16,paddingTop:p?0:16}),l.a.createElement(z.a,{display:"flex",alignItems:"center"},l.a.createElement(P.a,{size:300,marginRight:16},v)),l.a.createElement(z.a,{flex:1,display:"flex",flexDirection:"column",justifyContent:"center"},j&&s.a.map(j.split("\n"),(function(e,t){return e?l.a.createElement(I.a,{key:t},e):l.a.createElement("br",{key:t})})))))},te=n(686),ne=n(16);var ae={"auth/sign-in":function(){var e=Object(i.useContext)(A.c.Auth),t=e.isAuthenticating,n=e.signIn,a=Object(i.useContext)(A.c.UI).closePanel,u=Object(i.useState)(null),o=Object(r.a)(u,2),s=o[0],c=o[1];return l.a.createElement(q.a,{initialValues:{},onSubmit:function(){var e=Object(m.a)(d.a.mark((function e(t){var r,i;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.email,i=t.password,c(null),e.prev=2,e.next=5,n(r,i);case 5:a(),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(2),console.error(e.t0),c(e.t0.message);case 12:case"end":return e.stop()}}),e,null,[[2,8]])})));return function(t){return e.apply(this,arguments)}}()},(function(e){var n=e.values,a=e.handleChange,r=e.handleSubmit,i=e.isSubmitting;return l.a.createElement("form",null,l.a.createElement($.a,{label:"Email",type:"email",name:"email",onChange:a,autoFocus:!0}),l.a.createElement($.a,{label:"Password",type:"password",name:"password",onChange:a}),l.a.createElement(D.a,{isLoading:t||i,disabled:!n.email||!n.password,onClick:r},"Log In"),s&&l.a.createElement("p",null,s))}))},"drills/add":function(){var e=Object(h.b)(A.b.drills.add,{refetchQueries:[{query:A.b.drills.getAll}],awaitRefetchQueries:!0}),t=Object(r.a)(e,1)[0],n=Object(i.useContext)(A.c.UI).closePanel,a=Object(i.useState)(null),o=Object(r.a)(a,2),c=o[0],g=o[1],b=Object(u.f)();return l.a.createElement(l.a.Fragment,null,l.a.createElement(z.a,{marginBottom:56},l.a.createElement(P.a,{size:600},"Adding a new drill")),l.a.createElement(q.a,{initialValues:{description:""},onSubmit:function(){var e=Object(m.a)(d.a.mark((function e(a){var r,i;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return g(null),e.prev=1,e.next=4,t({variables:{objects:[a]}});case 4:r=e.sent,n(),i=s.a.get(r,"data.insert_drills.returning[0].id"),b.push("/admin/drills/".concat(i)),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(1),console.error(e.t0),g(e.t0.message);case 14:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t){return e.apply(this,arguments)}}()},(function(e){var t=e.values,n=e.dirty,a=e.handleChange,r=e.handleSubmit,i=e.isSubmitting;return l.a.createElement(l.a.Fragment,null,l.a.createElement("form",null,l.a.createElement($.a,{label:"Title",name:"title",onChange:a,autoFocus:!0}),l.a.createElement($.a,{label:"Url to include on weekly workout download",name:"url",value:t.url,placeholder:"https://youtu.be/nPMB8PZE9F8",onChange:a}),l.a.createElement($.a,{label:"Url to include the video in this Admin Portal (see below on how-to find)",name:"embed_url",value:t.embed_url,placeholder:"https://www.youtube-nocookie.com/embed/nPMB8PZE9F8",onChange:a}),l.a.createElement(U.a,{label:"Workout Description",marginBottom:16},l.a.createElement(F.a,{name:"description",onChange:a})),l.a.createElement(D.a,{iconBefore:i?"":"tick",isLoading:i,disabled:!n||!t.title||!t.url,onClick:r},"Add"),c&&l.a.createElement("p",null,c)),l.a.createElement(z.a,{marginTop:24},l.a.createElement(I.a,null,'To find embed URL: go to the YouTube page, click on Share just below the video display, click on Embed in the pop-up, then select "Enable privacy-enhanced mode" and finally copy the quoted part of the text following "src=" in the text to the right, should look something like "https://www.youtube-nocookie.com/embed/nPMB8PZE9F8"')))})))},"drills/edit":function(e){var t=e.props.id,n=Object(h.c)(A.b.drills.getOne,{variables:{id:t}}),a=n.data,u=n.loading,o=Object(h.b)(A.b.drills.update,{refetchQueries:[{query:A.b.drills.getOne,variables:{id:t}}],awaitRefetchQueries:!0}),c=Object(r.a)(o,1)[0],g=Object(i.useContext)(A.c.UI).closePanel,b=Object(i.useState)(null),_=Object(r.a)(b,2),p=_[0],v=_[1];if(u)return null;var k=s.a.get(a,"drills_by_pk"),f=s.a.get(k,"title"),E=s.a.get(k,"url"),y=s.a.get(k,"embed_url"),w=s.a.get(k,"description");return l.a.createElement(l.a.Fragment,null,l.a.createElement(z.a,{marginBottom:56},l.a.createElement(P.a,{size:600},"Editing challenge: ",f)),l.a.createElement(q.a,{initialValues:{title:f,url:E,embed_url:y,description:s.a.isNull(w)?"":w},onSubmit:function(){var e=Object(m.a)(d.a.mark((function e(n){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return v(null),e.prev=1,e.next=4,c({variables:{id:t,data:n}});case 4:g(),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(1),console.error(e.t0),v(e.t0.message);case 11:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(t){return e.apply(this,arguments)}}(),enableReinitialize:!0},(function(e){var t=e.values,n=e.dirty,a=e.handleChange,r=e.handleSubmit,i=e.isSubmitting;return l.a.createElement(l.a.Fragment,null,l.a.createElement("form",null,l.a.createElement($.a,{label:"Title",name:"title",value:t.title,onChange:a,autoFocus:!0}),l.a.createElement($.a,{label:"Url to include on weekly workout download",name:"url",value:t.url,placeholder:"https://youtu.be/nPMB8PZE9F8",onChange:a}),l.a.createElement($.a,{label:"Url to include on this page (see below on how-to find)",name:"embed_url",value:t.embed_url,placeholder:"https://www.youtube-nocookie.com/embed/nPMB8PZE9F8",onChange:a}),l.a.createElement(U.a,{label:"Workout Description",marginBottom:16},l.a.createElement(F.a,{name:"description",onChange:a,value:t.description})),l.a.createElement(D.a,{iconBefore:i?"":"tick",isLoading:i,disabled:!n||!t.title||!t.url,onClick:r},"Update"),p&&l.a.createElement("p",null,p)),l.a.createElement(z.a,{marginTop:24},l.a.createElement(I.a,null,'To find embed URL: go to the YouTube page, click on Share just below the video display, click on Embed in the pop-up, then select "Enable privacy-enhanced mode" and finally copy the quoted part of the text following "src=" in the text to the right, should look something like "https://www.youtube-nocookie.com/embed/nPMB8PZE9F8"')))})))},"daily-challenges/add":function(){var e=Object(h.b)(A.b.dailyChallenges.add,{refetchQueries:[{query:A.b.dailyChallenges.getAll}],awaitRefetchQueries:!0}),t=Object(r.a)(e,1)[0],n=Object(i.useContext)(A.c.UI).closePanel,a=Object(i.useState)(null),o=Object(r.a)(a,2),c=o[0],g=o[1],b=Object(u.f)();return l.a.createElement(l.a.Fragment,null,l.a.createElement(z.a,{marginBottom:56},l.a.createElement(P.a,{size:600},"Adding a new daily challenge")),l.a.createElement(q.a,{initialValues:{description:""},onSubmit:function(){var e=Object(m.a)(d.a.mark((function e(a){var r,i;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return g(null),e.prev=1,e.next=4,t({variables:{objects:[a]}});case 4:r=e.sent,n(),i=s.a.get(r,"data.insert_challenges.returning[0].id"),b.push("/admin/challenges/".concat(i)),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(1),console.error(e.t0),g(e.t0.message);case 14:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t){return e.apply(this,arguments)}}()},(function(e){var t=e.values,n=e.dirty,a=e.handleChange,r=e.handleSubmit,i=e.isSubmitting;return l.a.createElement(l.a.Fragment,null,l.a.createElement("form",null,l.a.createElement($.a,{label:"Title",name:"title",onChange:a,autoFocus:!0}),l.a.createElement(U.a,{label:"Description",marginBottom:16},l.a.createElement(F.a,{name:"description",onChange:a})),l.a.createElement(D.a,{iconBefore:i?"":"tick",isLoading:i,disabled:!n||!t.title||!t.description,onClick:r},"Add"),c&&l.a.createElement("p",null,c)))})))},"daily-challenges/edit":function(e){var t=e.props.id,n=Object(h.c)(A.b.dailyChallenges.getOne,{variables:{id:t}}),a=n.data,u=n.loading,o=Object(h.b)(A.b.dailyChallenges.update,{refetchQueries:[{query:A.b.dailyChallenges.getOne,variables:{id:t}}],awaitRefetchQueries:!0}),c=Object(r.a)(o,1)[0],g=Object(i.useContext)(A.c.UI).closePanel,b=Object(i.useState)(null),_=Object(r.a)(b,2),p=_[0],v=_[1];if(u)return null;var k=s.a.get(a,"daily_challenges_by_pk"),f=s.a.get(k,"title"),E=s.a.get(k,"description","");return l.a.createElement(l.a.Fragment,null,l.a.createElement(z.a,{marginBottom:56},l.a.createElement(P.a,{size:600},"Editing challenge: ",f)),l.a.createElement(q.a,{initialValues:{title:f,description:s.a.isNull(E)?"":E},onSubmit:function(){var e=Object(m.a)(d.a.mark((function e(n){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return v(null),e.prev=1,e.next=4,c({variables:{id:t,data:n}});case 4:g(),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(1),console.error(e.t0),v(e.t0.message);case 11:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(t){return e.apply(this,arguments)}}(),enableReinitialize:!0},(function(e){var t=e.values,n=e.dirty,a=e.handleChange,r=e.handleSubmit,i=e.isSubmitting;return l.a.createElement(l.a.Fragment,null,l.a.createElement("form",null,l.a.createElement($.a,{label:"Title",name:"title",value:t.title,onChange:a,autoFocus:!0}),l.a.createElement(U.a,{label:"Description",marginBottom:16},l.a.createElement(F.a,{name:"description",onChange:a,value:t.description})),l.a.createElement(D.a,{iconBefore:i?"":"tick",isLoading:i,disabled:!n||!t.title||!t.description,onClick:r},"Update"),p&&l.a.createElement("p",null,p)))})))},"workouts/add":function(e){var t=e.props.emit,n=Object(h.c)(A.b.drills.getAll),a=n.data,o=n.loading,c=Object(h.b)(A.b.workouts.addVersion,{refetchQueries:[{query:A.b.workouts.getAll}],awaitRefetchQueries:!0}),g=Object(r.a)(c,1)[0],b=Object(i.useContext)(A.c.Auth).authUser,_=Object(i.useContext)(A.c.UI).closePanel,p=Object(i.useState)(null),v=Object(r.a)(p,2),k=v[0],f=v[1],E=Object(i.useState)([]),y=Object(r.a)(E,2),w=y[0],j=y[1],O=A.d.intensityOptions,C=A.d.workoutTypes,x=Object(u.f)(),B=s.a.get(a,"drills"),S=s.a.filter(B,(function(e){return!s.a.some(w,["id",e.id])}));return o?l.a.createElement(A.a,null):l.a.createElement(l.a.Fragment,null,l.a.createElement(z.a,{marginBottom:56},l.a.createElement(P.a,{size:600},"Adding a new workout")),l.a.createElement(q.a,{initialValues:{running_km:0,running_minutes:0,intensity:"3"},onSubmit:function(){var e=Object(m.a)(d.a.mark((function e(n){var a,r,i,l,u,o,c,m,p;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.title,r=n.body,i=n.stats,l=n.intensity,u=n.type,f(null),e.prev=2,o=s.a.map(w,(function(e){return{_drill:e.id}})),e.next=6,g({variables:{objects:[{version_num:1,_owner:b.id,body:r,workout:{data:{title:a,type:u,intensity:l}},stats:{data:i||{}},drills:{data:o}}]}});case 6:c=e.sent,_(),m=s.a.get(c,"data.insert_workouts_versions.returning[0].id"),p=s.a.get(c,"data.insert_workouts_versions.returning[0].workout.id"),t&&t(m),t||x.push("/admin/workouts/".concat(p)),e.next=18;break;case 14:e.prev=14,e.t0=e.catch(2),console.error(e.t0),f(e.t0.message);case 18:case"end":return e.stop()}}),e,null,[[2,14]])})));return function(t){return e.apply(this,arguments)}}()},(function(e){var t=e.values,n=e.dirty,a=e.handleChange,r=e.handleSubmit,i=e.isSubmitting,u=e.setFieldValue;return l.a.createElement(l.a.Fragment,null,l.a.createElement("form",null,l.a.createElement($.a,{label:"Workout Title",name:"title",onChange:a,autoFocus:!0}),l.a.createElement(U.a,{label:"Workout Intensity",onChange:function(e){return u("intensity",e.target.value)},marginBottom:16},l.a.createElement(z.a,{display:"flex",flexDirection:"row",justifyContent:"space-between"},s.a.map(O,(function(e){var n=e.label,a=e.value;return l.a.createElement(L.a,{key:a,name:"intensity",value:a,label:n,checked:a===t.intensity})})))),l.a.createElement(U.a,{label:"Workout Type",marginBottom:16},l.a.createElement(V.a,{name:"type",value:t.type,onChange:a,height:32},l.a.createElement("option",{key:"empty",value:""},"Please select an option..."),C&&s.a.map(C,(function(e){var t=e.value,n=e.label;return l.a.createElement("option",{key:t,value:t},n)})))),l.a.createElement(U.a,{label:"Add Drills to Workout",marginBottom:16},l.a.createElement(z.a,{marginBottom:8,display:"flex",justifyContent:"space-between"},l.a.createElement(V.a,{name:"drill",value:t.drill,onChange:a,height:32},l.a.createElement("option",{key:"empty",value:""},"Please select an option..."),S&&s.a.map(S,(function(e){var t=e.id,n=e.title;return l.a.createElement("option",{key:t,value:t},n)}))),l.a.createElement(D.a,{iconBefore:"tick",disabled:!t.drill,onClick:function(e){e.preventDefault(),j([].concat(Object(W.a)(w),[s.a.find(B,["id",t.drill])]))},marginRight:8,marginLeft:8},"Attach drill")),l.a.createElement(z.a,null,k&&l.a.createElement("p",null,k))),l.a.createElement(U.a,{label:"Selected Drills",marginBottom:16},l.a.createElement(z.a,null,s.a.isEmpty(w)?l.a.createElement(T.a,{marginBottom:16},"No drills selected"):s.a.map(w,(function(e){var t=e.id,n=e.title;return l.a.createElement(z.a,{display:"flex",flexDirection:"row",elevation:1,height:32,alignItems:"center",background:"white",marginBottom:16,key:t,paddingLeft:16,paddingRight:8},l.a.createElement(I.a,{flex:1},n),l.a.createElement(R.a,{icon:"small-cross",intent:"danger",appearance:"minimal",onClick:function(e){e.preventDefault(),j(s.a.filter(w,(function(e){return e.id!==t})))}}))})))),l.a.createElement(U.a,{label:"Workout Description",marginBottom:16},l.a.createElement(F.a,{name:"body",onChange:a,rows:24})),l.a.createElement(U.a,{label:"Stats",marginBottom:16},l.a.createElement("table",{className:"stats-input-table"},l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("th",null),l.a.createElement("th",{colSpan:2},l.a.createElement(P.a,{size:200},"5/10km")),l.a.createElement("th",{colSpan:2},l.a.createElement(P.a,{size:200},"half/ultra")))),l.a.createElement("tbody",null,l.a.createElement("tr",null,l.a.createElement("td",null,l.a.createElement(P.a,{size:200},"Beginner")),l.a.createElement("td",null,l.a.createElement($.a,{label:"km",name:"stats.running_km_beginner_short",type:"number",onChange:a})),l.a.createElement("td",null,l.a.createElement($.a,{label:"mins",name:"stats.running_minutes_beginner_short",type:"number",onChange:a})),l.a.createElement("td",null,l.a.createElement($.a,{label:"km",name:"stats.running_km_beginner_long",type:"number",onChange:a})),l.a.createElement("td",null,l.a.createElement($.a,{label:"mins",name:"stats.running_minutes_beginner_long",type:"number",onChange:a}))),l.a.createElement("tr",null,l.a.createElement("td",null,l.a.createElement(P.a,{size:200},"Intermediate")),l.a.createElement("td",null,l.a.createElement($.a,{label:"km",name:"stats.running_km_intermediate_short",type:"number",onChange:a})),l.a.createElement("td",null,l.a.createElement($.a,{label:"mins",name:"stats.running_minutes_intermediate_short",type:"number",onChange:a})),l.a.createElement("td",null,l.a.createElement($.a,{label:"km",name:"stats.running_km_intermediate_long",type:"number",onChange:a})),l.a.createElement("td",null,l.a.createElement($.a,{label:"mins",name:"stats.running_minutes_intermediate_long",type:"number",onChange:a}))),l.a.createElement("tr",null,l.a.createElement("td",null,l.a.createElement(P.a,{size:200},"Advanced")),l.a.createElement("td",null,l.a.createElement($.a,{label:"km",name:"stats.running_km_advanced_short",type:"number",onChange:a})),l.a.createElement("td",null,l.a.createElement($.a,{label:"mins",name:"stats.running_minutes_advanced_short",type:"number",onChange:a})),l.a.createElement("td",null,l.a.createElement($.a,{label:"km",name:"stats.running_km_advanced_long",type:"number",onChange:a})),l.a.createElement("td",null,l.a.createElement($.a,{label:"mins",name:"stats.running_minutes_advanced_long",type:"number",onChange:a})))))),l.a.createElement(D.a,{iconBefore:i?"":"tick",isLoading:i,disabled:!n||!t.title,onClick:r},"Add"),k&&l.a.createElement("p",null,k)))})))},"workouts/add-version":function(e){var t=e.props,n=t.id,u=t.workoutId,o=t.emit,c=Object(h.c)(A.b.workouts.getOne,{variables:{id:u}}),g=c.data,b=c.loading,_=Object(h.c)(A.b.drills.getAll),p=_.data,v=_.loading,k=Object(h.c)(A.b.workouts.getVersion,{variables:{id:n}}),f=k.data,E=k.loading,y=Object(h.b)(A.b.workouts.addVersion),w=Object(r.a)(y,1)[0],j=Object(i.useState)([]),O=Object(r.a)(j,2),C=O[0],x=O[1],B=Object(i.useContext)(A.c.UI).closePanel,S=Object(i.useContext)(A.c.Auth).authUser,L=Object(i.useState)(null),Q=Object(r.a)(L,2),N=Q[0],M=Q[1],Z=s.a.get(f,"workouts_versions_by_pk");if(Object(i.useEffect)((function(){return x(s.a.map(s.a.get(Z,"drills",[]),"drill"))}),[Z]),E||b||v)return l.a.createElement(A.a,null);var H=s.a.reduce(s.a.get(g,"workouts_by_pk.versions"),(function(e,t){return t.version_num>e?t.version_num:e}),0)+1,J={body:s.a.get(Z,"body"),running_km:s.a.get(Z,"stats.running_km",0),running_minutes:s.a.get(Z,"stats.running_minutes",0)},K=s.a.get(p,"drills"),Y=s.a.filter(K,(function(e){return!s.a.some(C,["id",e.id])}));return l.a.createElement(l.a.Fragment,null,l.a.createElement(z.a,{marginBottom:56},l.a.createElement(P.a,{size:600},"Adding a new version of workout: ",s.a.get(Z,"workout.title",""))),l.a.createElement(q.a,{initialValues:Object(a.a)({},J),onSubmit:function(){var e=Object(m.a)(d.a.mark((function e(t){var n,a,r,i,l;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.body,a=t.stats,M(null),e.prev=2,r=s.a.map(C,(function(e){return{_drill:e.id}})),e.next=6,w({variables:{objects:[{body:n,version_num:H,_workout:u,_owner:S.id,stats:{data:a||{}},drills:{data:r}}]}});case 6:i=e.sent,B(),l=s.a.get(i,"data.insert_workouts_versions.returning[0].id"),o&&o(l),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(2),console.error(e.t0),M(e.t0.message);case 16:case"end":return e.stop()}}),e,null,[[2,12]])})));return function(t){return e.apply(this,arguments)}}()},(function(e){var t=e.values,n=e.dirty,a=e.handleChange,r=e.handleSubmit,i=e.isSubmitting;return l.a.createElement(l.a.Fragment,null,l.a.createElement("form",null,l.a.createElement(U.a,{label:"Workout Description",marginBottom:8},l.a.createElement(F.a,{name:"body",value:t.body,onChange:a,rows:24})),l.a.createElement(U.a,{label:"Add Drills",marginBottom:16},l.a.createElement(z.a,{marginBottom:8,display:"flex",justifyContent:"space-between"},l.a.createElement(V.a,{name:"drill",value:t.drill,onChange:a,height:32},l.a.createElement("option",{key:"empty",value:""},"Please select an option..."),Y&&s.a.map(Y,(function(e){var t=e.id,n=e.title;return l.a.createElement("option",{key:t,value:t},n)}))),l.a.createElement(D.a,{iconBefore:"tick",disabled:!t.drill,onClick:function(e){e.preventDefault(),x([].concat(Object(W.a)(C),[s.a.find(K,["id",t.drill])]))},marginRight:8,marginLeft:8},"Attach drill")),l.a.createElement(z.a,null,N&&l.a.createElement("p",null,N))),l.a.createElement(U.a,{label:"Selected drills",marginBottom:16},l.a.createElement(z.a,null,s.a.isEmpty(C)?l.a.createElement(T.a,{marginBottom:16},"No drills selected"):s.a.map(C,(function(e){var t=e.id,n=e.title;return l.a.createElement(z.a,{display:"flex",flexDirection:"row",elevation:1,height:32,alignItems:"center",background:"white",marginBottom:16,key:t,paddingLeft:16,paddingRight:8},l.a.createElement(I.a,{flex:1},n),l.a.createElement(R.a,{icon:"small-cross",intent:"danger",appearance:"minimal",onClick:function(e){e.preventDefault(),x(s.a.filter(C,(function(e){return e.id!==t})))}}))})))),l.a.createElement(U.a,{label:"Stats",marginBottom:16},l.a.createElement("table",{className:"stats-input-table"},l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("th",null),l.a.createElement("th",{colSpan:2},l.a.createElement(P.a,{size:200},"5/10km")),l.a.createElement("th",{colSpan:2},l.a.createElement(P.a,{size:200},"half/ultra")))),l.a.createElement("tbody",null,l.a.createElement("tr",null,l.a.createElement("td",null,l.a.createElement(P.a,{size:200},"Beginner")),l.a.createElement("td",null,l.a.createElement($.a,{label:"km",name:"stats.running_km_beginner_short",type:"number",onChange:a})),l.a.createElement("td",null,l.a.createElement($.a,{label:"mins",name:"stats.running_minutes_beginner_short",type:"number",onChange:a})),l.a.createElement("td",null,l.a.createElement($.a,{label:"km",name:"stats.running_km_beginner_long",type:"number",onChange:a})),l.a.createElement("td",null,l.a.createElement($.a,{label:"mins",name:"stats.running_minutes_beginner_long",type:"number",onChange:a}))),l.a.createElement("tr",null,l.a.createElement("td",null,l.a.createElement(P.a,{size:200},"Intermediate")),l.a.createElement("td",null,l.a.createElement($.a,{label:"km",name:"stats.running_km_intermediate_short",type:"number",onChange:a})),l.a.createElement("td",null,l.a.createElement($.a,{label:"mins",name:"stats.running_minutes_intermediate_short",type:"number",onChange:a})),l.a.createElement("td",null,l.a.createElement($.a,{label:"km",name:"stats.running_km_intermediate_long",type:"number",onChange:a})),l.a.createElement("td",null,l.a.createElement($.a,{label:"mins",name:"stats.running_minutes_intermediate_long",type:"number",onChange:a}))),l.a.createElement("tr",null,l.a.createElement("td",null,l.a.createElement(P.a,{size:200},"Advanced")),l.a.createElement("td",null,l.a.createElement($.a,{label:"km",name:"stats.running_km_advanced_short",type:"number",onChange:a})),l.a.createElement("td",null,l.a.createElement($.a,{label:"mins",name:"stats.running_minutes_advanced_short",type:"number",onChange:a})),l.a.createElement("td",null,l.a.createElement($.a,{label:"km",name:"stats.running_km_advanced_long",type:"number",onChange:a})),l.a.createElement("td",null,l.a.createElement($.a,{label:"mins",name:"stats.running_minutes_advanced_long",type:"number",onChange:a})))))),l.a.createElement(D.a,{iconBefore:i?"":"tick",isLoading:i,disabled:!n,onClick:r},"Add"),N&&l.a.createElement("p",null,N)))})))},"workouts/edit":function(e){var t=e.props.id,n=Object(h.c)(A.b.workouts.getVersion,{variables:{id:t}}),u=n.data,o=n.loading,c=Object(h.c)(A.b.drills.getAll),g=c.data,b=c.loading,_=Object(h.b)(A.b.workouts.updateVersion,{refetchQueries:[{query:A.b.workouts.getVersion,variables:{id:t}}],awaitRefetchQueries:!0}),p=Object(r.a)(_,1)[0],v=Object(h.b)(A.b.workouts.addDrill,{refetchQueries:[{query:A.b.workouts.getVersion,variables:{id:t}}],awaitRefetchQueries:!0}),k=Object(r.a)(v,2),f=k[0],E=k[1].addDrillsLoading,y=Object(h.b)(A.b.workouts.removeDrill,{refetchQueries:[{query:A.b.workouts.getVersion,variables:{id:t}}],awaitRefetchQueries:!0}),w=Object(r.a)(y,1)[0],j=Object(i.useContext)(A.c.UI).closePanel,O=Object(i.useState)(null),C=Object(r.a)(O,2),x=C[0],B=C[1],S=A.d.intensityOptions,W=A.d.workoutTypes;if(o||b)return l.a.createElement(A.a,null);var N=s.a.get(u,"workouts_versions_by_pk"),M={body:s.a.get(N,"body"),title:s.a.get(N,"workout.title",""),stats:s.a.reduce(s.a.get(N,"stats",{}),(function(e,t,n){return Object(a.a)({},e,Object(Q.a)({},n,s.a.isNull(t)?"":t))}),{}),intensity:s.a.get(N,"workout.intensity","3"),type:s.a.get(N,"workout.type","")},Z=s.a.get(N,"drills",[]),H=s.a.map(Z,(function(e){return Object(a.a)({workoutsDrillId:e.id},e.drill)})),J=s.a.get(g,"drills"),K=s.a.filter(J,(function(e){return!s.a.some(H,["id",e.id])}));return l.a.createElement(l.a.Fragment,null,l.a.createElement(z.a,{marginBottom:56},l.a.createElement(P.a,{size:600},"Editing version ",s.a.get(N,"version_num")," of workout: ",s.a.get(N,"workout.title",""))),l.a.createElement(q.a,{initialValues:Object(a.a)({},M),onSubmit:function(){var e=Object(m.a)(d.a.mark((function e(n){var r,i,l,u,o,c;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.title,i=n.body,l=n.stats,u=n.type,o=n.intensity,B(null),e.prev=2,c=s.a.reduce(l,(function(e,t,n){return"id"===n||"__typename"===n?e:Object(a.a)({},e,Object(Q.a)({},n,""===t?null:t))}),{}),e.next=6,p({variables:{version_id:t,workout_id:s.a.get(N,"workout.id"),stats_id:s.a.get(N,"stats.id"),body:i,workout_data:{title:r,type:u,intensity:o},stats_data:c}});case 6:j(),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(2),console.error(e.t0),B(e.t0.message);case 13:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(t){return e.apply(this,arguments)}}()},(function(e){var t=e.values,n=e.dirty,a=e.handleChange,r=e.handleSubmit,i=e.isSubmitting,u=e.setFieldValue;return l.a.createElement(l.a.Fragment,null,l.a.createElement("form",null,l.a.createElement($.a,{label:"Workout Title (effects all versions)",name:"title",value:t.title,onChange:a,autoFocus:!0}),l.a.createElement(U.a,{label:"Workout Intensity (effects all versions)",onChange:function(e){return u("intensity",e.target.value)},marginBottom:16},l.a.createElement(z.a,{display:"flex",flexDirection:"row",justifyContent:"space-between"},s.a.map(S,(function(e){var n=e.label,a=e.value;return l.a.createElement(L.a,{key:a,name:"intensity",value:a,label:n,checked:a===t.intensity})})))),l.a.createElement(U.a,{label:"Workout Type (effects all versions)",marginBottom:16},l.a.createElement(V.a,{name:"type",value:t.type,onChange:a,height:32},l.a.createElement("option",{key:"empty",value:""},"Please select an option..."),W&&s.a.map(W,(function(e){var t=e.value,n=e.label;return l.a.createElement("option",{key:t,value:t},n)})))),l.a.createElement(U.a,{label:"Add Drills",marginBottom:16},l.a.createElement(z.a,{marginBottom:8,display:"flex",justifyContent:"space-between"},l.a.createElement(V.a,{name:"drill",value:t.drill,onChange:a,height:32},l.a.createElement("option",{key:"empty",value:""},"Please select an option..."),K&&s.a.map(K,(function(e){var t=e.id,n=e.title;return l.a.createElement("option",{key:t,value:t},n)}))),l.a.createElement(D.a,{iconBefore:E?"":"tick",isLoading:E,disabled:!t.drill,onClick:function(e){e.preventDefault(),f({variables:{objects:[{_drill:t.drill,_workouts_version:s.a.get(N,"id")}]}})},marginRight:8,marginLeft:8},"Attach drill")),l.a.createElement(z.a,null,x&&l.a.createElement("p",null,x))),l.a.createElement(U.a,{label:"Selected drills",marginBottom:16},l.a.createElement(z.a,null,s.a.isEmpty(H)?l.a.createElement(T.a,{marginBottom:16},"No drills selected"):s.a.map(H,(function(e){var t=e.id,n=e.title,a=e.workoutsDrillId;return l.a.createElement(z.a,{display:"flex",flexDirection:"row",elevation:1,height:32,alignItems:"center",background:"white",marginBottom:16,key:t,paddingLeft:16,paddingRight:8},l.a.createElement(I.a,{flex:1},n),l.a.createElement(R.a,{icon:"small-cross",intent:"danger",appearance:"minimal",onClick:function(e){e.preventDefault(),w({variables:{id:a}})}}))})))),l.a.createElement(U.a,{label:"Workout Description",marginBottom:16},l.a.createElement(F.a,{name:"body",value:t.body,onChange:a,rows:24})),l.a.createElement(U.a,{label:"Stats",marginBottom:16},l.a.createElement("table",{className:"stats-input-table"},l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("th",null),l.a.createElement("th",{colSpan:2},l.a.createElement(P.a,{size:200},"5/10km")),l.a.createElement("th",{colSpan:2},l.a.createElement(P.a,{size:200},"half/ultra")))),l.a.createElement("tbody",null,l.a.createElement("tr",null,l.a.createElement("td",null,l.a.createElement(P.a,{size:200},"Beginner")),l.a.createElement("td",null,l.a.createElement($.a,{label:"km",name:"stats.running_km_beginner_short",value:t.stats.running_km_beginner_short,type:"number",onChange:a})),l.a.createElement("td",null,l.a.createElement($.a,{label:"mins",name:"stats.running_minutes_beginner_short",value:t.stats.running_minutes_beginner_short,type:"number",onChange:a})),l.a.createElement("td",null,l.a.createElement($.a,{label:"km",name:"stats.running_km_beginner_long",value:t.stats.running_km_beginner_long,type:"number",onChange:a})),l.a.createElement("td",null,l.a.createElement($.a,{label:"mins",name:"stats.running_minutes_beginner_long",value:t.stats.running_minutes_beginner_long,type:"number",onChange:a}))),l.a.createElement("tr",null,l.a.createElement("td",null,l.a.createElement(P.a,{size:200},"Intermediate")),l.a.createElement("td",null,l.a.createElement($.a,{label:"km",name:"stats.running_km_intermediate_short",value:t.stats.running_km_intermediate_short,type:"number",onChange:a})),l.a.createElement("td",null,l.a.createElement($.a,{label:"mins",name:"stats.running_minutes_intermediate_short",value:t.stats.running_minutes_intermediate_short,type:"number",onChange:a})),l.a.createElement("td",null,l.a.createElement($.a,{label:"km",name:"stats.running_km_intermediate_long",value:t.stats.running_km_intermediate_long,type:"number",onChange:a})),l.a.createElement("td",null,l.a.createElement($.a,{label:"mins",name:"stats.running_minutes_intermediate_long",value:t.stats.running_minutes_intermediate_long,type:"number",onChange:a}))),l.a.createElement("tr",null,l.a.createElement("td",null,l.a.createElement(P.a,{size:200},"Advanced")),l.a.createElement("td",null,l.a.createElement($.a,{label:"km",name:"stats.running_km_advanced_short",value:t.stats.running_km_advanced_short,type:"number",onChange:a})),l.a.createElement("td",null,l.a.createElement($.a,{label:"mins",name:"stats.running_minutes_advanced_short",value:t.stats.running_minutes_advanced_short,type:"number",onChange:a})),l.a.createElement("td",null,l.a.createElement($.a,{label:"km",name:"stats.running_km_advanced_long",value:t.stats.running_km_advanced_long,type:"number",onChange:a})),l.a.createElement("td",null,l.a.createElement($.a,{label:"mins",name:"stats.running_minutes_advanced_long",value:t.stats.running_minutes_advanced_long,type:"number",onChange:a})))))),l.a.createElement(D.a,{iconBefore:i?"":"tick",isLoading:i,disabled:!n,onClick:r},"Update"),x&&l.a.createElement("p",null,x)))})))},"weeks/add":function(){var e=Object(h.c)(A.b.days.getAll),t=e.data,n=e.loading,a=Object(h.c)(A.b.weeks.getAll),o=a.data,c=a.loading,g=Object(h.b)(A.b.weeks.add,{refetchQueries:[{query:A.b.weeks.getAll}],awaitRefetchQueries:!0}),b=Object(r.a)(g,1)[0],_=Object(i.useContext)(A.c.Auth).authUser,p=Object(i.useContext)(A.c.UI).closePanel,v=Object(i.useState)(null),k=Object(r.a)(v,2),f=k[0],E=k[1],y=Object(u.f)();if(n||c)return null;var w=s.a.map(s.a.get(o,"weeks"),(function(e){var t=e.week_start;return Object(M.a)(Object(Z.a)(t))})),j=s.a.map(s.a.range(7,29,7),(function(e){var t=Object(H.a)(Object(J.a)(Y,{weekStartsOn:1}),e);return{value:Object(M.a)(t),label:"Week starting: ".concat(Object(K.a)(t,"do MMMM")),disabled:w.includes(Object(M.a)(t))}}));return l.a.createElement(l.a.Fragment,null,l.a.createElement(z.a,{marginBottom:56},l.a.createElement(P.a,{size:600},"Adding a new week")),l.a.createElement(q.a,{initialValues:{},onSubmit:function(){var e=Object(m.a)(d.a.mark((function e(n){var a,r,i;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.week_start,E(null),e.prev=2,e.next=5,b({variables:{objects:[{_owner:_.id,title:s.a.get(s.a.find(j,["value",a]),"label"),week_start:a,days:{data:s.a.map(s.a.get(t,"days"),(function(e){return{_day:e.id}}))}}]}});case 5:r=e.sent,p(),i=s.a.get(r,"data.insert_weeks.returning[0].id"),y.push("/admin/weeks/".concat(i)),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(2),console.error(e.t0),E(e.t0.message);case 15:case"end":return e.stop()}}),e,null,[[2,11]])})));return function(t){return e.apply(this,arguments)}}()},(function(e){var t=e.values,n=e.dirty,a=e.handleChange,r=e.handleSubmit,i=e.isSubmitting;return l.a.createElement(l.a.Fragment,null,l.a.createElement("form",null,l.a.createElement(N.a,{label:"Please choose which upcoming week to create",name:"week_start",value:t.type,onChange:a,height:40},l.a.createElement("option",{key:"empty",value:""},"Please select an option..."),j&&s.a.map(j,(function(e){var t=e.value,n=e.label,a=e.disabled;return l.a.createElement("option",{key:t,value:t,disabled:a},n)}))),l.a.createElement(D.a,{iconBefore:i?"":"tick",isLoading:i,disabled:!n||!t.week_start,onClick:r},"Add"),f&&l.a.createElement("p",null,f)))})))},"weeks/update-workout":function(e){var t=e.props,n=t.id,u=t.title,o=Object(h.c)(A.b.workouts.getAll),c=o.data,g=o.loading,b=Object(h.b)(A.b.weeks.updateWeekday),_=Object(r.a)(b,1)[0],p=Object(i.useContext)(A.c.UI),v=p.closePanel,k=p.openPanel,f=Object(i.useState)(null),E=Object(r.a)(f,2),y=E[0],w=E[1],j=Object(i.useState)(""),O=Object(r.a)(j,2),C=O[0],x=O[1],B=Object(i.useState)(""),S=Object(r.a)(B,2),$=S[0],U=S[1],F=Object(i.useState)(""),I=Object(r.a)(F,2),W=I[0],L=I[1],V=s.a.get(c,"workouts"),R=s.a.find(V,(function(e){var t=e.versions;return s.a.some(t,["id",W])})),T=s.a.get(R,"id");Object(i.useEffect)((function(){return U(s.a.orderBy(s.a.map(V,(function(e){return Object(a.a)({},e,{match:X(C,e)})})),["match"],["desc"]))}),[C,V]);var Q=function(){var e=Object(m.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),w(null),e.prev=2,e.next=5,_({variables:{id:n,data:{_workouts_version:null}}});case 5:v(),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(2),console.error(e.t0),w(e.t0.message);case 12:case"end":return e.stop()}}),e,null,[[2,8]])})));return function(t){return e.apply(this,arguments)}}();return g?l.a.createElement(A.a,null):l.a.createElement(l.a.Fragment,null,l.a.createElement(z.a,{marginBottom:56,display:"flex",justifyContent:"space-between"},l.a.createElement(P.a,{size:600},"Updating Workout for ",u),l.a.createElement(D.a,{marginLeft:8,iconBefore:"plus",onClick:function(){v(),setTimeout((function(){return k({panel:"workouts/add",size:"wide",props:{emit:function(){var e=Object(m.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,_({variables:{id:n,data:{_workouts_version:t}}});case 3:v(),e.next=10;break;case 6:e.prev=6,e.t0=e.catch(0),console.error(e.t0),w(e.t0.message);case 10:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}()}})}),200)}},"Create workout")),l.a.createElement(q.a,{initialValues:{},onSubmit:Object(m.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return w(null),e.prev=1,e.next=4,_({variables:{id:n,data:{_workouts_version:W}}});case 4:v(),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(1),console.error(e.t0),w(e.t0.message);case 11:case"end":return e.stop()}}),e,null,[[1,7]])})))},(function(e){var t=e.handleSubmit,n=e.isSubmitting;return l.a.createElement(l.a.Fragment,null,l.a.createElement("form",null,l.a.createElement(z.a,{marginBottom:48},l.a.createElement(G.a,{placeholder:"Filter available workouts on title and type",width:"100%",onChange:function(e){return x(e.target.value.split(" "))}})),l.a.createElement(z.a,{marginBottom:32},!s.a.isEmpty($)&&s.a.map($,(function(e){return l.a.createElement(ee,{key:e.id,workout:e,matchSize:s.a.size(C),onSelect:L,selected:e.id===T})}))),l.a.createElement(z.a,{display:"flex",justifyContent:"space-between"},l.a.createElement(D.a,{type:"submit",iconBefore:n?"":"tick",isLoading:n,disabled:!W,onClick:t},"Add / Update Workout"),l.a.createElement(D.a,{iconBefore:n?"":"cross",intent:"danger",isLoading:n,onClick:Q},"Clear Day"),y&&l.a.createElement("p",null,y))))})))},"weeks/view-workout-version":function(e){var t=e.props.id,n=A.d.intensityOptions,a=A.d.workoutTypes,r=Object(h.c)(A.b.workouts.getVersion,{variables:{id:t}}),i=r.data;if(r.loading)return l.a.createElement(A.a,null);var u=s.a.get(i,"workouts_versions_by_pk"),o=s.a.get(u,"version_num"),c=s.a.get(u,"body"),d=s.a.map(s.a.get(u,"drills",[]),"drill"),m=s.a.get(u,"workout"),g=s.a.get(m,"title"),b=s.a.get(m,"type"),_=s.a.get(m,"intensity"),p=s.a.get(s.a.find(n,["value",_]),"label",""),v=s.a.get(s.a.find(a,["value",b]),"label","");return l.a.createElement(l.a.Fragment,null,l.a.createElement(z.a,{marginBottom:32,display:"flex",flexDirection:"row",alignItems:"center"},l.a.createElement(z.a,{marginRight:16},l.a.createElement(P.a,{size:600},g," - version ",o)),l.a.createElement(z.a,{flex:1},l.a.createElement(te.a,{marginRight:8,color:"blue"},v),l.a.createElement(te.a,{color:"blue"},p))),l.a.createElement(z.a,{background:"white",padding:32,marginBottom:32,elevation:1},l.a.createElement(P.a,{marginBottom:16,size:200},"Description:"),c&&s.a.map(c.split("\n"),(function(e,t){return e?l.a.createElement(T.a,{key:t},e):l.a.createElement("br",{key:t})}))),l.a.createElement(z.a,{marginBottom:32},l.a.createElement(P.a,{size:200,marginBottom:16},"Drills:"),s.a.isEmpty(d)?l.a.createElement(T.a,null,"No attached drills"):s.a.map(d,(function(e){var t=e.id,n=e.title;return l.a.createElement(ne.b,{to:"/drills/".concat(t),key:t,style:{marginBottom:"24px"}},l.a.createElement(z.a,{display:"flex",elevation:1,height:48,alignItems:"center",background:"white",marginBottom:16},l.a.createElement(I.a,{marginLeft:24},n)))}))))}},re={wide:930,normal:620};function ie(){var e=Object(i.useContext)(A.c.UI),t=e.panel,n=e.closePanel,a=!s.a.isEmpty(t),r=ae[s.a.get(t,"panel",!1)],u=s.a.get(t,"props",{}),o=re[s.a.get(t,"size","normal")];return l.a.createElement(l.a.Fragment,null,l.a.createElement(S.a,{isShown:a,onCloseComplete:n,preventBodyScrolling:!0,width:o},l.a.createElement("div",{className:"v-panel"},a&&r&&l.a.createElement(r,{props:u}))))}var le=Object(i.lazy)((function(){return Promise.all([n.e(2),n.e(6)]).then(n.bind(null,676))}));function ue(){var e=v.a.Auth,t=v.a.UI,n=Object(i.useState)({authUser:{},token:"",uid:"",isAuthenticating:!0,isAuthenticated:!1,updateAuth:function(e){return d((function(t){return Object(a.a)({},t,{},e)}))},signIn:function(){},signOut:function(){}}),o=Object(r.a)(n,2),c=o[0],d=o[1],m=Object(i.useState)({panel:{},openPanel:function(e){return _((function(t){return Object(a.a)({},t,{panel:e})}))},closePanel:function(){return _((function(e){return Object(a.a)({},e,{panel:{}})}))},breakpoint:oe(),setBreakpoint:function(e){return _((function(t){return Object(a.a)({},t,{breakpoint:e})}))}}),g=Object(r.a)(m,2),b=g[0],_=g[1],p=b.setBreakpoint;return Object(i.useEffect)((function(){return window.addEventListener("resize",s.a.debounce((function(){return p(oe())}),1e3))}),[p]),l.a.createElement(e.Provider,{value:c},l.a.createElement(t.Provider,{value:b},l.a.createElement(B,null,l.a.createElement(f,null,l.a.createElement(ie,null),l.a.createElement(z.a,{background:"tint1",minHeight:"100vh"},l.a.createElement("div",{className:"v-router"},l.a.createElement(u.c,null,l.a.createElement(u.a,{path:"/admin",component:le}))))))))}var oe=function(){var e=window.innerWidth;return e<=640?"small":e<=1008?"medium":"large"}},83:function(e,t,n){"use strict";var a=n(0),r=Object(a.createContext)({authUser:{},token:"",uid:"",isAuthenticating:!1,isAuthenticated:!1,updateAuth:function(){},signIn:function(){},signOut:function(){}}),i=Object(a.createContext)({panel:{},openPanel:function(){},closePanel:function(){},breakpoint:"",setBreakpoint:function(){}});t.a={Auth:r,UI:i}},91:function(e,t,n){"use strict";n(332);var a=n(106);n.d(t,"b",(function(){return a.a}));var r=n(83);n.d(t,"c",(function(){return r.a}));var i=n(107);n.d(t,"a",(function(){return i.a}));var l=n(124);n.d(t,"d",(function(){return l.a}))}}]);
//# sourceMappingURL=5.fc1758e0.chunk.js.map