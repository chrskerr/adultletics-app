(this["webpackJsonpadultletics-admin"]=this["webpackJsonpadultletics-admin"]||[]).push([[0],{150:function(e,t,n){e.exports=n(268)},155:function(e,t,n){},268:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),i=n(67),l=(n(155),n(48)),o=n(24),u=n(25),c=n.n(u),s=n(30),d=n(4),m=n.n(d),g=n(75),p=n.n(g),b=(n(160),n(6)),f=n.n(b),k=n(18);function h(e){var t=e.children,n=Object(k.a)(),i=Object(a.useContext)(We.Auth),l=i.updateAuth,o=i.authUser,u=i.uid,d=i.isAuthenticated;return Object(a.useEffect)((function(){u&&u!==f.a.get(o,"uid","")&&Object(s.a)(c.a.mark((function e(){var t,a;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.query({query:Pe.auth.getUser,variables:{uid:u}});case 2:t=e.sent,a=f.a.get(t,"data.users_by_pk"),l({authUser:a});case 5:case"end":return e.stop()}}),e)})))()}),[u]),Object(a.useEffect)((function(){l({signIn:function(){var e=Object(s.a)(c.a.mark((function e(t,n){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.a.auth().signInWithEmailAndPassword(t,n);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),signOut:function(){return p.a.auth().signOut()}}),p.a.auth().onAuthStateChanged(function(){var e=Object(s.a)(c.a.mark((function e(t){var n,a;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(l({isAuthenticating:!0}),!t){e.next=12;break}return e.next=4,t.getIdToken();case 4:return n=e.sent,e.next=7,t.getIdTokenResult();case 7:a=e.sent,a.claims["https://hasura.io/jwt/claims"]&&l({token:n,uid:t.uid}),e.next=13;break;case 12:l({authUser:{},token:null,uid:""});case 13:l({isAuthenticating:!1});case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}),[]),Object(a.useEffect)((function(){f.a.isEmpty(o)&&!1!==d&&l({isAuthenticated:!1}),f.a.isEmpty(o)||!0===d||l({isAuthenticated:!0})}),[o]),r.a.createElement(r.a.Fragment,null,t&&t)}p.a.initializeApp({apiKey:"AIzaSyD9LoUcLzcnKOSqUKvqb1rTwM1gJU5D_tc",authDomain:"adultletics-admin.firebaseapp.com",databaseURL:"https://adultletics-admin.firebaseio.com",projectId:"adultletics-admin"}),h.propTypes={children:m.a.node};var v=n(40),E=n(63),w=n(281);function y(){var e=We.UI,t=We.Auth,n=Object(a.useState)({panel:{},openPanel:function(e){return c((function(t){return Object(l.a)({},t,{panel:e})}))},closePanel:function(){return c((function(e){return Object(l.a)({},e,{panel:{}})}))},notifications:[{}],addNotification:function(){}}),i=Object(o.a)(n,2),u=i[0],c=i[1],s=Object(a.useContext)(t).isAuthenticated;return r.a.createElement(r.a.Fragment,null,r.a.createElement(e.Provider,{value:u},r.a.createElement(v.a,null,r.a.createElement(le,null),r.a.createElement(w.a,{background:"tint1",minHeight:"100vh"},r.a.createElement(se,null),r.a.createElement("div",{className:"v-router"},s&&r.a.createElement(E.c,null,r.a.createElement(E.a,{path:"/drills/:id?"},r.a.createElement(tt,null)),r.a.createElement(E.a,{path:"/workouts/:id?"},r.a.createElement(Te,null)),r.a.createElement(E.a,{path:"/weeks/:id?"},r.a.createElement(Je,null)),r.a.createElement(E.a,{path:"/"},r.a.createElement(Re,null))))))))}var _=n(42),j=n(64),O=n(135),x=n(143),C=n(44),A=n(7),B=n(142);function S(e){var t=e.children,n=Object(a.useContext)(We.Auth).token,i=new x.a({uri:"https://adultletics-hasura.herokuapp.com/v1/graphql",headers:n?{Authorization:"Bearer ".concat(n)}:{}}),l=new O.a({uri:"wss://adultletics-hasura.herokuapp.com/v1/graphql",options:{reconnect:!0,connectionParams:n?{headers:{Authorization:"Bearer ".concat(n)}}:{}}}),o=Object(C.d)((function(e){var t=e.query,n=Object(A.l)(t),a=n.kind,r=n.operation;return"OperationDefinition"===a&&"subscription"===r}),l,i),u=new j.c({link:o,cache:new B.a});return r.a.createElement(_.a,{client:u},t)}function I(){var e=We.Auth,t=Object(a.useState)({authUser:{},token:"",uid:"",isAuthenticating:!1,isAuthenticated:!1,updateAuth:function(e){return u((function(t){return Object(l.a)({},t,{},e)}))},signIn:function(){},signOut:function(){}}),n=Object(o.a)(t,2),i=n[0],u=n[1];return r.a.createElement("div",{className:"App"},r.a.createElement(e.Provider,{value:i},r.a.createElement(S,null,r.a.createElement(h,null,r.a.createElement(y,null)))))}var $=n(297),D=n(282),P=n(138),W=n(36);var F=n(65),U=n.n(F),q=n(83),R=n(69),L=n(94),z=n(284),V=n(37);var T=n(285),M=n(286),Q=n(109);var N=n(287),H=n(283);var K=n(291),Z=n(288),G=n(298),J=n(289),Y=n(290),X=n(299),ee=new Date;var te=n(292);var ne=function(e,t){var n=t.title,a=t.type,r=f.a.map(e,(function(e){return f.a.lowerCase(e)}));return f.a.reduce(r,(function(e,t){return f.a.lowerCase(n).includes(t)||f.a.lowerCase(a).includes(t)?e+1:e}),0)},ae=function(e){var t,n=e.workout,i=e.matchSize,l=e.onSelect,u=e.selected,c=Object(a.useState)(!1),s=Object(o.a)(c,2),d=s[0],m=s[1],g=Object(a.useState)(!0),p=Object(o.a)(g,2),b=p[0],k=p[1],h=f.a.get(n,"title"),v=f.a.get(n,"versions"),E=f.a.get(n,"match"),y=f.a.map(v,(function(e){var t=e.version_num;return{label:"v".concat(t),value:t}})),_=f.a.find(v,["version_num",d]),j=f.a.get(_,"id"),O=b?f.a.truncate(f.a.get(_,"body"),{lenght:100}):f.a.get(_,"body");Object(a.useEffect)((function(){d||m(f.a.reduce(y,(function(e,t){return t.value>e?t.value:e}),0))}),[y,d]),Object(a.useEffect)((function(){u&&l(j)}),[u,j]),t=u?{color:"white",background:"#B7D4EF"}:E===i?{background:"white"}:{background:"#66788A"};return d?r.a.createElement(w.a,Object.assign({display:"flex",flexDirection:"row",elevation:1,height:32,alignItems:"center",marginBottom:16,paddingLeft:16,paddingRight:8},t),r.a.createElement(w.a,{flex:1,onClick:function(){return l(j)},display:"flex",alignItems:"center",marginRight:8},r.a.createElement(T.a,Object.assign({size:200},t,{marginRight:16}),h),r.a.createElement(V.a,{flex:1},O)),r.a.createElement(w.a,{display:"flex",alignItems:"center"},r.a.createElement(N.a,{icon:"small-plus",appearance:"minimal",onClick:function(e){e.preventDefault(),k(!b)},marginRight:8}),r.a.createElement(Q.a,{onChange:function(e){return m(Number(e.target.value))},defaultValue:d},y&&f.a.map(y,(function(e){var t=e.value,n=e.label;return r.a.createElement("option",{key:t,value:t},n)}))))):null},re={"auth/sign-in":function(){var e=Object(a.useContext)(We.Auth),t=e.isAuthenticating,n=e.signIn,i=Object(a.useContext)(We.UI).closePanel,l=Object(a.useState)(null),u=Object(o.a)(l,2),d=u[0],m=u[1];return r.a.createElement(W.a,{initialValues:{},onSubmit:function(){var e=Object(s.a)(c.a.mark((function e(t){var a,r;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.email,r=t.password,m(null),e.prev=2,e.next=5,n(a,r);case 5:i(),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(2),console.error(e.t0),m(e.t0.message);case 12:case"end":return e.stop()}}),e,null,[[2,8]])})));return function(t){return e.apply(this,arguments)}}()},(function(e){var n=e.values,a=e.handleChange,i=e.handleSubmit,l=e.isSubmitting;return r.a.createElement("form",null,r.a.createElement(D.a,{label:"Email",type:"email",name:"email",onChange:a,autoFocus:!0}),r.a.createElement(D.a,{label:"Password",type:"password",name:"password",onChange:a}),r.a.createElement(P.a,{isLoading:t||l,disabled:!n.email||!n.password,onClick:i},"Log In"),d&&r.a.createElement("p",null,d))}))},"drills/add":function(){var e=Object(k.b)(Pe.drills.add,{refetchQueries:[{query:Pe.drills.getAll}],awaitRefetchQueries:!0}),t=Object(R.a)(e,1)[0],n=Object(a.useContext)(We.UI).closePanel,i=Object(a.useState)(null),l=Object(R.a)(i,2),o=l[0],u=l[1];return r.a.createElement(W.a,{initialValues:{description:""},onSubmit:function(){var e=Object(q.a)(U.a.mark((function e(a){return U.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u(null),e.prev=1,e.next=4,t({variables:{objects:[a]}});case 4:n(),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(1),console.error(e.t0),u(e.t0.message);case 11:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(t){return e.apply(this,arguments)}}()},(function(e){var t=e.values,n=e.dirty,a=e.handleChange,i=e.handleSubmit,l=e.isSubmitting;return r.a.createElement(r.a.Fragment,null,r.a.createElement("form",null,r.a.createElement(D.a,{label:"Title",name:"title",onChange:a,autoFocus:!0}),r.a.createElement(D.a,{label:"Url to include on weekly workout download",name:"url",value:t.url,placeholder:"https://youtu.be/nPMB8PZE9F8",onChange:a}),r.a.createElement(D.a,{label:"Url to include the video in this Admin Portal (see below on how-to find)",name:"embed_url",value:t.embed_url,placeholder:"https://www.youtube-nocookie.com/embed/nPMB8PZE9F8",onChange:a}),r.a.createElement(L.a,{label:"Workout Description",marginBottom:16},r.a.createElement(z.a,{name:"description",onChange:a})),r.a.createElement(P.a,{iconBefore:l?"":"tick",isLoading:l,disabled:!n||!t.title||!t.url,onClick:i},"Add"),o&&r.a.createElement("p",null,o)),r.a.createElement(w.a,{marginTop:24},r.a.createElement(V.a,null,'To find embed URL: go to the YouTube page, click on Share just below the video display, click on Embed in the pop-up, then select "Enable privacy-enhanced mode" and finally copy the quoted part of the text following "src=" in the text to the right, should look something like "https://www.youtube-nocookie.com/embed/nPMB8PZE9F8"')))}))},"drills/edit":function(e){var t=e.props.id,n=Object(k.c)(Pe.drills.getOne,{variables:{id:t}}),i=n.data,l=n.loading,o=Object(k.b)(Pe.drills.update,{refetchQueries:[{query:Pe.drills.getOne,variables:{id:t}}],awaitRefetchQueries:!0}),u=Object(R.a)(o,1)[0],c=Object(a.useContext)(We.UI).closePanel,s=Object(a.useState)(null),d=Object(R.a)(s,2),m=d[0],g=d[1];if(l)return null;var p=f.a.get(i,"drills_by_pk"),b=f.a.get(p,"title"),h=f.a.get(p,"url"),v=f.a.get(p,"embed_url"),E=f.a.get(p,"description");return r.a.createElement(W.a,{initialValues:{title:b,url:h,embed_url:v,description:f.a.isNull(E)?"":E},onSubmit:function(){var e=Object(q.a)(U.a.mark((function e(n){return U.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return g(null),e.prev=1,e.next=4,u({variables:{id:t,data:n}});case 4:c(),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(1),console.error(e.t0),g(e.t0.message);case 11:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(t){return e.apply(this,arguments)}}(),enableReinitialize:!0},(function(e){var t=e.values,n=e.dirty,a=e.handleChange,i=e.handleSubmit,l=e.isSubmitting;return r.a.createElement(r.a.Fragment,null,r.a.createElement("form",null,r.a.createElement(D.a,{label:"Title",name:"title",value:t.title,onChange:a,autoFocus:!0}),r.a.createElement(D.a,{label:"Url to include on weekly workout download",name:"url",value:t.url,placeholder:"https://youtu.be/nPMB8PZE9F8",onChange:a}),r.a.createElement(D.a,{label:"Url to include on this page (see below on how-to find)",name:"embed_url",value:t.embed_url,placeholder:"https://www.youtube-nocookie.com/embed/nPMB8PZE9F8",onChange:a}),r.a.createElement(L.a,{label:"Workout Description",marginBottom:16},r.a.createElement(z.a,{name:"description",onChange:a,value:t.description})),r.a.createElement(P.a,{iconBefore:l?"":"tick",isLoading:l,disabled:!n||!t.title||!t.url,onClick:i},"Update"),m&&r.a.createElement("p",null,m)),r.a.createElement(w.a,{marginTop:24},r.a.createElement(V.a,null,'To find embed URL: go to the YouTube page, click on Share just below the video display, click on Embed in the pop-up, then select "Enable privacy-enhanced mode" and finally copy the quoted part of the text following "src=" in the text to the right, should look something like "https://www.youtube-nocookie.com/embed/nPMB8PZE9F8"')))}))},"workouts/add":function(e){var t=e.props.emit,n=Object(k.b)(Pe.workouts.addVersion,{refetchQueries:[{query:Pe.workouts.getAll}],awaitRefetchQueries:!0}),i=Object(o.a)(n,1)[0],l=Object(a.useContext)(We.Auth).authUser,u=Object(a.useContext)(We.UI).closePanel,d=Object(a.useState)(null),m=Object(o.a)(d,2),g=m[0],p=m[1],b=qe.intensityOptions,h=qe.workoutTypes,v=Object(E.f)();return r.a.createElement(r.a.Fragment,null,r.a.createElement(w.a,{marginBottom:56},r.a.createElement(T.a,{size:600},"Adding a new workout")),r.a.createElement(W.a,{initialValues:{running_km:0,running_minutes:0,intensity:"3"},onSubmit:function(){var e=Object(s.a)(c.a.mark((function e(n){var a,r,o,s,d,m,g,b;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.title,r=n.body,o=n.running_km,s=n.running_minutes,d=n.intensity,m=n.type,p(null),e.prev=2,e.next=5,i({variables:{objects:[{version_num:1,_owner:l.id,body:r,workout:{data:{title:a,type:m,intensity:d}},stats:{data:{running_km:o,running_minutes:s}}}]}});case 5:g=e.sent,u(),b=f.a.get(g,"data.insert_workouts_versions.returning[0].id"),t&&t(b),v.push("/workouts/".concat(b)),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(2),console.error(e.t0),p(e.t0.message);case 16:case"end":return e.stop()}}),e,null,[[2,12]])})));return function(t){return e.apply(this,arguments)}}()},(function(e){var t=e.values,n=e.dirty,a=e.handleChange,i=e.handleSubmit,l=e.isSubmitting,o=e.setFieldValue;return r.a.createElement(r.a.Fragment,null,r.a.createElement("form",null,r.a.createElement(D.a,{label:"Workout Title",name:"title",onChange:a,autoFocus:!0}),r.a.createElement(L.a,{label:"Workout Intensity",onChange:function(e){return o("intensity",e.target.value)},marginBottom:16},r.a.createElement(w.a,{display:"flex",flexDirection:"row",justifyContent:"space-between"},f.a.map(b,(function(e){var n=e.label,a=e.value;return r.a.createElement(M.a,{key:a,name:"intensity",value:a,label:n,checked:a===t.intensity})})))),r.a.createElement(L.a,{label:"Workout Type",marginBottom:16},r.a.createElement(Q.a,{name:"type",value:t.type,onChange:a,height:32},r.a.createElement("option",{key:"empty",value:""},"Please select an option..."),h&&f.a.map(h,(function(e){var t=e.value,n=e.label;return r.a.createElement("option",{key:t,value:t},n)})))),r.a.createElement(L.a,{label:"Workout Description",marginBottom:16},r.a.createElement(z.a,{name:"body",onChange:a,rows:24})),r.a.createElement(D.a,{label:"Total Running KM",name:"running_km",type:"number",onChange:a}),r.a.createElement(D.a,{label:"Total Running Minutes",name:"running_minutes",type:"number",onChange:a}),r.a.createElement(P.a,{iconBefore:l?"":"tick",isLoading:l,disabled:!n||!t.title,onClick:i},"Add"),g&&r.a.createElement("p",null,g)))})))},"workouts/add-version":function(e){var t=e.props,n=t.id,i=t.workoutId,u=t.emit,d=Object(k.c)(Pe.workouts.getOne,{variables:{id:i}}),m=d.data,g=d.loading,p=Object(k.c)(Pe.workouts.getVersion,{variables:{id:n}}),b=p.data,h=p.loading,v=Object(k.b)(Pe.workouts.addVersion,{refetchQueries:[{query:Pe.workouts.getOne,variables:{id:i}}],awaitRefetchQueries:!0}),E=Object(o.a)(v,1)[0],y=Object(a.useContext)(We.UI).closePanel,_=Object(a.useContext)(We.Auth).authUser,j=Object(a.useState)(null),O=Object(o.a)(j,2),x=O[0],C=O[1];if(h||g)return null;var A=f.a.get(b,"workouts_versions_by_pk"),B=f.a.reduce(f.a.get(m,"workouts_by_pk.versions"),(function(e,t){return t.version_num>e?t.version_num:e}),0)+1,S={body:f.a.get(A,"body"),running_km:f.a.get(A,"stats.running_km",0),running_minutes:f.a.get(A,"stats.running_minutes",0)};return r.a.createElement(r.a.Fragment,null,r.a.createElement(w.a,{marginBottom:56},r.a.createElement(T.a,{size:600},"Adding a new version of workout: ",f.a.get(A,"workout.title",""))),r.a.createElement(W.a,{initialValues:Object(l.a)({},S),onSubmit:function(){var e=Object(s.a)(c.a.mark((function e(t){var n,a,r,l,o;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.body,a=t.running_km,r=t.running_minutes,C(null),e.prev=2,e.next=5,E({variables:{objects:[{body:n,version_num:B,_workout:i,_owner:_.id,stats:{data:{running_km:a,running_minutes:r}}}]}});case 5:l=e.sent,y(),o=f.a.get(l,"data.insert_workouts_versions.returning[0].id"),u&&u(o),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(2),console.error(e.t0),C(e.t0.message);case 15:case"end":return e.stop()}}),e,null,[[2,11]])})));return function(t){return e.apply(this,arguments)}}()},(function(e){var t=e.values,n=e.dirty,a=e.handleChange,i=e.handleSubmit,l=e.isSubmitting;return r.a.createElement(r.a.Fragment,null,r.a.createElement("form",null,r.a.createElement(L.a,{label:"Workout Description",marginBottom:8},r.a.createElement(z.a,{name:"body",value:t.body,onChange:a,rows:24})),r.a.createElement(D.a,{label:"Total Running KM",name:"running_km",type:"number",value:t.running_km,onChange:a}),r.a.createElement(D.a,{label:"Total Running Minutes",name:"running_minutes",type:"number",value:t.running_minutes,onChange:a}),r.a.createElement(P.a,{iconBefore:l?"":"tick",isLoading:l,disabled:!n,onClick:i},"Add"),x&&r.a.createElement("p",null,x)))})))},"workouts/edit":function(e){var t=e.props.id,n=Object(k.c)(Pe.workouts.getVersion,{variables:{id:t}}),i=n.data,u=n.loading,d=Object(k.b)(Pe.workouts.updateVersion,{refetchQueries:[{query:Pe.workouts.getVersion,variables:{id:t}}],awaitRefetchQueries:!0}),m=Object(o.a)(d,1)[0],g=Object(a.useContext)(We.UI).closePanel,p=Object(a.useState)(null),b=Object(o.a)(p,2),h=b[0],v=b[1],E=qe.intensityOptions,y=qe.workoutTypes;if(u)return null;var _=f.a.get(i,"workouts_versions_by_pk"),j={body:f.a.get(_,"body"),title:f.a.get(_,"workout.title",""),running_km:f.a.get(_,"stats.running_km",0),running_minutes:f.a.get(_,"stats.running_minutes",0),intensity:f.a.get(_,"workout.intensity","3"),type:f.a.get(_,"workout.type","")};return r.a.createElement(r.a.Fragment,null,r.a.createElement(w.a,{marginBottom:56},r.a.createElement(T.a,{size:600},"Editing version ",f.a.get(_,"version_num")," of workout: ",f.a.get(_,"workout.title",""))),r.a.createElement(W.a,{initialValues:Object(l.a)({},j),onSubmit:function(){var e=Object(s.a)(c.a.mark((function e(n){var a,r,i,l,o,u;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.title,r=n.body,i=n.running_km,l=n.running_minutes,o=n.type,u=n.intensity,v(null),e.prev=2,e.next=5,m({variables:{version_id:t,workout_id:f.a.get(_,"workout.id"),stats_id:f.a.get(_,"stats.id"),body:r,workout_data:{title:a,type:o,intensity:u},stats_data:{running_minutes:l,running_km:i}}});case 5:g(),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(2),console.error(e.t0),v(e.t0.message);case 12:case"end":return e.stop()}}),e,null,[[2,8]])})));return function(t){return e.apply(this,arguments)}}()},(function(e){var t=e.values,n=e.dirty,a=e.handleChange,i=e.handleSubmit,l=e.isSubmitting,o=e.setFieldValue;return r.a.createElement(r.a.Fragment,null,r.a.createElement("form",null,r.a.createElement(D.a,{label:"Workout Title (effects all versions)",name:"title",value:t.title,onChange:a,autoFocus:!0}),r.a.createElement(L.a,{label:"Workout Intensity (effects all versions)",onChange:function(e){return o("intensity",e.target.value)},marginBottom:16},r.a.createElement(w.a,{display:"flex",flexDirection:"row",justifyContent:"space-between"},f.a.map(E,(function(e){var n=e.label,a=e.value;return r.a.createElement(M.a,{key:a,name:"intensity",value:a,label:n,checked:a===t.intensity})})))),r.a.createElement(L.a,{label:"Workout Type (effects all versions)",marginBottom:16},r.a.createElement(Q.a,{name:"type",value:t.type,onChange:a,height:32},r.a.createElement("option",{key:"empty",value:""},"Please select an option..."),y&&f.a.map(y,(function(e){var t=e.value,n=e.label;return r.a.createElement("option",{key:t,value:t},n)})))),r.a.createElement(L.a,{label:"Workout Description",marginBottom:16},r.a.createElement(z.a,{name:"body",value:t.body,onChange:a,rows:24})),r.a.createElement(D.a,{label:"Total Running KM",name:"running_km",type:"number",value:t.running_km,onChange:a}),r.a.createElement(D.a,{label:"Total Running Minutes",name:"running_minutes",type:"number",value:t.running_minutes,onChange:a}),r.a.createElement(P.a,{iconBefore:l?"":"tick",isLoading:l,disabled:!n,onClick:i},"Update"),h&&r.a.createElement("p",null,h)))})))},"workouts/edit-drills":function(e){var t=e.props.id,n=Object(k.c)(Pe.workouts.getVersion,{variables:{id:t}}),i=n.data,u=n.loading,d=Object(k.c)(Pe.drills.getAll),m=d.data,g=d.loading,p=Object(k.b)(Pe.workouts.addDrill,{refetchQueries:[{query:Pe.workouts.getVersion,variables:{id:t}}],awaitRefetchQueries:!0}),b=Object(o.a)(p,1)[0],h=Object(k.b)(Pe.workouts.removeDrill,{refetchQueries:[{query:Pe.workouts.getVersion,variables:{id:t}}],awaitRefetchQueries:!0}),v=Object(o.a)(h,1)[0],E=Object(a.useState)(null),y=Object(o.a)(E,2),_=y[0],j=y[1];if(u||g)return null;var O=f.a.get(i,"workouts_versions_by_pk"),x=f.a.get(O,"drills",[]),C=f.a.map(x,(function(e){return Object(l.a)({workoutsDrillId:e.id},e.drill)})),A=f.a.get(m,"drills"),B=f.a.filter(A,(function(e){return!f.a.some(C,["id",e.id])}));return r.a.createElement(r.a.Fragment,null,r.a.createElement(w.a,{marginBottom:56},r.a.createElement(T.a,{size:600},"Editing Drills for Version ",f.a.get(O,"version_num")," of workout: ",f.a.get(O,"workout.title",""))),r.a.createElement(w.a,{display:"flex",flexDirection:"row"},r.a.createElement(w.a,{width:"50%"},r.a.createElement(W.a,{initialValues:{},onSubmit:function(){var e=Object(s.a)(c.a.mark((function e(t){var n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.drill,j(null),e.prev=2,e.next=5,b({variables:{objects:[{_drill:n,_workouts_version:f.a.get(O,"id")}]}});case 5:e.next=11;break;case 7:e.prev=7,e.t0=e.catch(2),console.error(e.t0),j(e.t0.message);case 11:case"end":return e.stop()}}),e,null,[[2,7]])})));return function(t){return e.apply(this,arguments)}}()},(function(e){var t=e.values,n=e.dirty,a=e.handleChange,i=e.handleSubmit,l=e.isSubmitting;return r.a.createElement(r.a.Fragment,null,r.a.createElement("form",null,r.a.createElement(w.a,{marginBottom:16},r.a.createElement(T.a,null,"Add Drills to Workout:")),r.a.createElement(w.a,{marginBottom:8,display:"flex",justifyContent:"space-between"},r.a.createElement(Q.a,{name:"drill",value:t.drill,onChange:a,height:32},r.a.createElement("option",{key:"empty",value:""},"Please select an option..."),B&&f.a.map(B,(function(e){var t=e.id,n=e.title;return r.a.createElement("option",{key:t,value:t},n)}))),r.a.createElement(P.a,{iconBefore:l?"":"tick",isLoading:l,disabled:!n,onClick:i},"Add")),r.a.createElement(w.a,null,_&&r.a.createElement("p",null,_))))}))),r.a.createElement(w.a,{width:"50%"},r.a.createElement(w.a,{marginBottom:16},r.a.createElement(T.a,null,"Selected drills:")),r.a.createElement(w.a,null,f.a.isEmpty(C)?r.a.createElement(H.a,null,"No drills selected"):f.a.map(C,(function(e){var t=e.id,n=e.title,a=e.workoutsDrillId;return r.a.createElement(w.a,{display:"flex",flexDirection:"row",elevation:1,height:32,alignItems:"center",background:"white",marginBottom:16,key:t,paddingLeft:16,paddingRight:8},r.a.createElement(V.a,{flex:1},n),r.a.createElement(N.a,{icon:"small-cross",intent:"danger",appearance:"minimal",onClick:function(){return v({variables:{id:a}})}}))}))))))},"weeks/add":function(){var e=Object(k.c)(Pe.days.getAll),t=e.data,n=e.loading,i=Object(k.c)(Pe.weeks.getAll),l=i.data,u=i.loading,d=Object(k.b)(Pe.weeks.add,{refetchQueries:[{query:Pe.weeks.getAll}],awaitRefetchQueries:!0}),m=Object(o.a)(d,1)[0],g=Object(a.useContext)(We.Auth).authUser,p=Object(a.useContext)(We.UI).closePanel,b=Object(a.useState)(null),h=Object(o.a)(b,2),v=h[0],y=h[1],_=Object(E.f)();if(n||u)return null;var j=f.a.map(f.a.get(l,"weeks"),(function(e){var t=e.week_start;return Object(Z.a)(Object(G.a)(t,"yyyy-MM-dd",ee))})),O=f.a.map([7,14,21,28],(function(e){var t=Object(J.a)(Object(Y.a)(ee,{weekStartsOn:1}),e);return{value:Object(Z.a)(t),label:"Week starting: ".concat(Object(X.a)(t,"do MMMM")),disabled:j.includes(Object(Z.a)(t))}}));return r.a.createElement(r.a.Fragment,null,r.a.createElement(w.a,{marginBottom:56},r.a.createElement(T.a,{size:600},"Adding a new week")),r.a.createElement(W.a,{initialValues:{},onSubmit:function(){var e=Object(s.a)(c.a.mark((function e(n){var a,r,i;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.week_start,y(null),e.prev=2,e.next=5,m({variables:{objects:[{_owner:g.id,title:f.a.get(f.a.find(O,["value",a]),"label"),week_start:a,days:{data:f.a.map(f.a.get(t,"days"),(function(e){return{_day:e.id}}))}}]}});case 5:r=e.sent,p(),i=f.a.get(r,"data.insert_weeks.returning[0].id"),_.push("/weeks/".concat(i)),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(2),console.error(e.t0),y(e.t0.message);case 15:case"end":return e.stop()}}),e,null,[[2,11]])})));return function(t){return e.apply(this,arguments)}}()},(function(e){var t=e.values,n=e.dirty,a=e.handleChange,i=e.handleSubmit,l=e.isSubmitting;return r.a.createElement(r.a.Fragment,null,r.a.createElement("form",null,r.a.createElement(K.a,{label:"Please choose which upcoming week to create",name:"week_start",value:t.type,onChange:a,height:40},r.a.createElement("option",{key:"empty",value:""},"Please select an option..."),O&&f.a.map(O,(function(e){var t=e.value,n=e.label,a=e.disabled;return r.a.createElement("option",{key:t,value:t,disabled:a},n)}))),r.a.createElement(P.a,{iconBefore:l?"":"tick",isLoading:l,disabled:!n||!t.week_start,onClick:i},"Add"),v&&r.a.createElement("p",null,v)))})))},"weeks/update-workout":function(e){var t=e.props,n=t.id,i=t.title,u=Object(k.c)(Pe.workouts.getAll),d=u.data,m=u.loading,g=Object(k.b)(Pe.weeks.updateWeekday),p=Object(o.a)(g,1)[0],b=Object(a.useContext)(We.UI).closePanel,h=Object(a.useState)(null),v=Object(o.a)(h,2),E=v[0],y=v[1],_=Object(a.useState)(""),j=Object(o.a)(_,2),O=j[0],x=j[1],C=Object(a.useState)(""),A=Object(o.a)(C,2),B=A[0],S=A[1],I=Object(a.useState)(""),$=Object(o.a)(I,2),D=$[0],F=$[1],U=f.a.get(d,"workouts"),q=f.a.find(U,(function(e){var t=e.versions;return f.a.some(t,["id",D])})),R=f.a.get(q,"id");return Object(a.useEffect)((function(){return S(f.a.orderBy(f.a.map(U,(function(e){return Object(l.a)({},e,{match:ne(O,e)})}))),["match","desc"])}),[O,U]),m?null:r.a.createElement(r.a.Fragment,null,r.a.createElement(w.a,{marginBottom:56},r.a.createElement(T.a,{size:600},"Updating Workout for ",i)),r.a.createElement(W.a,{initialValues:{},onSubmit:Object(s.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return y(null),e.prev=1,e.next=4,p({variables:{id:n,data:{_workouts_version:D}}});case 4:b(),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(1),console.error(e.t0),y(e.t0.message);case 11:case"end":return e.stop()}}),e,null,[[1,7]])})))},(function(e){var t=e.handleSubmit,n=e.isSubmitting;return r.a.createElement(r.a.Fragment,null,r.a.createElement("form",null,r.a.createElement(w.a,{marginBottom:48},r.a.createElement(te.a,{placeholder:"Filter available workouts on title and type",width:"100%",onChange:function(e){return x(e.target.value.split(" "))}})),r.a.createElement(w.a,{marginBottom:32},!f.a.isEmpty(B)&&f.a.map(B,(function(e){return r.a.createElement(ae,{key:e.id,workout:e,matchSize:f.a.size(O),onSelect:F,selected:e.id===R})}))),r.a.createElement(P.a,{iconBefore:n?"":"tick",isLoading:n,disabled:!D,onClick:t},"Add"),E&&r.a.createElement("p",null,E)))})))}},ie={wide:930,normal:620};function le(){var e=Object(a.useContext)(We.UI),t=e.panel,n=e.closePanel,i=!f.a.isEmpty(t),l=re[f.a.get(t,"panel",!1)],o=f.a.get(t,"props",{}),u=ie[f.a.get(t,"size","normal")];return r.a.createElement(r.a.Fragment,null,r.a.createElement($.a,{isShown:i,onCloseComplete:n,preventBodyScrolling:!0,width:u},r.a.createElement("div",{className:"v-panel"},i&&l&&r.a.createElement(l,{props:o}))))}var oe=n(293),ue=n(294),ce=n(300);function se(){var e=Object(E.f)(),t=Object(E.g)().pathname,n=Object(a.useContext)(We.UI).openPanel,i=Object(a.useContext)(We.Auth),l=i.isAuthenticated,o=i.authUser,u=i.signOut;return r.a.createElement("div",{className:"c-top-nav"},r.a.createElement(w.a,{display:"flex",height:78,alignItems:"center"},r.a.createElement(w.a,{alignItems:"center",justifyContent:"center",marginLeft:24},r.a.createElement(T.a,{size:200},"Adultletics Admin Panel")),r.a.createElement(w.a,{display:"flex",flex:1,justifyContent:"space-between",paddingLeft:16},r.a.createElement(w.a,{alignItems:"center"},r.a.createElement(oe.a,{alignItems:"center"},f.a.map([{name:"Home",route:"/"},{name:"Workouts",route:"/workouts"},{name:"Weeks",route:"/weeks"},{name:"Drills",route:"/drills"}],(function(n){var a=n.name,i=n.route;return r.a.createElement(ue.a,{key:i,id:i,onSelect:function(){return e.push(i)},isSelected:"/"===i?t===i:t.startsWith(i),"aria-controls":"panel-".concat(a),height:40},a)})))),r.a.createElement(w.a,{display:"flex",alignItems:"center",paddingRight:16},l?r.a.createElement(P.a,{isLoading:f.a.isEmpty(o),marginRight:16,onClick:u},"Log Out"):r.a.createElement(P.a,{marginRight:16,onClick:function(){return n({panel:"auth/sign-in"})}},"Log In"),r.a.createElement(ce.a,{name:o.first_name,size:40})))))}var de=n(31),me=n(32),ge=n.n(me);function pe(){var e=Object(de.a)(["\n    query getAllDays {\n        days {\n            id title  uid\n        }\n    }\n"]);return pe=function(){return e},e}function be(){var e=Object(de.a)(["\n    mutation updateWeeksDays ( $objects: [weeks_insert_input!]! ) {\n        insert_weeks( objects: $objects ) {\n            returning { id }\n        }\n    }\n"]);return be=function(){return e},e}function fe(){var e=Object(de.a)(["\n    mutation updateWeeksDays ( $id: uuid!, $data: weeks_days_set_input! ) {\n        update_weeks_days( where: { id: { _eq: $id }}, _set: $data ) {\n            returning { id }\n        }\n    }\n"]);return fe=function(){return e},e}function ke(){var e=Object(de.a)(["\n    mutation updateWeek ( $id: uuid!, $data: weeks_set_input! ) {\n        update_weeks( where: { id: { _eq: $id }}, _set: $data ) {\n            returning { id }\n        }\n    }\n"]);return ke=function(){return e},e}function he(){var e=Object(de.a)(["\n    subscription weekSubscription ( $id: uuid! ) {\n        weeks( where: { id: { _eq: $id }}) {\n            created_at id week_start\n            title updated_at\n            days ( order_by: { _day: asc }) {\n                id\n                day { id title uid }\n                workout {\n                    body id\n                    version_num\n                    drills {\n                        id\n                        drill {\n                            description\n                            id title url\n                        }\n                    }\n                    workout {\n                        id intensity\n                        title type\n                    }\n                    stats {\n                        id running_km\n                        running_minutes\n                    }\n                }\n            }\n        }\n    }\n"]);return he=function(){return e},e}function ve(){var e=Object(de.a)(["\n    query getAllWeeks {\n        weeks ( order_by: { week_start: desc }) {\n            id title updated_at week_start\n        }\n    }\n"]);return ve=function(){return e},e}function Ee(){var e=Object(de.a)(["\n    mutation deleteWorkout ( $id: uuid! ) {\n        delete_workouts_drills( where: { workouts_version: { id: { _eq: $id }}}) {\n            returning { id }\n        }\n        delete_workouts_versions( where: { id: { _eq: $id }}) {\n            returning { id }\n        }\n        delete_workouts_stats( where: { workouts_version: { id: { _eq: $id }}}) {\n            returning { id }\n        }\n    }\n"]);return Ee=function(){return e},e}function we(){var e=Object(de.a)(["\n    mutation deleteWorkout ( $id: uuid! ) {\n        delete_workouts_drills( where: { workouts_version: { workout: { id: { _eq: $id }}}}) {\n            returning { id }\n        }\n        delete_workouts_versions( where: { workout: { id: { _eq: $id }}}) {\n            returning { id }\n        }\n        delete_workouts_stats( where: { workouts_version: { workout: { id: { _eq: $id }}}}) {\n            returning { id }\n        }\n        delete_workouts( where: { id: { _eq: $id }}) {\n            returning { id }\n        }\n    }\n"]);return we=function(){return e},e}function ye(){var e=Object(de.a)(["\n\tmutation deleteWorkoutsDrills ( $id: uuid! ) {\n\t\tdelete_workouts_drills( where: { id: { _eq: $id }}) {\n\t\t\treturning { id }\n\t\t}\n\t}\n"]);return ye=function(){return e},e}function _e(){var e=Object(de.a)(["\n\tmutation insertWorkoutsDrills ( $objects: [workouts_drills_insert_input!]! ) {\n\t\tinsert_workouts_drills( objects: $objects ) {\n\t\t\treturning { id }\n\t\t}\n\t}\n"]);return _e=function(){return e},e}function je(){var e=Object(de.a)(["\n\tmutation updateWorkoutVersion ( $version_id: uuid!, $stats_id: uuid!, $workout_id: uuid!, $body: String!, $workout_data: workouts_set_input!, $stats_data: workouts_stats_set_input! ) {\n\t\tupdate_workouts_versions( where: { id: { _eq: $version_id }}, _set: { body: $body }) {\n\t\t\treturning { id }\n\t\t}\n\t\tupdate_workouts_stats( where: { id: { _eq: $stats_id }}, _set: $stats_data ) {\n\t\t\treturning { id }\n\t\t}\n\t\tupdate_workouts( where: { id: { _eq: $workout_id }}, _set: $workout_data ) {\n\t\t\treturning { id }\n\t\t}\n\t}\n"]);return je=function(){return e},e}function Oe(){var e=Object(de.a)(["\n\tmutation insertWorkoutVersion ( $objects: [workouts_versions_insert_input!]! ) {\n\t\tinsert_workouts_versions ( objects: $objects ) {\n\t\t\treturning { id }\n\t\t}\n\t}\n"]);return Oe=function(){return e},e}function xe(){var e=Object(de.a)(["\n\tquery getWorkout ( $id: uuid! ) {\n\t\tworkouts_versions_by_pk ( id: $id ) {\n\t\t\tid body\n\t\t\tversion_num\n\t\t\towner {\n\t\t\t\tfirst_name\n\t\t\t}\n\t\t\tdrills {\n\t\t\t\tid\n\t\t\t\tdrill {\n\t\t\t\t\ttitle id\n\t\t\t\t}\n\t\t\t}\n\t\t\tstats {\n\t\t\t\tid\n\t\t\t\trunning_km\n\t\t\t\trunning_minutes\n\t\t\t}\n\t\t\tworkout {\n\t\t\t\tid title type\n                intensity\n\t\t\t}\n\t\t}\n\t}\n"]);return xe=function(){return e},e}function Ce(){var e=Object(de.a)(["\n\tquery getWorkout ( $id: uuid! ) {\n\t\tworkouts_by_pk( id: $id ) {\n\t\t\tid title type\n            intensity\n\t\t\tversions ( order_by: { version_num: asc } ){\n\t\t\t\tid body\n\t\t\t\tversion_num\n\t\t\t\towner {\n\t\t\t\t\tfirst_name\n\t\t\t\t}\n\t\t\t\tdrills {\n\t\t\t\t\tid\n\t\t\t\t\tdrill {\n\t\t\t\t\t\ttitle id\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tstats {\n\t\t\t\t\trunning_km id\n\t\t\t\t\trunning_minutes\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n"]);return Ce=function(){return e},e}function Ae(){var e=Object(de.a)(["\n\tquery getWorkouts {\n\t\tworkouts {\n\t\t\tid title type intensity\n            versions ( order_by: { version_num: asc } ){\n\t\t\t\tid body\n\t\t\t\tversion_num\n\t\t\t\towner {\n\t\t\t\t\tfirst_name\n\t\t\t\t}\n\t\t\t\tdrills {\n\t\t\t\t\tid\n\t\t\t\t\tdrill {\n\t\t\t\t\t\ttitle id\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tstats {\n\t\t\t\t\trunning_km id\n\t\t\t\t\trunning_minutes\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n"]);return Ae=function(){return e},e}function Be(){var e=Object(de.a)(["\n\tmutation updateDrills ( $id: uuid!, $data: drills_set_input! ) {\n\t\tupdate_drills( where: { id: { _eq: $id }}, _set: $data ) {\n\t\t\treturning { id }\n\t\t}\n\t}\n"]);return Be=function(){return e},e}function Se(){var e=Object(de.a)(["\n\tmutation insertDrills ( $objects: [drills_insert_input!]! ) {\n\t\tinsert_drills ( objects: $objects ) {\n\t\t\treturning { id }\n\t\t}\n\t}\n"]);return Se=function(){return e},e}function Ie(){var e=Object(de.a)(["\n\tquery getAllDrills ( $id: uuid! ) {\n\t\tdrills_by_pk ( id: $id ) {\n\t\t\tid title url description embed_url\n\t\t\tworkouts_drills {\n\t\t\t\tworkouts_version {\n\t\t\t\t\tworkout { title }\n\t\t\t\t\tversion_num\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n"]);return Ie=function(){return e},e}function $e(){var e=Object(de.a)(["\n\tquery getAllDrills {\n\t\tdrills ( order_by: { title: asc }) {\n\t\t\tid title url description embed_url\n\t\t}\n\t}\n"]);return $e=function(){return e},e}function De(){var e=Object(de.a)(["\n\tquery getUser ( $uid: String! ) {\n\t\tusers_by_pk( uid: $uid ) {\n\t\t\temail first_name id\n\t\t}\n\t}\n"]);return De=function(){return e},e}var Pe={auth:{getUser:ge()(De())},drills:{getAll:ge()($e()),getOne:ge()(Ie()),add:ge()(Se()),update:ge()(Be())},workouts:{getAll:ge()(Ae()),getOne:ge()(Ce()),getVersion:ge()(xe()),addVersion:ge()(Oe()),updateVersion:ge()(je()),addDrill:ge()(_e()),removeDrill:ge()(ye()),deleteWorkout:ge()(we()),deleteVersion:ge()(Ee())},weeks:{getAll:ge()(ve()),subscribe:ge()(he()),updateWeek:ge()(ke()),updateWeekday:ge()(fe()),add:ge()(be())},days:{getAll:ge()(pe())}},We={Auth:Object(a.createContext)({authUser:{},token:"",uid:"",isAuthenticating:!1,isAuthenticated:!1,updateAuth:function(){},signIn:function(){},signOut:function(){}}),UI:Object(a.createContext)({panel:{},openPanel:function(){},closePanel:function(){},notifications:[{}],addNotification:function(){}})},Fe=n(272);function Ue(){return r.a.createElement(w.a,{display:"flex",alignItems:"center",justifyContent:"center",height:"100%"},r.a.createElement(Fe.a,null))}var qe={intensityOptions:[{label:"Recovery",value:"1"},{label:"Low",value:"2"},{label:"Normal",value:"3"},{label:"High",value:"4"},{label:"V High",value:"5"}],workoutTypes:[{label:"HIIT",value:"hiit"},{label:"Endurance",value:"endurance"},{label:"Work Capacity",value:"work-capacity"},{label:"Recovery",value:"recovery"}]};function Re(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(w.a,null,r.a.createElement(T.a,{size:800,color:"#1070CA"},"Dashboard")))}var Le=n(301);function ze(e){var t=e.id,n=Object(k.c)(Pe.workouts.getOne,{variables:{id:t}}),i=n.data,l=n.loading,u=Object(k.b)(Pe.workouts.deleteWorkout,{refetchQueries:[{query:Pe.workouts.getAll}],awaitRefetchQueries:!0}),d=Object(o.a)(u,1)[0],m=Object(k.b)(Pe.workouts.deleteVersion,{refetchQueries:[{query:Pe.workouts.getOne,variables:{id:t}}],awaitRefetchQueries:!0}),g=Object(o.a)(m,1)[0],p=Object(a.useContext)(We.UI).openPanel,b=Object(a.useState)(),h=Object(o.a)(b,2),y=h[0],_=h[1],j=qe.intensityOptions,O=qe.workoutTypes,x=Object(E.f)(),C=f.a.get(i,"workouts_by_pk.title"),A=f.a.get(i,"workouts_by_pk.type"),B=f.a.get(i,"workouts_by_pk.intensity"),S=f.a.get(i,"workouts_by_pk.versions");if(Object(a.useEffect)((function(){y||_(f.a.get(f.a.last(S),"version_num"))}),[S]),l)return r.a.createElement(Ue,null);var I=f.a.find(S,["version_num",y]),$=f.a.get(I,"body"),D=f.a.get(I,"stats",{}),W=f.a.map(f.a.get(I,"drills",[]),"drill"),F=f.a.get(f.a.find(j,["value",B]),"label",""),U=f.a.get(f.a.find(O,["value",A]),"label",""),q=function(){var e=Object(s.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d({variables:{id:t}});case 2:x.push("/workouts");case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),R=function(){var e=Object(s.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g({variables:{id:f.a.get(I,"id")}});case 2:_(f.a.get(f.a.last(S),"version_num"));case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return r.a.createElement(r.a.Fragment,null,r.a.createElement(w.a,{display:"flex",justifyContent:"flex-end"},r.a.createElement(P.a,{marginLeft:8,iconBefore:"plus",onClick:function(){return p({panel:"workouts/add-version",props:{id:I.id,workoutId:t},size:"wide"})}},"Add Version"),r.a.createElement(P.a,{marginLeft:8,iconBefore:"edit",onClick:function(){return p({panel:"workouts/edit",props:{id:I.id},size:"wide"})}},"Edit"),r.a.createElement(P.a,{marginLeft:8,iconBefore:"walk",onClick:function(){return p({panel:"workouts/edit-drills",props:{id:I.id},size:"wide"})}},"Edit Drills")),r.a.createElement(w.a,{marginBottom:32,display:"flex",flexDirection:"row",alignItems:"center"},r.a.createElement(w.a,{marginRight:16},r.a.createElement(T.a,null,C)),r.a.createElement(w.a,{flex:1},r.a.createElement(Le.a,{marginRight:8,color:"blue"},U),r.a.createElement(Le.a,{color:"blue"},F))),r.a.createElement(w.a,{display:"flex",flexDirection:"row",alignItems:"center",marginBottom:24},r.a.createElement(V.a,null,"Versions:"),r.a.createElement(w.a,{flex:1,marginLeft:16},r.a.createElement(oe.a,{alignItems:"center"},S&&f.a.map(S,(function(e){var t=e.version_num;return r.a.createElement(ue.a,{key:t,id:t,onSelect:function(){return _(t)},isSelected:y===t,"aria-controls":"panel-".concat(t)},t)}))))),r.a.createElement(w.a,{background:"white",padding:32,marginBottom:32,elevation:1},r.a.createElement(T.a,{size:200},"Description:"),r.a.createElement(V.a,null,$)),r.a.createElement(w.a,{marginBottom:32},r.a.createElement(T.a,{size:200},"Drills:"),f.a.isEmpty(W)?r.a.createElement(H.a,null,"No attached drills"):f.a.map(W,(function(e){var t=e.id,n=e.title;return r.a.createElement(v.b,{to:"/drills/".concat(t),key:t,style:{marginBottom:"24px"}},r.a.createElement(w.a,{display:"flex",elevation:1,height:48,alignItems:"center",background:"white",marginBottom:16},r.a.createElement(V.a,{marginLeft:24},n)))}))),r.a.createElement(w.a,{background:"white",padding:32,elevation:1},r.a.createElement(T.a,{size:200},"Stats:"),r.a.createElement(H.a,null,"Total running kilometers - ",r.a.createElement("strong",null,f.a.get(D,"running_km",0))),r.a.createElement(H.a,null,"Total running minutes - ",r.a.createElement("strong",null,f.a.get(D,"running_minutes",0)))),r.a.createElement(w.a,{display:"flex",justifyContent:"flex-end"},r.a.createElement(P.a,{intent:"danger",appearance:"minimal",onClick:R,marginRight:24},"Delete This Version"),r.a.createElement(P.a,{intent:"danger",appearance:"minimal",onClick:q},"Delete This Workout")))}function Ve(){var e=Object(a.useContext)(We.UI).openPanel,t=Object(k.c)(Pe.workouts.getAll),n=t.data,i=t.loading,l=f.a.get(n,"workouts"),o=qe.intensityOptions,u=qe.workoutTypes;return i?r.a.createElement(Ue,null):r.a.createElement(r.a.Fragment,null,r.a.createElement(w.a,{display:"flex",justifyContent:"flex-end"},r.a.createElement(P.a,{iconBefore:"plus",onClick:function(){return e({panel:"workouts/add",size:"wide"})}},"Add")),r.a.createElement(w.a,{marginBottom:16},r.a.createElement(T.a,null,"All Workouts:")),r.a.createElement(w.a,null,l&&f.a.map(l,(function(e){var t=e.id,n=e.title,a=e.intensity,i=e.type,l=f.a.get(f.a.find(o,["value",a]),"label",""),c=f.a.get(f.a.find(u,["value",i]),"label","");return r.a.createElement(v.b,{to:"/workouts/".concat(t),key:t,style:{marginBottom:"24px",width:"100%"}},r.a.createElement(w.a,{display:"flex",elevation:1,height:48,alignItems:"center",background:"white",marginBottom:16},r.a.createElement(w.a,{flex:1},r.a.createElement(V.a,{marginLeft:24,marginRight:8},n),r.a.createElement(Le.a,{marginRight:8,color:"blue"},c),r.a.createElement(Le.a,{color:"blue"},l))))}))))}function Te(){var e=Object(E.h)().id,t=Boolean(e);return r.a.createElement(r.a.Fragment,null,r.a.createElement(w.a,null,r.a.createElement(T.a,{size:800,color:"#1070CA",marginBottom:48},"Workouts")),r.a.createElement(w.a,null,t?r.a.createElement(ze,{id:e}):r.a.createElement(Ve,null)))}var Me=n(141),Qe=n(295),Ne=n(53),He=n(140);function Ke(e){var t=e.id,n=Object(k.d)(Pe.weeks.subscribe,{variables:{id:t}}),i=n.data,l=n.loading,o=Object(a.useContext)(We.UI).openPanel;if(l)return r.a.createElement(Ue,null);var u=f.a.get(i,"weeks[0]"),c=u.title,s=u.updated_at,d=u.days;return r.a.createElement(r.a.Fragment,null,r.a.createElement(w.a,{display:"flex",justifyContent:"flex-end"},r.a.createElement(P.a,{marginLeft:8,iconBefore:"arrow-down",onClick:function(e){return Ze(u,e)}},"Download DOCX")),r.a.createElement(w.a,{marginBottom:32,display:"flex",flexDirection:"row",alignItems:"center"},r.a.createElement(w.a,{marginRight:16},r.a.createElement(T.a,null,c)),r.a.createElement(w.a,{flex:1},r.a.createElement(V.a,null,"Last updated: ",r.a.createElement(Le.a,{color:"blue"},Object(X.a)(Object(Qe.a)(s),"dd MMM yyyy @ h:mm a").replace("@","at"))))),r.a.createElement(w.a,{display:"flex",justifyContent:"space-between"},d&&f.a.map(d,(function(e){var t=e.id,n=e.day.title,a=e.workout,i=f.a.get(a,"workout.title"),l=f.a.get(a,"version_num");return r.a.createElement(w.a,{key:t,elevation:1,width:"12%",background:"white",paddingLeft:16,paddingBottom:16},r.a.createElement(w.a,{display:"flex",justifyContent:"space-between",alignItems:"flex-end",marginBottom:8},r.a.createElement(T.a,{size:200},n),r.a.createElement(N.a,{icon:"small-plus",appearance:"minimal",onClick:function(){return o({panel:"weeks/update-workout",props:{id:t,title:n},size:"wide"})}})),r.a.createElement(w.a,{paddingRight:16},f.a.isEmpty(a)?r.a.createElement(V.a,{color:"red"},"No workout chosen"):r.a.createElement(V.a,null,i," - v",l)))}))))}var Ze=function(e,t){t.preventDefault();var n=e.title,a=e.days,r=new Ne.Document;r.addSection({children:[new Ne.Paragraph({text:n,heading:Ne.HeadingLevel.HEADING_1})]}),f.a.forEach(a,(function(e){var t=f.a.get(e,"day.title",""),n=f.a.get(e,"workout",[]),a=f.a.compact(f.a.get(e,"workout.drills",[])),i=[new Ne.Paragraph({text:t,heading:Ne.HeadingLevel.HEADING_3})];if(f.a.isEmpty(n))i.push(new Ne.Paragraph({text:"Nothing assigned today, rest day!"}));else if(i.push(new Ne.Paragraph({text:n.body})),!f.a.isEmpty(a)){var l=f.a.map(a,(function(e){var t=e.drill,n=t.title,a=t.url;return new Ne.Paragraph({text:"".concat(n,": ").concat(a),bullet:{level:0}})}));i.push(new Ne.Paragraph({text:"Please perform the following drills:",heading:Ne.HeadingLevel.HEADING_4})),i.push.apply(i,Object(Me.a)(l))}r.addSection({children:i})})),Ne.Packer.toBlob(r).then((function(e){return Object(He.save)(e,"".concat(n,".docx"))}))};function Ge(){var e=Object(a.useContext)(We.UI).openPanel,t=Object(k.c)(Pe.weeks.getAll),n=t.data,i=t.loading,l=f.a.get(n,"weeks");return i?r.a.createElement(Ue,null):r.a.createElement(r.a.Fragment,null,r.a.createElement(w.a,{display:"flex",justifyContent:"flex-end"},r.a.createElement(P.a,{iconBefore:"plus",onClick:function(){return e({panel:"weeks/add"})}},"Add")),r.a.createElement(w.a,{marginBottom:16},r.a.createElement(T.a,null,"All Weeks:")),r.a.createElement(w.a,null,l&&f.a.map(l,(function(e){var t=e.id,n=e.title;return r.a.createElement(v.b,{to:"/weeks/".concat(t),key:t,style:{marginBottom:"24px"}},r.a.createElement(w.a,{display:"flex",elevation:1,height:48,alignItems:"center",background:"white",marginBottom:16},r.a.createElement(V.a,{marginLeft:24},n)))}))))}function Je(){var e=Object(E.h)().id,t=Boolean(e);return r.a.createElement(r.a.Fragment,null,r.a.createElement(w.a,null,r.a.createElement(T.a,{size:800,color:"#1070CA",marginBottom:48},"Weeks")),r.a.createElement(w.a,null,t?r.a.createElement(Ke,{id:e}):r.a.createElement(Ge,null)))}var Ye=n(296);function Xe(e){var t=Object(a.useContext)(We.UI).openPanel,n=e.id,i=Object(k.c)(Pe.drills.getOne,{variables:{id:n}}),l=i.data;if(i.loading)return r.a.createElement(Ue,null);var o=f.a.get(l,"drills_by_pk",{}),u=f.a.get(o,"title"),c=f.a.get(o,"description"),s=f.a.get(o,"url"),d=f.a.get(o,"embed_url"),m=f.a.get(o,"workouts_drills",[]),g=f.a.size(m);return r.a.createElement(r.a.Fragment,null,r.a.createElement(w.a,{display:"flex",justifyContent:"flex-end"},r.a.createElement(P.a,{iconBefore:"edit",onClick:function(){return t({panel:"drills/edit",props:{id:n}})}},"Edit")),r.a.createElement(w.a,{marginBottom:32,display:"flex"},r.a.createElement(T.a,{marginRight:16},u),s&&r.a.createElement(Ye.a,{href:s,target:"_blank",rel:"noreferrer noopener"},s)),r.a.createElement(w.a,{display:"flex"},r.a.createElement(w.a,{flex:1,marginRight:32},c&&r.a.createElement(w.a,{background:"white",padding:32,marginBottom:32,elevation:1},r.a.createElement(H.a,null,c)),r.a.createElement(w.a,{background:"white",padding:32,marginBottom:32,elevation:1},r.a.createElement(V.a,null,"Appears in ",r.a.createElement("strong",null,g)," workouts"))),d&&r.a.createElement(w.a,{elevation:1,height:315,width:560},r.a.createElement("iframe",{width:"560",height:"315",src:d,title:u,frameBorder:"0",allow:"accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0}))))}function et(){var e=Object(a.useContext)(We.UI).openPanel,t=Object(k.c)(Pe.drills.getAll),n=t.data,i=t.loading,l=f.a.get(n,"drills");return i?r.a.createElement(Ue,null):r.a.createElement(r.a.Fragment,null,r.a.createElement(w.a,{display:"flex",justifyContent:"flex-end"},r.a.createElement(P.a,{iconBefore:"plus",onClick:function(){return e({panel:"drills/add"})}},"Add")),r.a.createElement(w.a,{marginBottom:16},r.a.createElement(T.a,null,"All Drills:")),r.a.createElement(w.a,null,l&&f.a.map(l,(function(e){var t=e.id,n=e.title;return r.a.createElement(v.b,{to:"/drills/".concat(t),key:t,style:{marginBottom:"24px"}},r.a.createElement(w.a,{display:"flex",elevation:1,height:48,alignItems:"center",background:"white",marginBottom:16},r.a.createElement(V.a,{marginLeft:24},n)))}))))}function tt(){var e=Object(E.h)().id,t=Boolean(e);return r.a.createElement(r.a.Fragment,null,r.a.createElement(w.a,null,r.a.createElement(T.a,{size:800,color:"#1070CA",marginBottom:48},"Drills")),r.a.createElement(w.a,null,t?r.a.createElement(Xe,{id:e}):r.a.createElement(et,null)))}Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var nt=document.getElementById("root");nt.hasChildNodes()?Object(i.hydrate)(r.a.createElement(I,null),nt):Object(i.render)(r.a.createElement(I,null),nt),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[150,1,2]]]);
//# sourceMappingURL=main.64c4cb31.chunk.js.map